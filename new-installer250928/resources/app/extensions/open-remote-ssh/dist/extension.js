(()=>{var t,e,r={4009:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=s(r(8069));i(r(8069),e),e.default=o.default},7336:(t,e)=>{"use strict";function r(t,e){return t=function(t,e){for(let e of"\\()[]{}.+^$|")t=t.replace(new RegExp("\\"+e,"g"),"\\"+e);return t}(t),t=t.replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+t+")$").test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){const n=Array.isArray(t)?t:t.split(/,/);let i=!1;for(const t of n){if("!"==t[0]&&r(t.slice(1),e))return!1;r(t,e)&&(i=!0)}return i}},8069:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=e.parse=e.LineType=void 0;const i=n(r(7336)),s=r(5317),o=n(r(857)),a=/\s/,c=/\r|\n/,h=/^(Host|Match)$/i,l=/^(GlobalKnownHostsFile|Host|IPQoS|SendEnv|UserKnownHostsFile|ProxyCommand|Match)$/i,u=/^(?:CertificateFile|IdentityFile|IdentityAgent|User)$/i,f=/^(Include|IdentityFile)$/i;var d;!function(t){t[t.DIRECTIVE=1]="DIRECTIVE",t[t.COMMENT=2]="COMMENT"}(d=e.LineType||(e.LineType={}));const p=["IdentityFile","LocalForward","RemoteForward","DynamicForward","CertificateFile"];function g(t,e){return e.hasOwnProperty(t.param)&&e[t.param]===t.value}function A(t){for(const e of t)if(e.type===d.DIRECTIVE&&"config"in e)for(const t of e.config)if(t.before)return t.before;return"  "}function _(t,e){const r=(t,r)=>{switch(t.toLowerCase()){case"all":return!0;case"final":return!!e.inFinalPass||(e.doFinalPass=!0,!1);case"exec":const t=`function main {\n          ${r}\n        }\n        main`;return 0===(0,s.spawnSync)(t,{shell:!0}).status;case"host":return(0,i.default)(r,e.params.HostName);case"originalhost":return(0,i.default)(r,e.params.OriginalHost);case"user":return(0,i.default)(r,e.params.User);case"localuser":return(0,i.default)(r,e.params.LocalUser)}};for(const e in t)if(!r(e,t[e]))return!1;return!0}class E extends Array{static parse(t){return m(t)}static stringify(t){return y(t)}compute(t){"string"==typeof t&&(t={Host:t});const e={params:{Host:t.Host,HostName:t.Host,OriginalHost:t.Host,User:o.default.userInfo().username,LocalUser:o.default.userInfo().username},inFinalPass:!1,doFinalPass:!1},r={},n=(t,n)=>{p.includes(t)?(r[t]||(r[t]=[])).push(n):null==r[t]&&("HostName"===t?e.params.HostName=n:"User"===t&&(e.params.User=n),r[t]=n)};void 0!==t.User&&n("User",t.User);const s=()=>{for(const t of this)if(t.type===d.DIRECTIVE)if("Host"===t.param&&(0,i.default)(t.value,e.params.Host)){n(t.param,t.value);for(const e of t.config)e.type===d.DIRECTIVE&&n(e.param,e.value)}else if("Match"===t.param&&"criteria"in t&&_(t.criteria,e))for(const e of t.config)e.type===d.DIRECTIVE&&n(e.param,e.value);else"Host"!==t.param&&"Match"!==t.param&&n(t.param,t.value)};return s(),e.doFinalPass&&(e.inFinalPass=!0,e.params.Host=e.params.HostName,s()),r}find(t){if("function"==typeof t)return super.find(t);if(!t||!("Host"in t)&&!("Match"in t))throw new Error("Can only find by Host or Match");return super.find((e=>g(e,t)))}remove(t){let e;if("function"==typeof t)e=super.findIndex(t);else{if(!t||!("Host"in t)&&!("Match"in t))throw new Error("Can only remove by Host or Match");e=super.findIndex((e=>g(e,t)))}if(e>=0)return this.splice(e,1)}toString(){return y(this)}append(t){const e=A(this),r=this.length>0?this[this.length-1]:null;let n=r&&r.config||this,i=this,s=n.length>0?n[n.length-1]:r;s&&!s.after&&(s.after="\n");let o=n!==i;for(const r in t){const a=t[r],c={type:d.DIRECTIVE,param:r,separator:" ",value:a,before:o?e:e.replace(/  |\t/,""),after:"\n"};h.test(r)?(o=!0,c.before=e.replace(/  |\t/,""),n=i,s&&"\n"===s.after&&(s.after+="\n"),n.push(c),n=c.config=new E):n.push(c),s=c}return i}prepend(t,e=!1){const r=A(this);let n=this,i=0;if(e){for(;i<this.length&&!("config"in this[i]);)i+=1;if(i>=this.length)return this.append(t)}let s=!1,o=0;for(const e in t){o+=1;const a=t[e],c={type:d.DIRECTIVE,param:e,separator:" ",value:a,before:"",after:"\n"};h.test(e)?(c.before=r.replace(/  |\t/,""),n.splice(i,0,c),n=c.config=new E,s=!0):(o===Object.keys(t).length&&(c.after+="\n"),s?(c.before=r,n.push(c)):(n.splice(i,0,c),i+=1,f.test(e)&&(c.after+="\n")))}return n}}function m(t){let e=0,r=s(),n=new E,i=n;function s(){return t[e++]}function o(){let t="";for(;a.test(r);)t+=r,r=s();return t}function u(){let t=o();return"="===r&&(t+=r,r=s()),t+o()}function f(){let t="",e=!1,n=!1;for(;r&&!c.test(r);)n?(t+='"'===r?r:`\\${r}`,n=!1):'"'!==r||t&&!e?"\\"===r?n=!0:t+=r:e=!e,r=s();if(e||n)throw new Error(`Unexpected line break at ${t}`);return t.trim()}function p(){const t=[];let e="",n=!1,i=!1;for(;r&&!c.test(r);)i?(e+='"'===r?r:`\\${r}`,i=!1):'"'===r?n=!n:"\\"===r?i=!0:n?e+=r:/[ \t]/.test(r)?e&&(t.push(e),e=""):e+=r,r=s();if(n||i)throw new Error(`Unexpected line break at ${t.concat(e).join(" ")}`);return e&&t.push(e),t.length>1?t:t[0]}function g(){const t=o(),e="#"===r?function(){const t=d.COMMENT;let e="";for(;r&&!c.test(r);)e+=r,r=s();return{type:t,content:e,before:"",after:""}}():function(){const t=d.DIRECTIVE,e=function(){let t="";for(;r&&/[^ \t=]/.test(r);)t+=r,r=s();return t}(),n=l.test(e),i={type:t,param:e,separator:u(),quoted:!n&&'"'===r,value:n?p():f(),before:"",after:""};if(i.quoted||delete i.quoted,/^Match$/i.test(e)){const t={};"string"==typeof i.value&&(i.value=[i.value]);let e=0;for(;e<i.value.length;){const r=i.value[e];switch(r.toLowerCase()){case"all":case"canonical":case"final":t[r]=[],e+=1;break;default:if(e+1>=i.value.length)throw new Error(`Missing value for match criteria ${r}`);t[r]=i.value[e+1],e+=2}}i.criteria=t}return i}(),n=function(){let t="";for(;c.test(r);)t+=r,r=s();return t}();return e.before=t,e.after=n,e}for(;r;){let t=g();t.type===d.DIRECTIVE&&h.test(t.param)?(n=i,n.push(t),n=t.config=new E):t.type!==d.DIRECTIVE||t.param?n.push(t):0===n.length?i[i.length-1].after+=t.before:n[n.length-1].after+=t.before}return i}function y(t){let e="";function r(t,e){return Array.isArray(t)?t.map((t=>r(t,a.test(t)))).join(" "):e?`"${t}"`:t}function n(t){const e=t.quoted||u.test(t.param)&&a.test(t.value),n=r(t.value,e);return`${t.param}${t.separator}${n}`}const i=t=>{e+=t.before,t.type===d.COMMENT?e+=t.content:t.type===d.DIRECTIVE&&p.includes(t.param)?[].concat(t.value).forEach((function(r,i,s){e+=n({...t,value:r}),i<s.length-1&&(e+=`\n${t.before}`)})):t.type===d.DIRECTIVE&&(e+=n(t)),e+=t.after,t.config&&t.config.forEach(i)};return t.forEach(i),e}e.default=E,E.DIRECTIVE=d.DIRECTIVE,E.COMMENT=d.COMMENT,e.parse=m,e.stringify=y},6395:t=>{t.exports={newInvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}}},5670:(t,e,r)=>{var n=r(6395),i=r(6299),s=r(3319),o=r(1431);for(var a in t.exports={Reader:s,Writer:o},i)i.hasOwnProperty(a)&&(t.exports[a]=i[a]);for(var c in n)n.hasOwnProperty(c)&&(t.exports[c]=n[c])},3319:(t,e,r)=>{var n=r(2613),i=r(4774).Buffer,s=r(6299),o=r(6395).newInvalidAsn1Error;function a(t){if(!t||!i.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128&~e)this._len=e;else{if(0==(e&=127))throw o("Indefinite length not supported");if(e>4)throw o("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(255&this._buf[t++])}return t},a.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw o("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},a.prototype.readInt=function(){return this._readTag(s.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(s.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(s.Enumeration)},a.prototype.readString=function(t,e){t||(t=s.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw o("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return e?i.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?a:a.toString("utf8")},a.prototype.readOID=function(t){t||(t=s.OID);var e=this.readString(t,!0);if(null===e)return null;for(var r=[],n=0,i=0;i<e.length;i++){var o=255&e[i];n<<=7,n+=127&o,128&o||(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40|0),r.join(".")},a.prototype._readTag=function(t){n.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw o("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw o("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],s=0,a=0;a<this.length;a++)s<<=8,s|=255&this._buf[this._offset++];return 128&~i||4===a||(s-=1<<8*a),0|s},t.exports=a},6299:t=>{t.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},1431:(t,e,r)=>{var n=r(2613),i=r(4774).Buffer,s=r(6299),o=r(6395).newInvalidAsn1Error,a={size:1024,growthFactor:8};function c(t){var e,r;e=a,r=t||{},n.ok(e),n.equal(typeof e,"object"),n.ok(r),n.equal(typeof r,"object"),Object.getOwnPropertyNames(e).forEach((function(t){if(!r[t]){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}})),t=r,this._buf=i.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(c.prototype,"buffer",{get:function(){if(this._seq.length)throw o(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),c.prototype.writeByte=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},c.prototype.writeInt=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");"number"!=typeof e&&(e=s.Integer);for(var r=4;(!(4286578688&t)||-8388608==(4286578688&t))&&r>1;)r--,t<<=8;if(r>4)throw o("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&t)>>>24,t<<=8},c.prototype.writeNull=function(){this.writeByte(s.Null),this.writeByte(0)},c.prototype.writeEnumeration=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");return"number"!=typeof e&&(e=s.Enumeration),this.writeInt(t,e)},c.prototype.writeBoolean=function(t,e){if("boolean"!=typeof t)throw new TypeError("argument must be a Boolean");"number"!=typeof e&&(e=s.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},c.prototype.writeString=function(t,e){if("string"!=typeof t)throw new TypeError("argument must be a string (was: "+typeof t+")");"number"!=typeof e&&(e=s.OctetString);var r=i.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)},c.prototype.writeBuffer=function(t,e){if("number"!=typeof e)throw new TypeError("tag must be a number");if(!i.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length},c.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach((function(t){e.writeString(t)}))},c.prototype.writeOID=function(t,e){if("string"!=typeof t)throw new TypeError("argument must be a string");if("number"!=typeof e&&(e=s.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var r=t.split("."),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(t){!function(t,e){e<128?t.push(e):e<16384?(t.push(e>>>7|128),t.push(127&e)):e<2097152?(t.push(e>>>14|128),t.push(e>>>7&255|128),t.push(127&e)):e<268435456?(t.push(e>>>21|128),t.push(e>>>14&255|128),t.push(e>>>7&255|128),t.push(127&e)):(t.push(e>>>28&255|128),t.push(e>>>21&255|128),t.push(e>>>14&255|128),t.push(e>>>7&255|128),t.push(127&e))}(n,parseInt(t,10))}));var i=this;this._ensure(2+n.length),this.writeByte(e),this.writeLength(n.length),n.forEach((function(t){i.writeByte(t)}))},c.prototype.writeLength=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(t<=16777215))throw o("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},c.prototype.startSequence=function(t){"number"!=typeof t&&(t=s.Sequence|s.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},c.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else{if(!(r<=16777215))throw o("Sequence too long");this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r}},c.prototype._shift=function(t,e,r){n.ok(void 0!==t),n.ok(void 0!==e),n.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r},c.prototype._ensure=function(t){if(n.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=i.alloc(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}},t.exports=c},3100:(t,e,r)=>{var n=r(5670);t.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},8505:t=>{"use strict";function e(t,e,i){t instanceof RegExp&&(t=r(t,i)),e instanceof RegExp&&(e=r(e,i));var s=n(t,e,i);return s&&{start:s[0],end:s[1],pre:i.slice(0,s[0]),body:i.slice(s[0]+t.length,s[1]),post:i.slice(s[1]+e.length)}}function r(t,e){var r=e.match(t);return r?r[0]:null}function n(t,e,r){var n,i,s,o,a,c=r.indexOf(t),h=r.indexOf(e,c+1),l=c;if(c>=0&&h>0){if(t===e)return[c,h];for(n=[],s=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(t,l+1)):1==n.length?a=[n.pop(),h]:((i=n.pop())<s&&(s=i,o=h),h=r.indexOf(e,l+1)),l=c<h&&c>=0?c:h;n.length&&(a=[s,o])}return a}t.exports=e,e.range=n},4015:(t,e,r)=>{"use strict";var n=r(8947).lowlevel.crypto_hash,i=0,s=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function o(t,e,r){return(t[0][e[r+3]]+t[1][e[r+2]]^t[2][e[r+1]])+t[3][e[r]]}function a(t,e){var r,n=0;for(r=0;r<4;r++,i++)i>=e&&(i=0),n=n<<8|t[i];return n}s.prototype.encipher=function(t,e){void 0===e&&(e=new Uint8Array(t.buffer),0!==t.byteOffset&&(e=e.subarray(t.byteOffset))),t[0]^=this.P[0];for(var r=1;r<16;r+=2)t[1]^=o(this.S,e,0)^this.P[r],t[0]^=o(this.S,e,4)^this.P[r+1];var n=t[0];t[0]=t[1]^this.P[17],t[1]=n},s.prototype.decipher=function(t){var e=new Uint8Array(t.buffer);0!==t.byteOffset&&(e=e.subarray(t.byteOffset)),t[0]^=this.P[17];for(var r=16;r>0;r-=2)t[1]^=o(this.S,e,0)^this.P[r],t[0]^=o(this.S,e,4)^this.P[r-1];var n=t[0];t[0]=t[1]^this.P[0],t[1]=n},s.prototype.expand0state=function(t,e){var r,n,s=new Uint32Array(2),o=new Uint8Array(s.buffer);for(r=0,i=0;r<18;r++)this.P[r]^=a(t,e);for(i=0,r=0;r<18;r+=2)this.encipher(s,o),this.P[r]=s[0],this.P[r+1]=s[1];for(r=0;r<4;r++)for(n=0;n<256;n+=2)this.encipher(s,o),this.S[r][n]=s[0],this.S[r][n+1]=s[1]},s.prototype.expandstate=function(t,e,r,n){var s,o,c=new Uint32Array(2);for(s=0,i=0;s<18;s++)this.P[s]^=a(r,n);for(s=0,i=0;s<18;s+=2)c[0]^=a(t,e),c[1]^=a(t,e),this.encipher(c),this.P[s]=c[0],this.P[s+1]=c[1];for(s=0;s<4;s++)for(o=0;o<256;o+=2)c[0]^=a(t,e),c[1]^=a(t,e),this.encipher(c),this.S[s][o]=c[0],this.S[s][o+1]=c[1];i=0},s.prototype.enc=function(t,e){for(var r=0;r<e;r++)this.encipher(t.subarray(2*r))},s.prototype.dec=function(t,e){for(var r=0;r<e;r++)this.decipher(t.subarray(2*r))};function c(t,e,r){var n,i=new s,o=new Uint32Array(8),c=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(i.expandstate(e,64,t,64),n=0;n<64;n++)i.expand0state(e,64),i.expand0state(t,64);for(n=0;n<8;n++)o[n]=a(c,c.byteLength);for(n=0;n<64;n++)i.enc(o,o.byteLength/8);for(n=0;n<8;n++)r[4*n+3]=o[n]>>>24,r[4*n+2]=o[n]>>>16,r[4*n+1]=o[n]>>>8,r[4*n+0]=o[n]}t.exports={BLOCKS:8,HASHSIZE:32,hash:c,pbkdf:function(t,e,r,i,s,o,a){var h,l,u,f,d,p,g=new Uint8Array(64),A=new Uint8Array(64),_=new Uint8Array(32),E=new Uint8Array(32),m=new Uint8Array(i+4),y=o;if(a<1)return-1;if(0===e||0===i||0===o||o>_.byteLength*_.byteLength||i>1<<20)return-1;for(f=Math.floor((o+_.byteLength-1)/_.byteLength),u=Math.floor((o+f-1)/f),h=0;h<i;h++)m[h]=r[h];for(n(g,t,e),p=1;o>0;p++){for(m[i+0]=p>>>24,m[i+1]=p>>>16,m[i+2]=p>>>8,m[i+3]=p,n(A,m,i+4),c(g,A,E),h=_.byteLength;h--;)_[h]=E[h];for(h=1;h<a;h++)for(n(A,E,E.byteLength),c(g,A,E),l=0;l<_.byteLength;l++)_[l]^=E[l];for(u=Math.min(u,o),h=0;h<u&&!((d=h*f+(p-1))>=y);h++)s[d]=_[h];o-=h}return 0}}},6892:(t,e,r)=>{var n=r(7168),i=r(4434).EventEmitter,s=r(6512),o=r(4644),a=r(2203).Stream;function c(t){for(var e=0,r=0;r<t.length;r++)e+=Math.pow(256,r)*t[r];return e}function h(t){for(var e=0,r=0;r<t.length;r++)e+=Math.pow(256,t.length-r-1)*t[r];return e}function l(t){var e=h(t);return 128&~t[0]||(e-=Math.pow(256,t.length)),e}function u(t){var e=c(t);return 128&~t[t.length-1]||(e-=Math.pow(256,t.length)),e}function f(t){var e={};return[1,2,4,8].forEach((function(r){var n=8*r;e["word"+n+"le"]=e["word"+n+"lu"]=t(r,c),e["word"+n+"ls"]=t(r,u),e["word"+n+"be"]=e["word"+n+"bu"]=t(r,h),e["word"+n+"bs"]=t(r,l)})),e.word8=e.word8u=e.word8be,e.word8s=e.word8bs,e}(e=t.exports=function(t,r){if(Buffer.isBuffer(t))return e.parse(t);var n=e.stream();return t&&t.pipe?t.pipe(n):t&&(t.on(r||"data",(function(t){n.write(t)})),t.on("end",(function(){n.end()}))),n}).stream=function(t){if(t)return e.apply(null,arguments);var r=null;function c(t,e,n){r={bytes:t,skip:n,cb:function(t){r=null,e(t)}},l()}var h=null;function l(){if(r)if("function"==typeof r)r();else{var t,e=h+r.bytes;d.length>=e&&(null==h?(t=d.splice(0,e),r.skip||(t=t.slice())):(r.skip||(t=d.slice(h,e)),h=e),r.skip?r.cb():r.cb(t))}else A&&(g=!0)}var u=n.light((function(t){function e(){g||t.next()}var n=f((function(t,r){return function(n){c(t,(function(t){p.set(n,r(t)),e()}))}}));return n.tap=function(e){t.nest(e,p.store)},n.into=function(e,r){p.get(e)||p.set(e,{});var n=p;p=o(n.get(e)),t.nest((function(){r.apply(this,arguments),this.tap((function(){p=n}))}),p.store)},n.flush=function(){p.store={},e()},n.loop=function(r){var n=!1;t.nest(!1,(function i(){this.vars=p.store,r.call(this,(function(){n=!0,e()}),p.store),this.tap(function(){n?t.next():i.call(this)}.bind(this))}),p.store)},n.buffer=function(t,r){"string"==typeof r&&(r=p.get(r)),c(r,(function(r){p.set(t,r),e()}))},n.skip=function(t){"string"==typeof t&&(t=p.get(t)),c(t,(function(){e()}))},n.scan=function(t,n){if("string"==typeof n)n=new Buffer(n);else if(!Buffer.isBuffer(n))throw new Error("search must be a Buffer or a string");var i=0;r=function(){var s=d.indexOf(n,h+i),o=s-h-i;-1!==s?(r=null,null!=h?(p.set(t,d.slice(h,h+i+o)),h+=i+o+n.length):(p.set(t,d.slice(0,i+o)),d.splice(0,i+o+n.length)),e(),l()):o=Math.max(d.length-n.length-h-i,0),i+=o},l()},n.peek=function(e){h=0,t.nest((function(){e.call(this,p.store),this.tap((function(){h=null}))}))},n}));u.writable=!0;var d=s();u.write=function(t){d.push(t),l()};var p=o(),g=!1,A=!1;return u.end=function(){A=!0},u.pipe=a.prototype.pipe,Object.getOwnPropertyNames(i.prototype).forEach((function(t){u[t]=i.prototype[t]})),u},e.parse=function(t){var e=f((function(i,s){return function(o){if(r+i<=t.length){var a=t.slice(r,r+i);r+=i,n.set(o,s(a))}else n.set(o,null);return e}})),r=0,n=o();return e.vars=n.store,e.tap=function(t){return t.call(e,n.store),e},e.into=function(t,r){n.get(t)||n.set(t,{});var i=n;return n=o(i.get(t)),r.call(e,n.store),n=i,e},e.loop=function(t){for(var r=!1,i=function(){r=!0};!1===r;)t.call(e,i,n.store);return e},e.buffer=function(i,s){"string"==typeof s&&(s=n.get(s));var o=t.slice(r,Math.min(t.length,r+s));return r+=s,n.set(i,o),e},e.skip=function(t){return"string"==typeof t&&(t=n.get(t)),r+=t,e},e.scan=function(i,s){if("string"==typeof s)s=new Buffer(s);else if(!Buffer.isBuffer(s))throw new Error("search must be a Buffer or a string");n.set(i,null);for(var o=0;o+r<=t.length-s.length+1;o++){for(var a=0;a<s.length&&t[r+o+a]===s[a];a++);if(a===s.length)break}return n.set(i,t.slice(r,r+o)),r+=o+s.length,e},e.peek=function(t){var i=r;return t.call(e,n.store),r=i,e},e.flush=function(){return n.store={},e},e.eof=function(){return r>=t.length},e}},4644:t=>{t.exports=function(t){function e(t,e){var n=r.store,i=t.split(".");i.slice(0,-1).forEach((function(t){void 0===n[t]&&(n[t]={}),n=n[t]}));var s=i[i.length-1];return 1==arguments.length?n[s]:n[s]=e}var r={get:function(t){return e(t)},set:function(t,r){return e(t,r)},store:t||{}};return r}},8928:(t,e,r)=>{var n=r(8505);t.exports=function(t){return t?("{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2)),A(function(t){return t.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(o).split("\\,").join(a).split("\\.").join(c)}(t),!0).map(l)):[]};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function h(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function l(t){return t.split(i).join("\\").split(s).join("{").split(o).join("}").split(a).join(",").split(c).join(".")}function u(t){if(!t)return[""];var e=[],r=n("{","}",t);if(!r)return t.split(",");var i=r.pre,s=r.body,o=r.post,a=i.split(",");a[a.length-1]+="{"+s+"}";var c=u(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}function f(t){return"{"+t+"}"}function d(t){return/^-?0\d/.test(t)}function p(t,e){return t<=e}function g(t,e){return t>=e}function A(t,e){var r=[],i=n("{","}",t);if(!i)return[t];var s=i.pre,a=i.post.length?A(i.post,!1):[""];if(/\$$/.test(i.pre))for(var c=0;c<a.length;c++){var l=s+"{"+i.body+"}"+a[c];r.push(l)}else{var _,E,m=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),y=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),S=m||y,b=i.body.indexOf(",")>=0;if(!S&&!b)return i.post.match(/,.*\}/)?A(t=i.pre+"{"+i.body+o+i.post):[t];if(S)_=i.body.split(/\.\./);else if(1===(_=u(i.body)).length&&1===(_=A(_[0],!1).map(f)).length)return a.map((function(t){return i.pre+_[0]+t}));if(S){var w=h(_[0]),v=h(_[1]),I=Math.max(_[0].length,_[1].length),C=3==_.length?Math.abs(h(_[2])):1,k=p;v<w&&(C*=-1,k=g);var R=_.some(d);E=[];for(var B=w;k(B,v);B+=C){var O;if(y)"\\"===(O=String.fromCharCode(B))&&(O="");else if(O=String(B),R){var T=I-O.length;if(T>0){var N=new Array(T+1).join("0");O=B<0?"-"+N+O.slice(1):N+O}}E.push(O)}}else{E=[];for(var L=0;L<_.length;L++)E.push.apply(E,A(_[L],!1))}for(L=0;L<E.length;L++)for(c=0;c<a.length;c++)l=s+E[L]+a[c],(!e||S||l)&&r.push(l)}return r}},6512:t=>{function e(t){if(!(this instanceof e))return new e(t);this.buffers=t||[],this.length=this.buffers.reduce((function(t,e){return t+e.length}),0)}t.exports=e,e.prototype.push=function(){for(var t=0;t<arguments.length;t++)if(!Buffer.isBuffer(arguments[t]))throw new TypeError("Tried to push a non-buffer");for(t=0;t<arguments.length;t++){var e=arguments[t];this.buffers.push(e),this.length+=e.length}return this.length},e.prototype.unshift=function(){for(var t=0;t<arguments.length;t++)if(!Buffer.isBuffer(arguments[t]))throw new TypeError("Tried to unshift a non-buffer");for(t=0;t<arguments.length;t++){var e=arguments[t];this.buffers.unshift(e),this.length+=e.length}return this.length},e.prototype.copy=function(t,e,r,n){return this.slice(r,n).copy(t,e,0,n-r)},e.prototype.splice=function(t,r){var n=this.buffers,i=t>=0?t:this.length-t,s=[].slice.call(arguments,2);for((void 0===r||r>this.length-i)&&(r=this.length-i),t=0;t<s.length;t++)this.length+=s[t].length;for(var o=new e,a=0,c=0;c<n.length&&a+n[c].length<i;c++)a+=n[c].length;if(i-a>0){var h=i-a;if(h+r<n[c].length){o.push(n[c].slice(h,h+r));var l=n[c],u=new Buffer(h);for(t=0;t<h;t++)u[t]=l[t];var f=new Buffer(l.length-h-r);for(t=h+r;t<l.length;t++)f[t-r-h]=l[t];if(s.length>0){var d=s.slice();d.unshift(u),d.push(f),n.splice.apply(n,[c,1].concat(d)),c+=d.length,s=[]}else n.splice(c,1,u,f),c+=2}else o.push(n[c].slice(h)),n[c]=n[c].slice(0,h),c++}for(s.length>0&&(n.splice.apply(n,[c,0].concat(s)),c+=s.length);o.length<r;){var p=n[c],g=p.length,A=Math.min(g,r-o.length);A===g?(o.push(p),n.splice(c,1)):(o.push(p.slice(0,A)),n[c]=n[c].slice(A))}return this.length-=o.length,o},e.prototype.slice=function(t,e){var r=this.buffers;void 0===e&&(e=this.length),void 0===t&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=0;i<r.length&&n+r[i].length<=t;i++)n+=r[i].length;for(var s=new Buffer(e-t),o=0,a=i;o<e-t&&a<r.length;a++){var c=r[a].length,h=0===o?t-n:0,l=o+c>=e-t?Math.min(h+(e-t)-o,c):c;r[a].copy(s,o,h,l),o+=l-h}return s},e.prototype.pos=function(t){if(t<0||t>=this.length)throw new Error("oob");for(var e=t,r=0,n=null;;){if(e<(n=this.buffers[r]).length)return{buf:r,offset:e};e-=n.length,r++}},e.prototype.get=function(t){var e=this.pos(t);return this.buffers[e.buf].get(e.offset)},e.prototype.set=function(t,e){var r=this.pos(t);return this.buffers[r.buf].set(r.offset,e)},e.prototype.indexOf=function(t,e){if("string"==typeof t)t=new Buffer(t);else if(!(t instanceof Buffer))throw new Error("Invalid type for a search string");if(!t.length)return 0;if(!this.length)return-1;var r,n=0,i=0,s=0,o=0;if(e){var a=this.pos(e);n=a.buf,i=a.offset,o=e}for(;;){for(;i>=this.buffers[n].length;)if(i=0,++n>=this.buffers.length)return-1;if(this.buffers[n][i]==t[s]){if(0==s&&(r={i:n,j:i,pos:o}),++s==t.length)return r.pos}else 0!=s&&(n=r.i,i=r.j,o=r.pos,s=0);i++,o++}},e.prototype.toBuffer=function(){return this.slice()},e.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)}},7168:(t,e,r)=>{var n=r(6623),i=r(4434).EventEmitter;function s(t){var e=s.saw(t,{}),r=t.call(e.handlers,e);return void 0!==r&&(e.handlers=r),e.record(),e.chain()}t.exports=s,s.light=function(t){var e=s.saw(t,{}),r=t.call(e.handlers,e);return void 0!==r&&(e.handlers=r),e.chain()},s.saw=function(t,e){var r=new i;return r.handlers=e,r.actions=[],r.chain=function(){var t=n(r.handlers).map((function(e){if(this.isRoot)return e;var n=this.path;"function"==typeof e&&this.update((function(){return r.actions.push({path:n,args:[].slice.call(arguments)}),t}))}));return process.nextTick((function(){r.emit("begin"),r.next()})),t},r.pop=function(){return r.actions.shift()},r.next=function(){var t=r.pop();if(t){if(!t.trap){var e=r.handlers;t.path.forEach((function(t){e=e[t]})),e.apply(r.handlers,t.args)}}else r.emit("end")},r.nest=function(e){var n=[].slice.call(arguments,1),i=!0;"boolean"==typeof e&&(i=e,e=n.shift());var o=s.saw(t,{}),a=t.call(o.handlers,o);void 0!==a&&(o.handlers=a),void 0!==r.step&&o.record(),e.apply(o.chain(),n),!1!==i&&o.on("end",r.next)},r.record=function(){!function(t){t.step=0,t.pop=function(){return t.actions[t.step++]},t.trap=function(e,r){var n=Array.isArray(e)?e:[e];t.actions.push({path:n,step:t.step,cb:r,trap:!0})},t.down=function(e){var r=(Array.isArray(e)?e:[e]).join("/"),n=t.actions.slice(t.step).map((function(e){return!(e.trap&&e.step<=t.step)&&e.path.join("/")==r})).indexOf(!0);n>=0?t.step+=n:t.step=t.actions.length;var i=t.actions[t.step-1];i&&i.trap?(t.step=i.step,i.cb()):t.next()},t.jump=function(e){t.step=e,t.next()}}(r)},["trap","down","jump"].forEach((function(t){r[t]=function(){throw new Error("To use the trap, down and jump features, please call record() first to start recording actions.")}})),r}},2437:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddressError=void 0;class r extends Error{constructor(t,e){super(t),this.name="AddressError",null!==e&&(this.parseMessage=e)}}e.AddressError=r},837:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCorrect=e.isInSubnet=void 0,e.isInSubnet=function(t){return!(this.subnetMask<t.subnetMask)&&this.mask(t.subnetMask)===t.mask()},e.isCorrect=function(t){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===t&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}},9424:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.v6=e.AddressError=e.Address6=e.Address4=void 0;const o=r(2839);Object.defineProperty(e,"Address4",{enumerable:!0,get:function(){return o.Address4}});const a=r(6329);Object.defineProperty(e,"Address6",{enumerable:!0,get:function(){return a.Address6}});const c=r(2437);Object.defineProperty(e,"AddressError",{enumerable:!0,get:function(){return c.AddressError}});const h=s(r(2846));e.v6={helpers:h}},2839:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Address4=void 0;const o=s(r(837)),a=s(r(9576)),c=r(2437),h=r(9534),l=r(7604);class u{constructor(t){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=o.isCorrect(a.BITS),this.isInSubnet=o.isInSubnet,this.address=t;const e=a.RE_SUBNET_STRING.exec(t);if(e){if(this.parsedSubnet=e[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new c.AddressError("Invalid subnet mask.");t=t.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new u(t),!0}catch(t){return!1}}parse(t){const e=t.split(".");if(!t.match(a.RE_ADDRESS))throw new c.AddressError("Invalid IPv4 address.");return e}correctForm(){return this.parsedAddress.map((t=>parseInt(t,10))).join(".")}static fromHex(t){const e=t.replace(/:/g,"").padStart(8,"0"),r=[];let n;for(n=0;n<8;n+=2){const t=e.slice(n,n+2);r.push(parseInt(t,16))}return new u(r.join("."))}static fromInteger(t){return u.fromHex(t.toString(16))}static fromArpa(t){const e=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new u(e)}toHex(){return this.parsedAddress.map((t=>(0,l.sprintf)("%02x",parseInt(t,10)))).join(":")}toArray(){return this.parsedAddress.map((t=>parseInt(t,10)))}toGroup6(){const t=[];let e;for(e=0;e<a.GROUPS;e+=2){const r=(0,l.sprintf)("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push((0,l.sprintf)("%x",parseInt(r,16)))}return t.join(":")}bigInteger(){return new h.BigInteger(this.parsedAddress.map((t=>(0,l.sprintf)("%02x",parseInt(t,10)))).join(""),16)}_startAddress(){return new h.BigInteger(this.mask()+"0".repeat(a.BITS-this.subnetMask),2)}startAddress(){return u.fromBigInteger(this._startAddress())}startAddressExclusive(){const t=new h.BigInteger("1");return u.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new h.BigInteger(this.mask()+"1".repeat(a.BITS-this.subnetMask),2)}endAddress(){return u.fromBigInteger(this._endAddress())}endAddressExclusive(){const t=new h.BigInteger("1");return u.fromBigInteger(this._endAddress().subtract(t))}static fromBigInteger(t){return u.fromInteger(parseInt(t.toString(),10))}mask(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}reverseForm(t){t||(t={});const e=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?e:(0,l.sprintf)("%s.in-addr.arpa.",e)}isMulticast(){return this.isInSubnet(new u("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(a.BITS,"0")}groupForV6(){const t=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,(0,l.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))}}e.Address4=u},6329:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Address6=void 0;const o=s(r(837)),a=s(r(9576)),c=s(r(8914)),h=s(r(2846)),l=r(2839),u=r(321),f=r(2437),d=r(9534),p=r(7604);function g(t){if(!t)throw new Error("Assertion failed.")}function A(t){return(t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function _(t){return(0,p.sprintf)("%04x",parseInt(t,16))}function E(t){return 255&t}class m{constructor(t,e){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=o.isInSubnet,this.isCorrect=o.isCorrect(c.BITS),this.groups=void 0===e?c.GROUPS:e,this.address=t;const r=c.RE_SUBNET_STRING.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>c.BITS)throw new f.AddressError("Invalid subnet mask.");t=t.replace(c.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new f.AddressError("Invalid subnet mask.");const n=c.RE_ZONE_STRING.exec(t);n&&(this.zone=n[0],t=t.replace(c.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new m(t),!0}catch(t){return!1}}static fromBigInteger(t){const e=t.toString(16).padStart(32,"0"),r=[];let n;for(n=0;n<c.GROUPS;n++)r.push(e.slice(4*n,4*(n+1)));return new m(r.join(":"))}static fromURL(t){let e,r,n=null;if(-1!==t.indexOf("[")&&-1!==t.indexOf("]:")){if(r=c.RE_URL_WITH_PORT.exec(t),null===r)return{error:"failed to parse address with port",address:null,port:null};e=r[1],n=r[2]}else if(-1!==t.indexOf("/")){if(t=t.replace(/^[a-z0-9]+:\/\//,""),r=c.RE_URL.exec(t),null===r)return{error:"failed to parse address from URL",address:null,port:null};e=r[1]}else e=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new m(e),port:n}}static fromAddress4(t){const e=new l.Address4(t),r=c.BITS-(a.BITS-e.subnetMask);return new m(`::ffff:${e.correctForm()}/${r}`)}static fromArpa(t){let e=t.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==e.length)throw new f.AddressError("Invalid 'ip6.arpa' form.");const r=e.split(".").reverse();for(let t=7;t>0;t--){const e=4*t;r.splice(e,0,":")}return e=r.join(""),new m(e)}microsoftTranscription(){return(0,p.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){const e=c.BITS-this.subnetMask-Math.abs(t-c.BITS);return e<0?"0":function(t){const e=/(\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t}(new d.BigInteger("2",10).pow(e).toString(10))}_startAddress(){return new d.BigInteger(this.mask()+"0".repeat(c.BITS-this.subnetMask),2)}startAddress(){return m.fromBigInteger(this._startAddress())}startAddressExclusive(){const t=new d.BigInteger("1");return m.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new d.BigInteger(this.mask()+"1".repeat(c.BITS-this.subnetMask),2)}endAddress(){return m.fromBigInteger(this._endAddress())}endAddressExclusive(){const t=new d.BigInteger("1");return m.fromBigInteger(this._endAddress().subtract(t))}getScope(){let t=c.SCOPES[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==t&&(t="Global"),t||"Unknown"}getType(){for(const t of Object.keys(c.TYPES))if(this.isInSubnet(new m(t)))return c.TYPES[t];return"Global unicast"}getBits(t,e){return new d.BigInteger(this.getBitsBase2(t,e),2)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}getBitsBase16(t,e){const r=e-t;if(r%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,e).toString(16).padStart(r/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,c.BITS)}reverseForm(t){t||(t={});const e=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,e).reverse().join(".");return e>0?t.omitSuffix?r:(0,p.sprintf)("%s.ip6.arpa.",r):t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,e=[],r=0;const n=[];for(t=0;t<this.parsedAddress.length;t++){const e=parseInt(this.parsedAddress[t],16);0===e&&r++,0!==e&&r>0&&(r>1&&n.push([t-r,t-1]),r=0)}r>1&&n.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);const i=n.map((t=>t[1]-t[0]+1));if(n.length>0){const t=i.indexOf(Math.max(...i));e=function(t,e){const r=[],n=[];let i;for(i=0;i<t.length;i++)i<e[0]?r.push(t[i]):i>e[1]&&n.push(t[i]);return r.concat(["compact"]).concat(n)}(this.parsedAddress,n[t])}else e=this.parsedAddress;for(t=0;t<e.length;t++)"compact"!==e[t]&&(e[t]=parseInt(e[t],16).toString(16));let s=e.join(":");return s=s.replace(/^compact$/,"::"),s=s.replace(/^compact|compact$/,":"),s=s.replace(/compact/,""),s}binaryZeroPad(){return this.bigInteger().toString(2).padStart(c.BITS,"0")}parse4in6(t){const e=t.split(":"),r=e.slice(-1)[0].match(a.RE_ADDRESS);if(r){this.parsedAddress4=r[0],this.address4=new l.Address4(this.parsedAddress4);for(let e=0;e<this.address4.groups;e++)if(/^0[0-9]+/.test(this.address4.parsedAddress[e]))throw new f.AddressError("IPv4 addresses can't have leading zeroes.",t.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(A).join(".")));this.v4=!0,e[e.length-1]=this.address4.toGroup6(),t=e.join(":")}return t}parse(t){const e=(t=this.parse4in6(t)).match(c.RE_BAD_CHARACTERS);if(e)throw new f.AddressError((0,p.sprintf)("Bad character%s detected in address: %s",e.length>1?"s":"",e.join("")),t.replace(c.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));const r=t.match(c.RE_BAD_ADDRESS);if(r)throw new f.AddressError((0,p.sprintf)("Address failed regex: %s",r.join("")),t.replace(c.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let n=[];const i=t.split("::");if(2===i.length){let t=i[0].split(":"),e=i[1].split(":");1===t.length&&""===t[0]&&(t=[]),1===e.length&&""===e[0]&&(e=[]);const r=this.groups-(t.length+e.length);if(!r)throw new f.AddressError("Error parsing groups");this.elidedGroups=r,this.elisionBegin=t.length,this.elisionEnd=t.length+this.elidedGroups,n=n.concat(t);for(let t=0;t<r;t++)n.push("0");n=n.concat(e)}else{if(1!==i.length)throw new f.AddressError("Too many :: groups found");n=t.split(":"),this.elidedGroups=0}if(n=n.map((t=>(0,p.sprintf)("%x",parseInt(t,16)))),n.length!==this.groups)throw new f.AddressError("Incorrect number of groups found");return n}canonicalForm(){return this.parsedAddress.map(_).join(":")}decimal(){return this.parsedAddress.map((t=>(0,p.sprintf)("%05d",parseInt(t,16)))).join(":")}bigInteger(){return new d.BigInteger(this.parsedAddress.map(_).join(""),16)}to4(){const t=this.binaryZeroPad().split("");return l.Address4.fromHex(new d.BigInteger(t.slice(96,128).join(""),2).toString(16))}to4in6(){const t=this.to4(),e=new m(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let r="";return/:$/.test(e)||(r=":"),e+r+t.address}inspectTeredo(){const t=this.getBitsBase16(0,32),e=this.getBits(80,96).xor(new d.BigInteger("ffff",16)).toString(),r=l.Address4.fromHex(this.getBitsBase16(32,64)),n=l.Address4.fromHex(this.getBits(96,128).xor(new d.BigInteger("ffffffff",16)).toString(16)),i=this.getBits(64,80),s=this.getBitsBase2(64,80),o=i.testBit(15),a=i.testBit(14),c=i.testBit(8),h=i.testBit(9),u=new d.BigInteger(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:(0,p.sprintf)("%s:%s",t.slice(0,4),t.slice(4,8)),server4:r.address,client4:n.address,flags:s,coneNat:o,microsoft:{reserved:a,universalLocal:h,groupIndividual:c,nonce:u},udpPort:e}}inspect6to4(){const t=this.getBitsBase16(0,16),e=l.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,p.sprintf)("%s",t.slice(0,4)),gateway:e.address}}to6to4(){if(!this.is4())return null;const t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new m(t)}toByteArray(){const t=this.bigInteger().toByteArray();return 17===t.length&&0===t[0]?t.slice(1):t}toUnsignedByteArray(){return this.toByteArray().map(E)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(E))}static fromUnsignedByteArray(t){const e=new d.BigInteger("256",10);let r=new d.BigInteger("0",10),n=new d.BigInteger("1",10);for(let i=t.length-1;i>=0;i--)r=r.add(n.multiply(new d.BigInteger(t[i].toString(10),10))),n=n.multiply(e);return m.fromBigInteger(r)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new m("2001::/32"))}is6to4(){return this.isInSubnet(new m("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(t){return t=void 0===t?"":(0,p.sprintf)(":%s",t),(0,p.sprintf)("http://[%s]%s/",this.correctForm(),t)}link(t){t||(t={}),void 0===t.className&&(t.className=""),void 0===t.prefix&&(t.prefix="/#address="),void 0===t.v4&&(t.v4=!1);let e=this.correctForm;return t.v4&&(e=this.to4in6),t.className?(0,p.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,e.call(this),t.className):(0,p.sprintf)('<a href="%1$s%2$s">%2$s</a>',t.prefix,e.call(this))}group(){if(0===this.elidedGroups)return h.simpleGroup(this.address).join(":");g("number"==typeof this.elidedGroups),g("number"==typeof this.elisionBegin);const t=[],[e,r]=this.address.split("::");e.length?t.push(...h.simpleGroup(e)):t.push("");const n=["hover-group"];for(let t=this.elisionBegin;t<this.elisionBegin+this.elidedGroups;t++)n.push((0,p.sprintf)("group-%d",t));return t.push((0,p.sprintf)('<span class="%s"></span>',n.join(" "))),r.length?t.push(...h.simpleGroup(r,this.elisionEnd)):t.push(""),this.is4()&&(g(this.address4 instanceof l.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let e=[];const r=new m(this.correctForm());if(0===r.elidedGroups)e.push((0,u.simpleRegularExpression)(r.parsedAddress));else if(r.elidedGroups===c.GROUPS)e.push((0,u.possibleElisions)(c.GROUPS));else{const t=r.address.split("::");t[0].length&&e.push((0,u.simpleRegularExpression)(t[0].split(":"))),g("number"==typeof r.elidedGroups),e.push((0,u.possibleElisions)(r.elidedGroups,0!==t[0].length,0!==t[1].length)),t[1].length&&e.push((0,u.simpleRegularExpression)(t[1].split(":"))),e=[e.join(":")]}return t||(e=["(?=^|",u.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...e,")(?=[^\\w\\:]|",u.ADDRESS_BOUNDARY,"|$)"]),e.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}}e.Address6=m},9576:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_SUBNET_STRING=e.RE_ADDRESS=e.GROUPS=e.BITS=void 0,e.BITS=32,e.GROUPS=4,e.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,e.RE_SUBNET_STRING=/\/\d{1,2}$/},8914:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_URL_WITH_PORT=e.RE_URL=e.RE_ZONE_STRING=e.RE_SUBNET_STRING=e.RE_BAD_ADDRESS=e.RE_BAD_CHARACTERS=e.TYPES=e.SCOPES=e.GROUPS=e.BITS=void 0,e.BITS=128,e.GROUPS=8,e.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},e.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},e.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,e.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,e.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,e.RE_ZONE_STRING=/%.*$/,e.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),e.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)},2846:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleGroup=e.spanLeadingZeroes=e.spanAll=e.spanAllZeroes=void 0;const n=r(7604);function i(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function s(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}e.spanAllZeroes=i,e.spanAll=function(t,e=0){return t.split("").map(((t,r)=>(0,n.sprintf)('<span class="digit value-%s position-%d">%s</span>',t,r+e,i(t)))).join("")},e.spanLeadingZeroes=function(t){return t.split(":").map((t=>s(t))).join(":")},e.simpleGroup=function(t,e=0){return t.split(":").map(((t,r)=>/group-v4/.test(t)?t:(0,n.sprintf)('<span class="hover-group group-%d">%s</span>',r+e,s(t))))}},321:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.possibleElisions=e.simpleRegularExpression=e.ADDRESS_BOUNDARY=e.padGroup=e.groupPossibilities=void 0;const o=s(r(8914)),a=r(7604);function c(t){return(0,a.sprintf)("(%s)",t.join("|"))}function h(t){return t.length<4?(0,a.sprintf)("0{0,%d}%s",4-t.length,t):t}e.groupPossibilities=c,e.padGroup=h,e.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]",e.simpleRegularExpression=function(t){const e=[];t.forEach(((t,r)=>{0===parseInt(t,16)&&e.push(r)}));const r=e.map((e=>t.map(((t,r)=>{if(r===e){const e=0===r||r===o.GROUPS-1?":":"";return c([h(t),e])}return h(t)})).join(":")));return r.push(t.map(h).join(":")),c(r)},e.possibleElisions=function(t,e,r){const n=e?"":":",i=r?"":":",s=[];e||r||s.push("::"),e&&r&&s.push(""),(r&&!e||!r&&e)&&s.push(":"),s.push((0,a.sprintf)("%s(:0{1,4}){1,%d}",n,t-1)),s.push((0,a.sprintf)("(0{1,4}:){1,%d}%s",t-1,i)),s.push((0,a.sprintf)("(0{1,4}:){%d}0{1,4}",t-1));for(let e=1;e<t-1;e++)for(let r=1;r<t-e;r++)s.push((0,a.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",r,t-r-e-1));return c(s)}},9534:function(t,e){(function(){var e;function r(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new r(null)}var i="undefined"!=typeof navigator;i&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(t,e,r,n,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var c=32767&this[t],h=this[t++]>>15,l=a*c+h*o;i=((c=o*c+((32767&l)<<15)+r[n]+(1073741823&i))>>>30)+(l>>>15)+a*h+(i>>>30),r[n++]=1073741823&c}return i},e=30):i&&"Netscape"!=navigator.appName?(r.prototype.am=function(t,e,r,n,i,s){for(;--s>=0;){var o=e*this[t++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i},e=26):(r.prototype.am=function(t,e,r,n,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var c=16383&this[t],h=this[t++]>>14,l=a*c+h*o;i=((c=o*c+((16383&l)<<14)+r[n]+i)>>28)+(l>>14)+a*h,r[n++]=268435455&c}return i},e=28),r.prototype.DB=e,r.prototype.DM=(1<<e)-1,r.prototype.DV=1<<e,r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-e,r.prototype.F2=2*e-52;var s,o,a=new Array;for(s="0".charCodeAt(0),o=0;o<=9;++o)a[s++]=o;for(s="a".charCodeAt(0),o=10;o<36;++o)a[s++]=o;for(s="A".charCodeAt(0),o=10;o<36;++o)a[s++]=o;function c(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function h(t,e){var r=a[t.charCodeAt(e)];return null==r?-1:r}function l(t){var e=n();return e.fromInt(t),e}function u(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function f(t){this.m=t}function d(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function p(t,e){return t&e}function g(t,e){return t|e}function A(t,e){return t^e}function _(t,e){return t&~e}function E(t){if(0==t)return-1;var e=0;return 65535&t||(t>>=16,e+=16),255&t||(t>>=8,e+=8),15&t||(t>>=4,e+=4),3&t||(t>>=2,e+=2),1&t||++e,e}function m(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function y(){}function S(t){return t}function b(t){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}f.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},f.prototype.revert=function(t){return t},f.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},f.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},f.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},d.prototype.convert=function(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e},d.prototype.revert=function(t){var e=n();return t.copyTo(e),this.reduce(e),e},d.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},d.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},r.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},r.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},r.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,s=!1,o=0;--i>=0;){var a=8==n?255&t[i]:h(t,i);a<0?"-"==t.charAt(i)&&(s=!0):(s=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&128&t[0]&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},r.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},r.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},r.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+o+1]=this[r]>>i|a,a=(this[r]&s)<<n;for(r=o-1;r>=0;--r)e[r]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},r.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<i,e[o-r]=this[o]>>n;n>0&&(e[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}},r.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},r.prototype.multiplyTo=function(t,e){var n=this.abs(),i=t.abs(),s=n.t;for(e.t=s+i.t;--s>=0;)e[s]=0;for(s=0;s<i.t;++s)e[s+n.t]=n.am(0,i[s],e,s,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)},r.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},r.prototype.divRemTo=function(t,e,i){var s=t.abs();if(!(s.t<=0)){var o=this.abs();if(o.t<s.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),c=this.s,h=t.s,l=this.DB-u(s[s.t-1]);l>0?(s.lShiftTo(l,a),o.lShiftTo(l,i)):(s.copyTo(a),o.copyTo(i));var f=a.t,d=a[f-1];if(0!=d){var p=d*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),g=this.FV/p,A=(1<<this.F1)/p,_=1<<this.F2,E=i.t,m=E-f,y=null==e?n():e;for(a.dlShiftTo(m,y),i.compareTo(y)>=0&&(i[i.t++]=1,i.subTo(y,i)),r.ONE.dlShiftTo(f,y),y.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--m>=0;){var S=i[--E]==d?this.DM:Math.floor(i[E]*g+(i[E-1]+_)*A);if((i[E]+=a.am(0,S,i,m,0,f))<S)for(a.dlShiftTo(m,y),i.subTo(y,i);i[E]<--S;)i.subTo(y,i)}null!=e&&(i.drShiftTo(f,e),c!=h&&r.ZERO.subTo(e,e)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),c<0&&r.ZERO.subTo(i,i)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(!(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},r.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(t,e){if(t>4294967295||t<1)return r.ONE;var i=n(),s=n(),o=e.convert(this),a=u(t)-1;for(o.copyTo(i);--a>=0;)if(e.sqrTo(i,s),(t&1<<a)>0)e.mulTo(s,o,i);else{var c=i;i=s,s=c}return e.revert(i)},r.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(r=this[o]>>a)>0&&(i=!0,s=c(r));o>=0;)a<e?(r=(this[o]&(1<<a)-1)<<e-a,r|=this[--o]>>(a+=this.DB-e)):(r=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=c(r));return i?s:"0"},r.prototype.negate=function(){var t=n();return r.ZERO.subTo(this,t),t},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e},r.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new f(e):new d(e),this.exp(t,r)},r.ZERO=l(0),r.ONE=l(1),y.prototype.convert=S,y.prototype.revert=S,y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},y.prototype.sqrTo=function(t,e){t.squareTo(e)},b.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e},b.prototype.revert=function(t){return t},b.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},b.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},b.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var w,v,I,C=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],k=(1<<26)/C[C.length-1];function R(){var t;t=(new Date).getTime(),v[I++]^=255&t,v[I++]^=t>>8&255,v[I++]^=t>>16&255,v[I++]^=t>>24&255,I>=x&&(I-=x)}if(r.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},r.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=l(r),s=n(),o=n(),a="";for(this.divRemTo(i,s,o);s.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,s.divRemTo(i,s,o);return o.intValue().toString(t)+a},r.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),s=!1,o=0,a=0,c=0;c<t.length;++c){var l=h(t,c);l<0?"-"==t.charAt(c)&&0==this.signum()&&(s=!0):(a=e*a+l,++o>=n&&(this.dMultiply(i),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),s&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this);else{var i=new Array,s=7&t;i.length=1+(t>>3),e.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},r.prototype.bitwiseTo=function(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},r.prototype.changeBit=function(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},r.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},r.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},r.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},r.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},r.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},r.prototype.millerRabin=function(t){var e=this.subtract(r.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var s=e.shiftRight(i);(t=t+1>>1)>C.length&&(t=C.length);for(var o=n(),a=0;a<t;++a){o.fromInt(C[Math.floor(Math.random()*C.length)]);var c=o.modPow(s,this);if(0!=c.compareTo(r.ONE)&&0!=c.compareTo(e)){for(var h=1;h++<i&&0!=c.compareTo(e);)if(0==(c=c.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=c.compareTo(e))return!1}}return!0},r.prototype.clone=function(){var t=n();return this.copyTo(t),t},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),128&r&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},r.prototype.equals=function(t){return 0==this.compareTo(t)},r.prototype.min=function(t){return this.compareTo(t)<0?this:t},r.prototype.max=function(t){return this.compareTo(t)>0?this:t},r.prototype.and=function(t){var e=n();return this.bitwiseTo(t,p,e),e},r.prototype.or=function(t){var e=n();return this.bitwiseTo(t,g,e),e},r.prototype.xor=function(t){var e=n();return this.bitwiseTo(t,A,e),e},r.prototype.andNot=function(t){var e=n();return this.bitwiseTo(t,_,e),e},r.prototype.not=function(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},r.prototype.shiftLeft=function(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},r.prototype.shiftRight=function(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},r.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+E(this[t]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=m(this[r]^e);return t},r.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:!!(this[e]&1<<t%this.DB)},r.prototype.setBit=function(t){return this.changeBit(t,g)},r.prototype.clearBit=function(t){return this.changeBit(t,_)},r.prototype.flipBit=function(t){return this.changeBit(t,A)},r.prototype.add=function(t){var e=n();return this.addTo(t,e),e},r.prototype.subtract=function(t){var e=n();return this.subTo(t,e),e},r.prototype.multiply=function(t){var e=n();return this.multiplyTo(t,e),e},r.prototype.divide=function(t){var e=n();return this.divRemTo(t,e,null),e},r.prototype.remainder=function(t){var e=n();return this.divRemTo(t,null,e),e},r.prototype.divideAndRemainder=function(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)},r.prototype.modPow=function(t,e){var r,i,s=t.bitLength(),o=l(1);if(s<=0)return o;r=s<18?1:s<48?3:s<144?4:s<768?5:6,i=s<8?new f(e):e.isEven()?new b(e):new d(e);var a=new Array,c=3,h=r-1,p=(1<<r)-1;if(a[1]=i.convert(this),r>1){var g=n();for(i.sqrTo(a[1],g);c<=p;)a[c]=n(),i.mulTo(g,a[c-2],a[c]),c+=2}var A,_,E=t.t-1,m=!0,y=n();for(s=u(t[E])-1;E>=0;){for(s>=h?A=t[E]>>s-h&p:(A=(t[E]&(1<<s+1)-1)<<h-s,E>0&&(A|=t[E-1]>>this.DB+s-h)),c=r;!(1&A);)A>>=1,--c;if((s-=c)<0&&(s+=this.DB,--E),m)a[A].copyTo(o),m=!1;else{for(;c>1;)i.sqrTo(o,y),i.sqrTo(y,o),c-=2;c>0?i.sqrTo(o,y):(_=o,o=y,y=_),i.mulTo(y,a[A],o)}for(;E>=0&&!(t[E]&1<<s);)i.sqrTo(o,y),_=o,o=y,y=_,--s<0&&(s=this.DB-1,--E)}return i.revert(o)},r.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var n=t.clone(),i=this.clone(),s=l(1),o=l(0),a=l(0),c=l(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),e?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),e&&s.subTo(a,s),o.subTo(c,o)):(i.subTo(n,i),e&&a.subTo(s,a),c.subTo(o,c))}return 0!=i.compareTo(r.ONE)?r.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},r.prototype.pow=function(t){return this.exp(t,new y)},r.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},r.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=C[C.length-1]){for(e=0;e<C.length;++e)if(r[0]==C[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<C.length;){for(var n=C[e],i=e+1;i<C.length&&n<k;)n*=C[i++];for(n=r.modInt(n);e<i;)if(n%C[e++]==0)return!1}return r.millerRabin(t)},r.prototype.square=function(){var t=n();return this.squareTo(t),t},r.prototype.Barrett=b,null==v){var B;if(v=new Array,I=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var O=new Uint8Array(32);for(window.crypto.getRandomValues(O),B=0;B<32;++B)v[I++]=O[B]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var T=window.crypto.random(32);for(B=0;B<T.length;++B)v[I++]=255&T.charCodeAt(B)}for(;I<x;)B=Math.floor(65536*Math.random()),v[I++]=B>>>8,v[I++]=255&B;I=0,R()}function N(){if(null==w){for(R(),(w=new P).init(v),I=0;I<v.length;++I)v[I]=0;I=0}return w.next()}function L(){}function P(){this.i=0,this.j=0,this.S=new Array}L.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=N()},P.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},P.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var x=256;t.exports={default:r,BigInteger:r,SecureRandom:L}}).call(this)},4774:(t,e,r)=>{"use strict";var n,i=r(181),s=i.Buffer,o={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(o[n]=i[n]);var a=o.Buffer={};for(n in s)s.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=s[n]);if(o.Buffer.prototype=s.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return s(t,e,r)}),a.alloc||(a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=s(t);return e&&0!==e.length?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!o.kStringMaxLength)try{o.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(t){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),t.exports=o},7277:(t,e)=>{"use strict";e.RFC_1928_ATYP={DOMAINNAME:3,IPV4:1,IPV6:4},e.RFC_1928_COMMANDS={BIND:2,CONNECT:1,UDP_ASSOCIATE:3},e.RFC_1928_METHODS={BASIC_AUTHENTICATION:2,GSSAPI:1,NO_ACCEPTABLE_METHODS:255,NO_AUTHENTICATION_REQUIRED:0},e.RFC_1928_REPLIES={ADDRESS_TYPE_NOT_SUPPORTED:8,COMMAND_NOT_SUPPORTED:7,CONNECTION_NOT_ALLOWED:2,CONNECTION_REFUSED:5,GENERAL_FAILURE:1,HOST_UNREACHABLE:4,NETWORK_UNREACHABLE:3,SUCCEEDED:0,TTL_EXPIRED:6},e.RFC_1928_VERSION=5,e.RFC_1929_REPLIES={GENERAL_FAILURE:255,SUCCEEDED:0},e.RFC_1929_VERSION=1},9758:(t,e,r)=>{"use strict";var n=r(5946),i=n(r(8979)),s=n(r(6226)),o=n(r(7189)),a=n(r(3363)),c=n(r(385)),h=n(r(4007)),l=n(r(3563)),u=n(r(271)),f=r(7277),d=n(r(6892)),p=n(r(3167)),g=n(r(9278)),A={AUTHENTICATION:"authenticate",AUTHENTICATION_ERROR:"authenticateError",CONNECTION_FILTER:"connectionFilter",HANDSHAKE:"handshake",PROXY_CONNECT:"proxyConnect",PROXY_DATA:"proxyData",PROXY_DISCONNECT:"proxyDisconnect",PROXY_END:"proxyEnd",PROXY_ERROR:"proxyError"},_=(0,l.default)((function t(e){(0,u.default)(this,t);var r=this;this.activeSessions=[],this.options=e||{},this.server=g.default.createServer((function(t){function e(e){var i=p.default.create();d.default.stream(e).word8("ver").word8("ulen").buffer("uname","ulen").word8("plen").buffer("passwd","plen").tap((function(s){if(s.requestBuffer=e,s.ver!==f.RFC_1929_VERSION)return l(f.RFC_1929_REPLIES.GENERAL_FAILURE,s);i.on("error",(function(t){return r.server.emit(A.AUTHENTICATION_ERROR,s.uname.toString(),t),l(f.RFC_1929_REPLIES.GENERAL_FAILURE,s)})),r.options.authenticate(s.uname.toString(),s.passwd.toString(),t,i.intercept((function(){r.server.emit(A.AUTHENTICATION,s.uname.toString());var e=Buffer.allocUnsafe(2);e[0]=f.RFC_1929_VERSION,e[1]=f.RFC_1929_REPLIES.SUCCEEDED,t.write(e,(function(){t.once("data",n)}))})))}))}function n(e){var n=d.default.stream(e);n.word8("ver").word8("cmd").word8("rsv").word8("atyp").tap((function(o){if(o.requestBuffer=e,o.ver!==f.RFC_1928_VERSION)return l(f.RFC_1928_REPLIES.GENERAL_FAILURE,o);if(r.activeSessions.push(t),o.dst={},o.atyp===f.RFC_1928_ATYP.IPV4)n.buffer("addr.buf",4).tap((function(t){t.dst.addr=(0,i.default)([]).call(t.addr.buf).join(".")}));else if(o.atyp===f.RFC_1928_ATYP.DOMAINNAME)n.word8("addr.size").buffer("addr.buf","addr.size").tap((function(t){t.dst.addr=t.addr.buf.toString()}));else{if(o.atyp!==f.RFC_1928_ATYP.IPV6)return l(f.RFC_1928_REPLIES.ADDRESS_TYPE_NOT_SUPPORTED,o);n.word32be("addr.a").word32be("addr.b").word32be("addr.c").word32be("addr.d").tap((function(t){var e;t.dst.addr=[],(0,s.default)(e=["a","b","c","d"]).call(e,(function(e){e=t.addr[e],t.dst.addr.push((e>>>16).toString(16)),t.dst.addr.push((65535&e).toString(16))})),t.dst.addr=t.dst.addr.join(":")}))}})).word16bu("dst.port").tap((function(e){if(e.cmd===f.RFC_1928_COMMANDS.CONNECT){var n=r.options.connectionFilter,i=p.default.create();return n&&"function"==typeof n||(n=function(t,e,r){return(0,o.default)(r)}),i.on("error",(function(n){return r.server.emit(A.CONNECTION_FILTER,{address:e.dst.addr,port:e.dst.port},{address:t.remoteAddress,port:t.remotePort},n),l(f.RFC_1929_REPLIES.CONNECTION_NOT_ALLOWED,e)})),n({address:e.dst.addr,port:e.dst.port},{address:t.remoteAddress,port:t.remotePort},i.intercept((function(n){var s=function(r){var n=Buffer.alloc(e.requestBuffer.length);e.requestBuffer.copy(n),n[1]=f.RFC_1928_REPLIES.SUCCEEDED,t.write(n,(function(){r.pipe(t),t.pipe(r)}))},o={address:e.dst.addr,port:e.dst.port},a={address:t.remoteAddress,port:t.remotePort};n?(i.exit(),s(n),n.on("close",(function(t){r.server.emit(A.PROXY_DISCONNECT,a,o,t)})),n.on("error",(function(t){return t.addr=e.dst.addr,t.atyp=e.atyp,t.port=e.dst.port,r.server.emit(A.PROXY_ERROR,t),l(f.RFC_1928_REPLIES.NETWORK_UNREACHABLE,e)}))):((n=g.default.createConnection(e.dst.port,e.dst.addr,(function(){return s(n)}))).on("connect",(function(){r.server.emit(A.PROXY_CONNECT,o,n),n.on("data",(function(t){r.server.emit(A.PROXY_DATA,t)})),n.on("close",(function(t){r.server.emit(A.PROXY_DISCONNECT,a,o,t)})),i.exit()})),n.on("error",(function(t){return i.exit(),t.addr=e.dst.addr,t.atyp=e.atyp,t.port=e.dst.port,r.server.emit(A.PROXY_ERROR,t),t.code&&"EADDRNOTAVAIL"===t.code?l(f.RFC_1928_REPLIES.HOST_UNREACHABLE,e):t.code&&"ECONNREFUSED"===t.code?l(f.RFC_1928_REPLIES.CONNECTION_REFUSED,e):l(f.RFC_1928_REPLIES.NETWORK_UNREACHABLE,e)})))})))}return l(f.RFC_1928_REPLIES.SUCCEEDED,e)}))}function l(e,n){var i=n.requestBuffer||Buffer.allocUnsafe(2);n.requestBuffer||(i[0]=f.RFC_1928_VERSION),i[1]=e;try{t.end(i)}catch(e){t.destroy()}r.server.emit(A.PROXY_END,e,n)}t.on("error",(function(t){r.server.emit(A.PROXY_ERROR,t)})),t.once("data",(function(s){d.default.stream(s).word8("ver").word8("nmethods").buffer("methods","nmethods").tap((function(s){var o;if(s.ver!==f.RFC_1928_VERSION)return l(f.RFC_1928_REPLIES.GENERAL_FAILURE,s);var c=(0,a.default)(o=(0,i.default)([]).call(s.methods)).call(o,(function(t,e){return t[e]=!0,t}),{}),h="function"==typeof r.options.authenticate,u=n,d=!h&&void 0!==c[0]&&c[0],p=Buffer.allocUnsafe(2);if(p[0]=f.RFC_1928_VERSION,p[1]=f.RFC_1928_METHODS.NO_AUTHENTICATION_REQUIRED,h)p[1]=f.RFC_1928_METHODS.BASIC_AUTHENTICATION,u=e;else{if(h||!d)return l(f.RFC_1928_METHODS.NO_ACCEPTABLE_METHODS,s);p[1]=f.RFC_1928_METHODS.NO_AUTHENTICATION_REQUIRED,u=n}t.write(p,(function(){r.server.emit(A.HANDSHAKE,t),t.once("data",u)}))}))})),t.once("end",(function(){var e,n;(0,c.default)(e=r.activeSessions).call(e,(0,h.default)(n=r.activeSessions).call(n,t),1)}))}))}));e.createServer=function(t){return new _(t).server},e.events=A,e.SocksServer=_},7575:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1725);class i{constructor(t){if(this.length=0,this._encoding="utf8",this._writeOffset=0,this._readOffset=0,i.isSmartBufferOptions(t))if(t.encoding&&(n.checkEncoding(t.encoding),this._encoding=t.encoding),t.size){if(!(n.isFiniteInteger(t.size)&&t.size>0))throw new Error(n.ERRORS.INVALID_SMARTBUFFER_SIZE);this._buff=Buffer.allocUnsafe(t.size)}else if(t.buff){if(!Buffer.isBuffer(t.buff))throw new Error(n.ERRORS.INVALID_SMARTBUFFER_BUFFER);this._buff=t.buff,this.length=t.buff.length}else this._buff=Buffer.allocUnsafe(4096);else{if(void 0!==t)throw new Error(n.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(4096)}}static fromSize(t,e){return new this({size:t,encoding:e})}static fromBuffer(t,e){return new this({buff:t,encoding:e})}static fromOptions(t){return new this(t)}static isSmartBufferOptions(t){const e=t;return e&&(void 0!==e.encoding||void 0!==e.size||void 0!==e.buff)}readInt8(t){return this._readNumberValue(Buffer.prototype.readInt8,1,t)}readInt16BE(t){return this._readNumberValue(Buffer.prototype.readInt16BE,2,t)}readInt16LE(t){return this._readNumberValue(Buffer.prototype.readInt16LE,2,t)}readInt32BE(t){return this._readNumberValue(Buffer.prototype.readInt32BE,4,t)}readInt32LE(t){return this._readNumberValue(Buffer.prototype.readInt32LE,4,t)}readBigInt64BE(t){return n.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,t)}readBigInt64LE(t){return n.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,t)}writeInt8(t,e){return this._writeNumberValue(Buffer.prototype.writeInt8,1,t,e),this}insertInt8(t,e){return this._insertNumberValue(Buffer.prototype.writeInt8,1,t,e)}writeInt16BE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,t,e)}insertInt16BE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,t,e)}writeInt16LE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,t,e)}insertInt16LE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,t,e)}writeInt32BE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,t,e)}insertInt32BE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,t,e)}writeInt32LE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,t,e)}insertInt32LE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,t,e)}writeBigInt64BE(t,e){return n.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,t,e)}insertBigInt64BE(t,e){return n.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,t,e)}writeBigInt64LE(t,e){return n.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,t,e)}insertBigInt64LE(t,e){return n.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,t,e)}readUInt8(t){return this._readNumberValue(Buffer.prototype.readUInt8,1,t)}readUInt16BE(t){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,t)}readUInt16LE(t){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,t)}readUInt32BE(t){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,t)}readUInt32LE(t){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,t)}readBigUInt64BE(t){return n.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,t)}readBigUInt64LE(t){return n.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,t)}writeUInt8(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,t,e)}insertUInt8(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,t,e)}writeUInt16BE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,t,e)}insertUInt16BE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,t,e)}writeUInt16LE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,t,e)}insertUInt16LE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,t,e)}writeUInt32BE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,t,e)}insertUInt32BE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,t,e)}writeUInt32LE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,t,e)}insertUInt32LE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,t,e)}writeBigUInt64BE(t,e){return n.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,t,e)}insertBigUInt64BE(t,e){return n.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,t,e)}writeBigUInt64LE(t,e){return n.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,t,e)}insertBigUInt64LE(t,e){return n.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,t,e)}readFloatBE(t){return this._readNumberValue(Buffer.prototype.readFloatBE,4,t)}readFloatLE(t){return this._readNumberValue(Buffer.prototype.readFloatLE,4,t)}writeFloatBE(t,e){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,t,e)}insertFloatBE(t,e){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,t,e)}writeFloatLE(t,e){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,t,e)}insertFloatLE(t,e){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,t,e)}readDoubleBE(t){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,t)}readDoubleLE(t){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,t)}writeDoubleBE(t,e){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,t,e)}insertDoubleBE(t,e){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,t,e)}writeDoubleLE(t,e){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,t,e)}insertDoubleLE(t,e){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,t,e)}readString(t,e){let r;"number"==typeof t?(n.checkLengthValue(t),r=Math.min(t,this.length-this._readOffset)):(e=t,r=this.length-this._readOffset),void 0!==e&&n.checkEncoding(e);const i=this._buff.slice(this._readOffset,this._readOffset+r).toString(e||this._encoding);return this._readOffset+=r,i}insertString(t,e,r){return n.checkOffsetValue(e),this._handleString(t,!0,e,r)}writeString(t,e,r){return this._handleString(t,!1,e,r)}readStringNT(t){void 0!==t&&n.checkEncoding(t);let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}const r=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,r.toString(t||this._encoding)}insertStringNT(t,e,r){return n.checkOffsetValue(e),this.insertString(t,e,r),this.insertUInt8(0,e+t.length),this}writeStringNT(t,e,r){return this.writeString(t,e,r),this.writeUInt8(0,"number"==typeof e?e+t.length:this.writeOffset),this}readBuffer(t){void 0!==t&&n.checkLengthValue(t);const e="number"==typeof t?t:this.length,r=Math.min(this.length,this._readOffset+e),i=this._buff.slice(this._readOffset,r);return this._readOffset=r,i}insertBuffer(t,e){return n.checkOffsetValue(e),this._handleBuffer(t,!0,e)}writeBuffer(t,e){return this._handleBuffer(t,!1,e)}readBufferNT(){let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}const e=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,e}insertBufferNT(t,e){return n.checkOffsetValue(e),this.insertBuffer(t,e),this.insertUInt8(0,e+t.length),this}writeBufferNT(t,e){return void 0!==e&&n.checkOffsetValue(e),this.writeBuffer(t,e),this.writeUInt8(0,"number"==typeof e?e+t.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(t){n.checkOffsetValue(t),n.checkTargetOffset(t,this),this._readOffset=t}get writeOffset(){return this._writeOffset}set writeOffset(t){n.checkOffsetValue(t),n.checkTargetOffset(t,this),this._writeOffset=t}get encoding(){return this._encoding}set encoding(t){n.checkEncoding(t),this._encoding=t}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(t){const e="string"==typeof t?t:this._encoding;return n.checkEncoding(e),this._buff.toString(e,0,this.length)}destroy(){return this.clear(),this}_handleString(t,e,r,i){let s=this._writeOffset,o=this._encoding;"number"==typeof r?s=r:"string"==typeof r&&(n.checkEncoding(r),o=r),"string"==typeof i&&(n.checkEncoding(i),o=i);const a=Buffer.byteLength(t,o);return e?this.ensureInsertable(a,s):this._ensureWriteable(a,s),this._buff.write(t,s,a,o),e?this._writeOffset+=a:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,s+a):this._writeOffset+=a,this}_handleBuffer(t,e,r){const n="number"==typeof r?r:this._writeOffset;return e?this.ensureInsertable(t.length,n):this._ensureWriteable(t.length,n),t.copy(this._buff,n),e?this._writeOffset+=t.length:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,n+t.length):this._writeOffset+=t.length,this}ensureReadable(t,e){let r=this._readOffset;if(void 0!==e&&(n.checkOffsetValue(e),r=e),r<0||r+t>this.length)throw new Error(n.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(t,e){n.checkOffsetValue(e),this._ensureCapacity(this.length+t),e<this.length&&this._buff.copy(this._buff,e+t,e,this._buff.length),e+t>this.length?this.length=e+t:this.length+=t}_ensureWriteable(t,e){const r="number"==typeof e?e:this._writeOffset;this._ensureCapacity(r+t),r+t>this.length&&(this.length=r+t)}_ensureCapacity(t){const e=this._buff.length;if(t>e){let r=this._buff,n=3*e/2+1;n<t&&(n=t),this._buff=Buffer.allocUnsafe(n),r.copy(this._buff,0,0,e)}}_readNumberValue(t,e,r){this.ensureReadable(e,r);const n=t.call(this._buff,"number"==typeof r?r:this._readOffset);return void 0===r&&(this._readOffset+=e),n}_insertNumberValue(t,e,r,i){return n.checkOffsetValue(i),this.ensureInsertable(e,i),t.call(this._buff,r,i),this._writeOffset+=e,this}_writeNumberValue(t,e,r,i){if("number"==typeof i){if(i<0)throw new Error(n.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);n.checkOffsetValue(i)}const s="number"==typeof i?i:this._writeOffset;return this._ensureWriteable(e,s),t.call(this._buff,r,s),"number"==typeof i?this._writeOffset=Math.max(this._writeOffset,s+e):this._writeOffset+=e,this}}e.SmartBuffer=i},1725:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(181),i={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function s(t){return"number"==typeof t&&isFinite(t)&&function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}(t)}function o(t,e){if("number"!=typeof t)throw new Error(e?i.INVALID_OFFSET_NON_NUMBER:i.INVALID_LENGTH_NON_NUMBER);if(!s(t)||t<0)throw new Error(e?i.INVALID_OFFSET:i.INVALID_LENGTH)}e.ERRORS=i,e.checkEncoding=function(t){if(!n.Buffer.isEncoding(t))throw new Error(i.INVALID_ENCODING)},e.isFiniteInteger=s,e.checkLengthValue=function(t){o(t,!1)},e.checkOffsetValue=function(t){o(t,!0)},e.checkTargetOffset=function(t,e){if(t<0||t>e.length)throw new Error(i.INVALID_TARGET_OFFSET)},e.bigIntAndBufferInt64Check=function(t){if("undefined"==typeof BigInt)throw new Error("Platform does not support JS BigInt type.");if(void 0===n.Buffer.prototype[t])throw new Error(`Platform does not support Buffer.prototype.${t}.`)}},7631:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SocksClientError=e.SocksClient=void 0;const i=r(4434),s=r(9278),o=r(7575),a=r(5438),c=r(7130),h=r(7736),l=r(3763);Object.defineProperty(e,"SocksClientError",{enumerable:!0,get:function(){return l.SocksClientError}});const u=r(9424);class f extends i.EventEmitter{constructor(t){super(),this.options=Object.assign({},t),(0,c.validateSocksClientOptions)(t),this.setState(a.SocksClientState.Created)}static createConnection(t,e){return new Promise(((r,n)=>{try{(0,c.validateSocksClientOptions)(t,["connect"])}catch(t){return"function"==typeof e?(e(t),r(t)):n(t)}const i=new f(t);i.connect(t.existing_socket),i.once("established",(t=>{i.removeAllListeners(),"function"==typeof e?(e(null,t),r(t)):r(t)})),i.once("error",(t=>{i.removeAllListeners(),"function"==typeof e?(e(t),r(t)):n(t)}))}))}static createConnectionChain(t,e){return new Promise(((r,i)=>n(this,void 0,void 0,(function*(){try{(0,c.validateSocksClientChainOptions)(t)}catch(t){return"function"==typeof e?(e(t),r(t)):i(t)}t.randomizeChain&&(0,l.shuffleArray)(t.proxies);try{let n;for(let e=0;e<t.proxies.length;e++){const r=t.proxies[e],i=e===t.proxies.length-1?t.destination:{host:t.proxies[e+1].host||t.proxies[e+1].ipaddress,port:t.proxies[e+1].port},s=yield f.createConnection({command:"connect",proxy:r,destination:i,existing_socket:n});n=n||s.socket}"function"==typeof e?(e(null,{socket:n}),r({socket:n})):r({socket:n})}catch(t){"function"==typeof e?(e(t),r(t)):i(t)}}))))}static createUDPFrame(t){const e=new o.SmartBuffer;return e.writeUInt16BE(0),e.writeUInt8(t.frameNumber||0),s.isIPv4(t.remoteHost.host)?(e.writeUInt8(a.Socks5HostType.IPv4),e.writeUInt32BE((0,c.ipv4ToInt32)(t.remoteHost.host))):s.isIPv6(t.remoteHost.host)?(e.writeUInt8(a.Socks5HostType.IPv6),e.writeBuffer((0,c.ipToBuffer)(t.remoteHost.host))):(e.writeUInt8(a.Socks5HostType.Hostname),e.writeUInt8(Buffer.byteLength(t.remoteHost.host)),e.writeString(t.remoteHost.host)),e.writeUInt16BE(t.remoteHost.port),e.writeBuffer(t.data),e.toBuffer()}static parseUDPFrame(t){const e=o.SmartBuffer.fromBuffer(t);e.readOffset=2;const r=e.readUInt8(),n=e.readUInt8();let i;return i=n===a.Socks5HostType.IPv4?(0,c.int32ToIpv4)(e.readUInt32BE()):n===a.Socks5HostType.IPv6?u.Address6.fromByteArray(Array.from(e.readBuffer(16))).canonicalForm():e.readString(e.readUInt8()),{frameNumber:r,remoteHost:{host:i,port:e.readUInt16BE()},data:e.readBuffer()}}setState(t){this.state!==a.SocksClientState.Error&&(this.state=t)}connect(t){this.onDataReceived=t=>this.onDataReceivedHandler(t),this.onClose=()=>this.onCloseHandler(),this.onError=t=>this.onErrorHandler(t),this.onConnect=()=>this.onConnectHandler();const e=setTimeout((()=>this.onEstablishedTimeout()),this.options.timeout||a.DEFAULT_TIMEOUT);e.unref&&"function"==typeof e.unref&&e.unref(),this.socket=t||new s.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(a.SocksClientState.Connecting),this.receiveBuffer=new h.ReceiveBuffer,t?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),void 0!==this.options.set_tcp_nodelay&&null!==this.options.set_tcp_nodelay&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",(t=>{setImmediate((()=>{if(this.receiveBuffer.length>0){const e=this.receiveBuffer.get(this.receiveBuffer.length);t.socket.emit("data",e)}t.socket.resume()}))}))}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.BoundWaitingForConnection&&this.closeSocket(a.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(a.SocksClientState.Connected),4===this.options.proxy.type?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(a.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(t){this.receiveBuffer.append(t),this.processData()}processData(){for(;this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===a.SocksClientState.SentInitialHandshake)4===this.options.proxy.type?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===a.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===a.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else{if(this.state!==a.SocksClientState.BoundWaitingForConnection){this.closeSocket(a.ERRORS.InternalError);break}4===this.options.proxy.type?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse()}}onCloseHandler(){this.closeSocket(a.ERRORS.SocketClosed)}onErrorHandler(t){this.closeSocket(t.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(t){this.state!==a.SocksClientState.Error&&(this.setState(a.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new l.SocksClientError(t,this.options)))}sendSocks4InitialHandshake(){const t=this.options.proxy.userId||"",e=new o.SmartBuffer;e.writeUInt8(4),e.writeUInt8(a.SocksCommand[this.options.command]),e.writeUInt16BE(this.options.destination.port),s.isIPv4(this.options.destination.host)?(e.writeBuffer((0,c.ipToBuffer)(this.options.destination.host)),e.writeStringNT(t)):(e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(1),e.writeStringNT(t),e.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(e.toBuffer())}handleSocks4FinalHandshakeResponse(){const t=this.receiveBuffer.get(8);if(t[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedConnection} - (${a.Socks4Response[t[1]]})`);else if(a.SocksCommand[this.options.command]===a.SocksCommand.bind){const e=o.SmartBuffer.fromBuffer(t);e.readOffset=2;const r={port:e.readUInt16BE(),host:(0,c.int32ToIpv4)(e.readUInt32BE())};"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress),this.setState(a.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:r,socket:this.socket})}else this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){const t=this.receiveBuffer.get(8);if(t[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${a.Socks4Response[t[1]]})`);else{const e=o.SmartBuffer.fromBuffer(t);e.readOffset=2;const r={port:e.readUInt16BE(),host:(0,c.int32ToIpv4)(e.readUInt32BE())};this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})}}sendSocks5InitialHandshake(){const t=new o.SmartBuffer,e=[a.Socks5Auth.NoAuth];(this.options.proxy.userId||this.options.proxy.password)&&e.push(a.Socks5Auth.UserPass),void 0!==this.options.proxy.custom_auth_method&&e.push(this.options.proxy.custom_auth_method),t.writeUInt8(5),t.writeUInt8(e.length);for(const r of e)t.writeUInt8(r);this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(t.toBuffer()),this.setState(a.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){const t=this.receiveBuffer.get(2);5!==t[0]?this.closeSocket(a.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):t[1]===a.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):t[1]===a.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=a.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):t[1]===a.Socks5Auth.UserPass?(this.socks5ChosenAuthType=a.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):t[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){const t=this.options.proxy.userId||"",e=this.options.proxy.password||"",r=new o.SmartBuffer;r.writeUInt8(1),r.writeUInt8(Buffer.byteLength(t)),r.writeString(t),r.writeUInt8(Buffer.byteLength(e)),r.writeString(e),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(r.toBuffer()),this.setState(a.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return n(this,void 0,void 0,(function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(a.SocksClientState.SentAuthentication)}))}handleSocks5CustomAuthHandshakeResponse(t){return n(this,void 0,void 0,(function*(){return yield this.options.proxy.custom_auth_response_handler(t)}))}handleSocks5AuthenticationNoAuthHandshakeResponse(t){return n(this,void 0,void 0,(function*(){return 0===t[1]}))}handleSocks5AuthenticationUserPassHandshakeResponse(t){return n(this,void 0,void 0,(function*(){return 0===t[1]}))}handleInitialSocks5AuthenticationHandshakeResponse(){return n(this,void 0,void 0,(function*(){this.setState(a.SocksClientState.ReceivedAuthenticationResponse);let t=!1;this.socks5ChosenAuthType===a.Socks5Auth.NoAuth?t=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===a.Socks5Auth.UserPass?t=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(t=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),t?this.sendSocks5CommandRequest():this.closeSocket(a.ERRORS.Socks5AuthenticationFailed)}))}sendSocks5CommandRequest(){const t=new o.SmartBuffer;t.writeUInt8(5),t.writeUInt8(a.SocksCommand[this.options.command]),t.writeUInt8(0),s.isIPv4(this.options.destination.host)?(t.writeUInt8(a.Socks5HostType.IPv4),t.writeBuffer((0,c.ipToBuffer)(this.options.destination.host))):s.isIPv6(this.options.destination.host)?(t.writeUInt8(a.Socks5HostType.IPv6),t.writeBuffer((0,c.ipToBuffer)(this.options.destination.host))):(t.writeUInt8(a.Socks5HostType.Hostname),t.writeUInt8(this.options.destination.host.length),t.writeString(this.options.destination.host)),t.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(t.toBuffer()),this.setState(a.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){const t=this.receiveBuffer.peek(5);if(5!==t[0]||t[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${a.Socks5Response[t[1]]}`);else{const e=t[3];let r,n;if(e===a.Socks5HostType.IPv4){const t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<t)return void(this.nextRequiredPacketBufferSize=t);n=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),r={host:(0,c.int32ToIpv4)(n.readUInt32BE()),port:n.readUInt16BE()},"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress)}else if(e===a.Socks5HostType.Hostname){const e=t[4],i=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(e);if(this.receiveBuffer.length<i)return void(this.nextRequiredPacketBufferSize=i);n=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(i).slice(5)),r={host:n.readString(e),port:n.readUInt16BE()}}else if(e===a.Socks5HostType.IPv6){const t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<t)return void(this.nextRequiredPacketBufferSize=t);n=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),r={host:u.Address6.fromByteArray(Array.from(n.readBuffer(16))).canonicalForm(),port:n.readUInt16BE()}}this.setState(a.SocksClientState.ReceivedFinalResponse),a.SocksCommand[this.options.command]===a.SocksCommand.connect?(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.bind?(this.setState(a.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:r,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.associate&&(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){const t=this.receiveBuffer.peek(5);if(5!==t[0]||t[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${a.Socks5Response[t[1]]}`);else{const e=t[3];let r,n;if(e===a.Socks5HostType.IPv4){const t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<t)return void(this.nextRequiredPacketBufferSize=t);n=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),r={host:(0,c.int32ToIpv4)(n.readUInt32BE()),port:n.readUInt16BE()},"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress)}else if(e===a.Socks5HostType.Hostname){const e=t[4],i=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(e);if(this.receiveBuffer.length<i)return void(this.nextRequiredPacketBufferSize=i);n=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(i).slice(5)),r={host:n.readString(e),port:n.readUInt16BE()}}else if(e===a.Socks5HostType.IPv6){const t=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<t)return void(this.nextRequiredPacketBufferSize=t);n=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(t).slice(4)),r={host:u.Address6.fromByteArray(Array.from(n.readBuffer(16))).canonicalForm(),port:n.readUInt16BE()}}this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}}e.SocksClient=f},5438:(t,e)=>{"use strict";var r,n,i,s,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.SOCKS5_NO_ACCEPTABLE_AUTH=e.SOCKS5_CUSTOM_AUTH_END=e.SOCKS5_CUSTOM_AUTH_START=e.SOCKS_INCOMING_PACKET_SIZES=e.SocksClientState=e.Socks5Response=e.Socks5HostType=e.Socks5Auth=e.Socks4Response=e.SocksCommand=e.ERRORS=e.DEFAULT_TIMEOUT=void 0,e.DEFAULT_TIMEOUT=3e4,e.ERRORS={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"},e.SOCKS_INCOMING_PACKET_SIZES={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:t=>t+7,Socks4Response:8},function(t){t[t.connect=1]="connect",t[t.bind=2]="bind",t[t.associate=3]="associate"}(r||(e.SocksCommand=r={})),function(t){t[t.Granted=90]="Granted",t[t.Failed=91]="Failed",t[t.Rejected=92]="Rejected",t[t.RejectedIdent=93]="RejectedIdent"}(n||(e.Socks4Response=n={})),function(t){t[t.NoAuth=0]="NoAuth",t[t.GSSApi=1]="GSSApi",t[t.UserPass=2]="UserPass"}(i||(e.Socks5Auth=i={})),e.SOCKS5_CUSTOM_AUTH_START=128,e.SOCKS5_CUSTOM_AUTH_END=254,e.SOCKS5_NO_ACCEPTABLE_AUTH=255,function(t){t[t.Granted=0]="Granted",t[t.Failure=1]="Failure",t[t.NotAllowed=2]="NotAllowed",t[t.NetworkUnreachable=3]="NetworkUnreachable",t[t.HostUnreachable=4]="HostUnreachable",t[t.ConnectionRefused=5]="ConnectionRefused",t[t.TTLExpired=6]="TTLExpired",t[t.CommandNotSupported=7]="CommandNotSupported",t[t.AddressNotSupported=8]="AddressNotSupported"}(s||(e.Socks5Response=s={})),function(t){t[t.IPv4=1]="IPv4",t[t.Hostname=3]="Hostname",t[t.IPv6=4]="IPv6"}(o||(e.Socks5HostType=o={})),function(t){t[t.Created=0]="Created",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected",t[t.SentInitialHandshake=3]="SentInitialHandshake",t[t.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",t[t.SentAuthentication=5]="SentAuthentication",t[t.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",t[t.SentFinalHandshake=7]="SentFinalHandshake",t[t.ReceivedFinalResponse=8]="ReceivedFinalResponse",t[t.BoundWaitingForConnection=9]="BoundWaitingForConnection",t[t.Established=10]="Established",t[t.Disconnected=11]="Disconnected",t[t.Error=99]="Error"}(a||(e.SocksClientState=a={}))},7130:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ipToBuffer=e.int32ToIpv4=e.ipv4ToInt32=e.validateSocksClientChainOptions=e.validateSocksClientOptions=void 0;const n=r(3763),i=r(5438),s=r(2203),o=r(9424),a=r(9278);function c(t,e){if(void 0!==t.custom_auth_method){if(t.custom_auth_method<i.SOCKS5_CUSTOM_AUTH_START||t.custom_auth_method>i.SOCKS5_CUSTOM_AUTH_END)throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsCustomAuthRange,e);if(void 0===t.custom_auth_request_handler||"function"!=typeof t.custom_auth_request_handler)throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(void 0===t.custom_auth_response_size)throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(void 0===t.custom_auth_response_handler||"function"!=typeof t.custom_auth_response_handler)throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e)}}function h(t){return t&&"string"==typeof t.host&&"number"==typeof t.port&&t.port>=0&&t.port<=65535}function l(t){return t&&("string"==typeof t.host||"string"==typeof t.ipaddress)&&"number"==typeof t.port&&t.port>=0&&t.port<=65535&&(4===t.type||5===t.type)}function u(t){return"number"==typeof t&&t>0}e.validateSocksClientOptions=function(t,e=["connect","bind","associate"]){if(!i.SocksCommand[t.command])throw new n.SocksClientError(i.ERRORS.InvalidSocksCommand,t);if(-1===e.indexOf(t.command))throw new n.SocksClientError(i.ERRORS.InvalidSocksCommandForOperation,t);if(!h(t.destination))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsDestination,t);if(!l(t.proxy))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsProxy,t);if(c(t.proxy,t),t.timeout&&!u(t.timeout))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsTimeout,t);if(t.existing_socket&&!(t.existing_socket instanceof s.Duplex))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsExistingSocket,t)},e.validateSocksClientChainOptions=function(t){if("connect"!==t.command)throw new n.SocksClientError(i.ERRORS.InvalidSocksCommandChain,t);if(!h(t.destination))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsDestination,t);if(!(t.proxies&&Array.isArray(t.proxies)&&t.proxies.length>=2))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsProxiesLength,t);if(t.proxies.forEach((e=>{if(!l(e))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsProxy,t);c(e,t)})),t.timeout&&!u(t.timeout))throw new n.SocksClientError(i.ERRORS.InvalidSocksClientOptionsTimeout,t)},e.ipv4ToInt32=function(t){return new o.Address4(t).toArray().reduce(((t,e)=>(t<<8)+e),0)},e.int32ToIpv4=function(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t].join(".")},e.ipToBuffer=function(t){if(a.isIPv4(t)){const e=new o.Address4(t);return Buffer.from(e.toArray())}if(a.isIPv6(t)){const e=new o.Address6(t);return Buffer.from(e.canonicalForm().split(":").map((t=>t.padStart(4,"0"))).join(""),"hex")}throw new Error("Invalid IP address format")}},7736:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReceiveBuffer=void 0,e.ReceiveBuffer=class{constructor(t=4096){this.buffer=Buffer.allocUnsafe(t),this.offset=0,this.originalSize=t}get length(){return this.offset}append(t){if(!Buffer.isBuffer(t))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+t.length>=this.buffer.length){const e=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+t.length)),e.copy(this.buffer)}return t.copy(this.buffer,this.offset),this.offset+=t.length}peek(t){if(t>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,t)}get(t){if(t>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");const e=Buffer.allocUnsafe(t);return this.buffer.slice(0,t).copy(e),this.buffer.copyWithin(0,t,t+this.offset-t),this.offset-=t,e}}},3763:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shuffleArray=e.SocksClientError=void 0;class r extends Error{constructor(t,e){super(t),this.options=e}}e.SocksClientError=r,e.shuffleArray=function(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}}},5861:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(7631),e)},7604:(t,e,r)=>{var n;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(t){return function(t,e){var r,n,o,a,c,h,l,u,f,d=1,p=t.length,g="";for(n=0;n<p;n++)if("string"==typeof t[n])g+=t[n];else if("object"==typeof t[n]){if((a=t[n]).keys)for(r=e[d],o=0;o<a.keys.length;o++){if(null==r)throw new Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[o],a.keys[o-1]));r=r[a.keys[o]]}else r=a.param_no?e[a.param_no]:e[d++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(a.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(s("[sprintf] expecting number but found %T",r));switch(i.number.test(a.type)&&(u=r>=0),a.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,a.width?parseInt(a.width):0);break;case"e":r=a.precision?parseFloat(r).toExponential(a.precision):parseFloat(r).toExponential();break;case"f":r=a.precision?parseFloat(r).toFixed(a.precision):parseFloat(r);break;case"g":r=a.precision?String(Number(r.toPrecision(a.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=a.precision?r.substring(0,a.precision):r;break;case"t":r=String(!!r),r=a.precision?r.substring(0,a.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=a.precision?r.substring(0,a.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=a.precision?r.substring(0,a.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(a.type)?g+=r:(!i.number.test(a.type)||u&&!a.sign?f="":(f=u?"+":"-",r=r.toString().replace(i.sign,"")),h=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(f+r).length,c=a.width&&l>0?h.repeat(l):"",g+=a.align?f+r+c:"0"===h?f+c+r:c+f+r)}return g}(function(t){if(a[t])return a[t];for(var e,r=t,n=[],s=0;r;){if(null!==(e=i.text.exec(r)))n.push(e[0]);else if(null!==(e=i.modulo.exec(r)))n.push("%");else{if(null===(e=i.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){s|=1;var o=[],c=e[2],h=[];if(null===(h=i.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(h[1]);""!==(c=c.substring(h[0].length));)if(null!==(h=i.key_access.exec(c)))o.push(h[1]);else{if(null===(h=i.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(h[1])}e[2]=o}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}r=r.substring(e[0].length)}return a[t]=n}(t),arguments)}function o(t,e){return s.apply(null,[t].concat(e||[]))}var a=Object.create(null);e.sprintf=s,e.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=o,void 0===(n=function(){return{sprintf:s,vsprintf:o}}.call(e,r,e,t))||(t.exports=n))}()},7838:(t,e,r)=>{"use strict";const{Duplex:n,Readable:i,Writable:s}=r(2203),{CHANNEL_EXTENDED_DATATYPE:{STDERR:o}}=r(2535),{bufferSlice:a}=r(5623),c=2097152,h=1048576;class l extends i{constructor(t,e){super(e),this._channel=t}_read(t){this._channel._waitChanDrain&&(this._channel._waitChanDrain=!1,this._channel.incoming.window<=h&&p(this._channel))}}class u extends s{constructor(t){super({highWaterMark:c}),this._channel=t}_write(t,e,r){const n=this._channel,i=n._client._protocol,s=n.outgoing,c=s.packetSize,h=s.id;let l=s.window;const u=t.length;let f=0;if("open"===s.state){for(;u-f>0&&l>0;){let e=u-f;e>l&&(e=l),e>c&&(e=c),0===f&&e===u?i.channelExtData(h,t,o):i.channelExtData(h,a(t,f,f+e),o),f+=e,l-=e}if(s.window=l,u-f>0)return 0===l&&(n._waitWindow=!0),n._chunkErr=f>0?a(t,f,u):t,void(n._chunkcbErr=r);r()}}}function f(){this.eof(),!this.server&&this.allowHalfOpen||this.close(),this.writable=!1}function d(){this.readable=!1}function p(t){if("closed"===t.outgoing.state)return;const e=c-t.incoming.window;e<=0||(t.incoming.window+=e,t._client._protocol.channelWindowAdjust(t.outgoing.id,e))}t.exports={Channel:class extends n{constructor(t,e,r){const n={highWaterMark:c,allowHalfOpen:!r||r&&!1!==r.allowHalfOpen,emitClose:!1};super(n),this.allowHalfOpen=n.allowHalfOpen;const i=!(!r||!r.server);this.server=i,this.type=e.type,this.subtype=void 0,this.incoming=e.incoming,this.outgoing=e.outgoing,this._callbacks=[],this._client=t,this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this.stdin=this.stdout=this,this.stderr=i?new u(this):new l(this,n),this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",f).on("prefinish",f),this.on("end",d).on("close",d)}_read(t){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=h&&p(this))}_write(t,e,r){const n=this._client._protocol,i=this.outgoing,s=i.packetSize,o=i.id;let c=i.window;const h=t.length;let l=0;if("open"===i.state){for(;h-l>0&&c>0;){let e=h-l;e>c&&(e=c),e>s&&(e=s),0===l&&e===h?n.channelData(o,t):n.channelData(o,a(t,l,l+e)),l+=e,c-=e}if(i.window=c,h-l>0)return 0===c&&(this._waitWindow=!0),this._chunk=l>0?a(t,l,h):t,void(this._chunkcb=r);r()}}eof(){"open"===this.outgoing.state&&(this.outgoing.state="eof",this._client._protocol.channelEOF(this.outgoing.id))}close(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._client._protocol.channelClose(this.outgoing.id))}destroy(){return this.end(),this.close(),this}setWindow(t,e,r,n){if(this.server)throw new Error("Client-only method called in server mode");"session"!==this.type||"shell"!==this.subtype&&"exec"!==this.subtype||!this.writable||"open"!==this.outgoing.state||this._client._protocol.windowChange(this.outgoing.id,t,e,r,n)}signal(t){if(this.server)throw new Error("Client-only method called in server mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&this._client._protocol.signal(this.outgoing.id,t)}exit(t,e,r){if(!this.server)throw new Error("Server-only method called in client mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&("number"==typeof t?this._client._protocol.exitStatus(this.outgoing.id,t):this._client._protocol.exitSignal(this.outgoing.id,t,e,r))}},MAX_WINDOW:c,PACKET_SIZE:32768,windowAdjust:p,WINDOW_THRESHOLD:h}},7852:(t,e,r)=>{"use strict";const{Socket:n}=r(9278),{Duplex:i}=r(2203),{resolve:s}=r(6928),{readFile:o}=r(9896),{execFile:a,spawn:c}=r(5317),{isParsedKey:h,parseKey:l}=r(8946),{makeBufferParser:u,readUInt32BE:f,writeUInt32BE:d,writeUInt32LE:p}=r(5623);function g(t){let e=!1;return(...r)=>{e||(e=!0,t(...r))}}function A(){}const _=Buffer.alloc(0),E=u();class m{getIdentities(t){t(new Error("Missing getIdentities() implementation"))}sign(t,e,r,n){"function"==typeof r&&(n=r),n(new Error("Missing sign() implementation"))}}class y extends m{constructor(t){super(),this.socketPath=t}getStream(t){t=g(t);const e=new n;function r(){try{e.destroy()}catch{}t(new Error("Failed to connect to agent"))}e.on("connect",(()=>{t(null,e)})),e.on("close",r).on("end",r).on("error",r),e.connect(this.socketPath)}getIdentities(t){t=g(t),this.getStream(((e,r)=>{function n(e){if(r)try{r.destroy()}catch{}e||(e=new Error("Failed to retrieve identities from agent")),t(e)}if(e)return n(e);const i=new I(!0);i.on("error",n),i.pipe(r).pipe(i),r.on("close",n).on("end",n).on("error",n),i.getIdentities(((e,i)=>{if(e)return n(e);try{r.destroy()}catch{}t(null,i)}))}))}sign(t,e,r,n){"function"==typeof r?(n=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0),n=g(n),this.getStream(((i,s)=>{function o(t){if(s)try{s.destroy()}catch{}t||(t=new Error("Failed to sign data with agent")),n(t)}if(i)return o(i);const a=new I(!0);a.on("error",o),a.pipe(s).pipe(a),s.on("close",o).on("end",o).on("error",o),a.sign(t,e,r,((t,e)=>{if(t)return o(t);try{s.destroy()}catch{}n(null,e)}))}))}}const S=(()=>{const t=s(__dirname,"..","util/pagent.exe"),e={10:new Error("Invalid pagent.exe arguments"),11:new Error("Pageant is not running"),12:new Error("pagent.exe could not create an mmap"),13:new Error("pagent.exe could not set mode for stdin"),14:new Error("pagent.exe could not set mode for stdout"),15:new Error("pagent.exe did not get expected input payload")};function r(t){t.buffer=null,t.proc&&(t.proc.kill(),t.proc=void 0)}class n extends i{constructor(){super(),this.proc=void 0,this.buffer=null}_read(t){}_write(r,n,i){if(null===this.buffer)this.buffer=r;else{const t=Buffer.allocUnsafe(this.buffer.length+r.length);this.buffer.copy(t,0),r.copy(t,this.buffer.length),this.buffer=t}if(this.buffer.length<4)return i();const s=f(this.buffer,0);if(this.buffer.length-4<s)return i();if(r=this.buffer.slice(0,4+s),this.buffer.length>4+s)return i(new Error("Unexpected multiple agent requests"));let o;this.buffer=null;const a=this.proc=c(t,[r.length]);a.stdout.on("data",(t=>{this.push(t)})),a.on("error",(t=>{o=t,i(o)})),a.on("close",(t=>{if(this.proc=void 0,!o){if(o=e[t])return i(o);i()}})),a.stdin.end(r)}_final(t){r(this),t()}_destroy(t,e){r(this),e()}}return class extends y{getStream(t){t(null,new n)}}})(),b=(()=>{const t=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class extends y{getStream(e){e=g(e);let r=this.socketPath,i=!1;o(r,(function s(c,h){if(c)return i?e(new Error("Invalid cygwin unix socket path")):void a("cygpath",["-w",r],((t,n,a)=>{if(t||0===n.length)return e(new Error("Invalid cygwin unix socket path"));i=!0,r=n.toString().replace(/[\r\n]/g,""),o(r,s)}));const l=t.exec(h.toString("ascii"));if(!l)return e(new Error("Malformed cygwin unix socket file"));let u,d=0,g=!1;const A=[];let _,E=Buffer.alloc(12);const m=parseInt(l[1],10),y=l[2].replace(/-/g,""),S=Buffer.allocUnsafe(16);for(let t=0,e=0;e<32;++t,e+=2)S[t]=parseInt(y.substring(e,e+2),16);for(let t=0;t<16;t+=4)p(S,f(S,t),t);function b(){d=0,u="secret",_.write(S)}function w(t){if(d+=t.length,"secret"!==u){if("creds"===u&&(g||A.push(t),12===d)){if(_.removeListener("connect",b),_.removeListener("data",w),_.removeListener("error",v),_.removeListener("end",v),_.removeListener("close",v),g)return e(null,_);g=!0,E=Buffer.concat(A),p(E,process.pid,0),_.on("error",(()=>{})),_.destroy(),I()}}else 16===d&&(d=0,u="creds",_.write(E))}function v(){e(new Error("Problem negotiating cygwin unix socket security"))}function I(){_=new n,_.on("connect",b),_.on("data",w),_.on("error",v),_.on("end",v),_.on("close",v),_.connect(m)}I()}))}}})(),w=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function v(t){return"win32"!==process.platform||w.test(t)?new y(t):"pageant"===t?new S:new b(t)}const I=(()=>{const t=Symbol("Inbound Request Type"),e=Symbol("Inbound Request Response"),r=Symbol("Inbound Request Context");class n{constructor(n,i){this[t]=n,this[e]=void 0,this[r]=i}hasResponded(){return void 0!==this[e]}getType(){return this[t]}getContext(){return this[r]}}function s(t,r,n){return r[e]=n,function(t){let r;for(;t[u].length;){const n=t[u][0][e];if(void 0===n)break;t[u].shift(),r=t.push(n)}return r}(t)}function o(t){if(t[g]=null,0===t[p]){const e=t[u];if(e&&e.length){t[u]=[];for(const t of e)t.cb(new Error("No reply from server"))}}try{t.end()}catch{}setImmediate((()=>{t[S]||t.emit("end"),t[y]||t.emit("close")}))}function a(){this[y]=!0}function c(){this[S]=!0}const u=Symbol("Requests"),p=Symbol("Agent Protocol Role"),g=Symbol("Agent Protocol Buffer"),m=Symbol("Agent Protocol Current Message Length"),y=Symbol("Agent Protocol Closed"),S=Symbol("Agent Protocol Ended");return class extends i{constructor(t){super({autoDestroy:!0,emitClose:!1}),this[p]=t?0:1,this[u]=[],this[g]=null,this[m]=-1,this.once("end",c),this.once("close",a)}_read(t){}_write(t,e,r){null===this[g]?this[g]=t:this[g]=function(t,e){const r=Buffer.allocUnsafe(t.length+e.length);return t.copy(r,0),e.copy(r,t.length),r}(this[g],t);let i=this[g],s=i.length,o=0;for(;o<s&&!(s<5)&&(-1===this[m]&&(this[m]=f(i,o)),!(s<4+this[m]));){const t=i[o+=4];if(++o,0===this[p]){if(0===this[u].length)return r(new Error("Received unexpected message from server"));const e=this[u].shift();switch(t){case 5:e.cb(new Error("Agent responded with failure"));break;case 12:{if(11!==e.type)return r(new Error("Agent responded with wrong message type"));E.init(i,o);const t=E.readUInt32BE();if(void 0===t)return E.clear(),r(new Error("Malformed agent response"));const n=[];for(let e=0;e<t;++e){let t=E.readString();if(void 0===t)return E.clear(),r(new Error("Malformed agent response"));const e=E.readString(!0);if(void 0===e)return E.clear(),r(new Error("Malformed agent response"));t=l(t),t instanceof Error||(t.comment=t.comment||e,n.push(t))}o=E.pos(),E.clear(),e.cb(null,n);break}case 14:{if(13!==e.type)return r(new Error("Agent responded with wrong message type"));E.init(i,o);let t=E.readString();if(o=E.pos(),E.clear(),void 0===t)return r(new Error("Malformed agent response"));if(E.init(t,0),E.readString(!0),t=E.readString(),E.clear(),void 0===t)return r(new Error("Malformed OpenSSH signature format"));e.cb(null,t);break}default:return r(new Error("Agent responded with unsupported message type"))}}else switch(t){case 11:{const e=new n(t);this[u].push(e),this.emit("identities",e);break}case 13:{E.init(i,o);let e=E.readString();const r=E.readString(),s=E.readUInt32BE();if(o=E.pos(),E.clear(),void 0===s){const e=new n(t);return this[u].push(e),this.failureReply(e)}if(e=l(e),e instanceof Error){const e=new n(t);return this[u].push(e),this.failureReply(e)}const a={hash:void 0};let c;"ssh-rsa"===e.type&&(2&s?(c="rsa-sha2-256",a.hash="sha256"):4&s&&(c="rsa-sha2-512",a.hash="sha512")),void 0===c&&(c=e.type);const h=new n(t,c);this[u].push(h),this.emit("sign",h,e,r,a);break}default:{const e=new n(t);this[u].push(e),this.failureReply(e)}}if(this[m]=-1,o===s){this[g]=null;break}this[g]=i=i.slice(o),s=i.length,o=0}r()}_destroy(t,e){o(this),e()}_final(t){o(this),t()}sign(t,e,r,n){if(0!==this[p])throw new Error("Client-only method called with server role");"function"==typeof r?(n=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0);let i=0;if((t=l(t))instanceof Error)throw new Error("Invalid public key argument");if("ssh-rsa"===t.type&&r)switch(r.hash){case"sha256":i=2;break;case"sha512":i=4}const s=(t=t.getPublicSSH()).length,o=e.length;let a=0;const c=Buffer.allocUnsafe(9+s+4+o+4);return d(c,c.length-4,a),c[a+=4]=13,d(c,s,++a),t.copy(c,a+=4),d(c,o,a+=s),e.copy(c,a+=4),d(c,i,a+=o),"function"!=typeof n&&(n=A),this[u].push({type:13,cb:n}),this.push(c)}getIdentities(t){if(0!==this[p])throw new Error("Client-only method called with server role");let e=0;const r=Buffer.allocUnsafe(5);return d(r,r.length-4,e),r[e+=4]=11,"function"!=typeof t&&(t=A),this[u].push({type:11,cb:t}),this.push(r)}failureReply(t){if(1!==this[p])throw new Error("Server-only method called with client role");if(!(t instanceof n))throw new Error("Wrong request argument");if(t.hasResponded())return!0;let e=0;const r=Buffer.allocUnsafe(5);return d(r,r.length-4,e),r[e+=4]=5,s(this,t,r)}getIdentitiesReply(t,e){if(1!==this[p])throw new Error("Server-only method called with client role");if(!(t instanceof n))throw new Error("Wrong request argument");if(t.hasResponded())return!0;if(11!==t.getType())throw new Error("Invalid response to request");if(!Array.isArray(e))throw new Error("Keys argument must be an array");let r=4;const i=[];for(let t=0;t<e.length;++t){const n=e[t];if("object"!=typeof n||null===n)throw new Error(`Invalid key entry: ${n}`);let s,o;if(h(n))s=n;else if(h(n.pubKey))s=n.pubKey;else{if("object"!=typeof n.pubKey||null===n.pubKey)continue;if(({pubKey:s,comment:o}=n.pubKey),s=l(s),s instanceof Error)continue}o=s.comment||o,s=s.getPublicSSH(),r+=4+s.length,o&&"string"==typeof o?o=Buffer.from(o):Buffer.isBuffer(o)||(o=_),r+=4+o.length,i.push({pubKey:s,comment:o})}let o=0;const a=Buffer.allocUnsafe(5+r);d(a,a.length-4,o),a[o+=4]=12,d(a,i.length,++o),o+=4;for(let t=0;t<i.length;++t){const{pubKey:e,comment:r}=i[t];d(a,e.length,o),e.copy(a,o+=4),d(a,r.length,o+=e.length),o+=4,r.length&&(r.copy(a,o),o+=r.length)}return s(this,t,a)}signReply(t,e){if(1!==this[p])throw new Error("Server-only method called with client role");if(!(t instanceof n))throw new Error("Wrong request argument");if(t.hasResponded())return!0;if(13!==t.getType())throw new Error("Invalid response to request");if(!Buffer.isBuffer(e))throw new Error("Signature argument must be a Buffer");if(0===e.length)throw new Error("Signature argument must be non-empty");let r=0;const i=t.getContext(),o=Buffer.byteLength(i),a=Buffer.allocUnsafe(13+o+4+e.length);return d(a,a.length-4,r),a[r+=4]=14,d(a,4+o+4+e.length,++r),d(a,o,r+=4),a.utf8Write(i,r+=4,o),d(a,e.length,r+=o),e.copy(a,r+=4),s(this,t,a)}}})(),C=Symbol("Agent"),k=Symbol("Agent Keys"),R=Symbol("Agent Keys Index"),B=Symbol("Agent Init Callbacks");function O(t){return t instanceof m}t.exports={AgentContext:class{constructor(t){if("string"==typeof t)t=v(t);else if(!O(t))throw new Error("Invalid agent argument");this[C]=t,this[k]=null,this[R]=-1,this[B]=null}init(t){if("function"!=typeof t&&(t=A),null===this[k])if(null===this[B]){this[B]=[t];const e=(...t)=>{process.nextTick((()=>{const e=this[B];this[B]=null;for(const r of e)r(...t)}))};this[C].getIdentities(g(((t,r)=>{if(t)return e(t);if(!Array.isArray(r))return e(new Error("Agent implementation failed to provide keys"));const n=[];for(let t of r)t=l(t),t instanceof Error||n.push(t);this[k]=n,this[R]=-1,e()})))}else this[B].push(t);else process.nextTick(t)}nextKey(){return!(null===this[k]||++this[R]>=this[k].length)&&this[k][this[R]]}currentKey(){return null===this[k]||this[R]>=this[k].length?null:this[k][this[R]]}pos(){return null===this[k]||this[R]>=this[k].length?-1:this[R]}reset(){this[R]=-1}sign(...t){this[C].sign(...t)}},AgentProtocol:I,BaseAgent:m,createAgent:v,CygwinAgent:b,isAgent:O,OpenSSHAgent:y,PageantAgent:S}},1818:(t,e,r)=>{"use strict";const{createHash:n,getHashes:i,randomFillSync:s}=r(6982),{Socket:o}=r(9278),{lookup:a}=r(2250),c=r(4434),h=i(),{COMPAT:l,CHANNEL_EXTENDED_DATATYPE:{STDERR:u},CHANNEL_OPEN_FAILURE:f,DEFAULT_CIPHER:d,DEFAULT_COMPRESSION:p,DEFAULT_KEX:g,DEFAULT_MAC:A,DEFAULT_SERVER_HOST_KEY:_,DISCONNECT_REASON:E,DISCONNECT_REASON_BY_VALUE:m,SUPPORTED_CIPHER:y,SUPPORTED_COMPRESSION:S,SUPPORTED_KEX:b,SUPPORTED_MAC:w,SUPPORTED_SERVER_HOST_KEY:v}=r(2535),{init:I}=r(7785),C=r(6008),{parseKey:k}=r(8946),{SFTP:R}=r(4261),{bufferCopy:B,makeBufferParser:O,makeError:T,readUInt32BE:N,sigSSHToASN1:L,writeUInt32BE:P}=r(5623),{AgentContext:x,createAgent:U,isAgent:D}=r(7852),{Channel:H,MAX_WINDOW:F,PACKET_SIZE:M,windowAdjust:Q,WINDOW_THRESHOLD:$}=r(7838),{ChannelManager:W,generateAlgorithmList:j,isWritable:K,onChannelOpenFailure:G,onCHANNEL_CLOSE:q}=r(9100),V=O(),z=O(),Y=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,X=t=>{};function J(t,e,r,n){const i=F,s=M;"function"==typeof r&&(n=r,r={});const o=(t,e)=>{n(t,e)};o.type=e;const a=t._chanMgr.add(o);if(-1!==a)switch(e){case"session":case"sftp":t._protocol.session(a,i,s);break;case"direct-tcpip":t._protocol.directTcpip(a,i,s,r);break;case"direct-streamlocal@openssh.com":t._protocol.openssh_directStreamLocal(a,i,s,r);break;default:throw new Error(`Unsupported channel type: ${e}`)}else n(new Error("No free channels available"))}function Z(t,e,r){const n={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};"function"==typeof e?r=e:"object"==typeof e&&null!==e&&("boolean"==typeof e.single&&(n.single=e.single),"number"==typeof e.screen&&(n.screen=e.screen),"string"==typeof e.protocol&&(n.protocol=e.protocol),"string"==typeof e.cookie?n.cookie=e.cookie:Buffer.isBuffer(e.cookie)&&(n.cookie=e.cookie.hexSlice(0,e.cookie.length))),void 0===n.cookie&&(n.cookie=it());const i="function"==typeof r;"open"===t.outgoing.state?(i&&t._callbacks.push((e=>{e?r(!0!==e?e:new Error("Unable to request X11")):(t._hasX11=!0,++t._client._acceptX11,t.once("close",(()=>{t._client._acceptX11&&--t._client._acceptX11})),r())})),t._client._protocol.x11Forward(t.outgoing.id,n,i)):i&&r(new Error("Channel is not open"))}function tt(t,e,r){let n=24,i=80,s=640,o=480,a="vt100",c=null;"function"==typeof e?r=e:"object"==typeof e&&null!==e&&("number"==typeof e.rows&&(n=e.rows),"number"==typeof e.cols&&(i=e.cols),"number"==typeof e.width&&(s=e.width),"number"==typeof e.height&&(o=e.height),"string"==typeof e.term&&(a=e.term),"object"==typeof e.modes&&(c=e.modes));const h="function"==typeof r;"open"===t.outgoing.state?(h&&t._callbacks.push((t=>{t?r(!0!==t?t:new Error("Unable to request a pseudo-terminal")):r()})),t._client._protocol.pty(t.outgoing.id,n,i,o,s,a,c,h)):h&&r(new Error("Channel is not open"))}function et(t,e){const r="function"==typeof e;"open"===t.outgoing.state?t._client._agentFwdEnabled?r&&e(!1):(t._client._agentFwdEnabled=!0,t._callbacks.push((n=>{if(n)return t._client._agentFwdEnabled=!1,void(r&&e(!0!==n?n:new Error("Unable to request agent forwarding")));r&&e()})),t._client._protocol.openssh_agentForward(t.outgoing.id,!0)):r&&e(new Error("Channel is not open"))}function rt(t,e){if("open"!==t.outgoing.state)return;const r=Object.keys(e||{});for(let n=0;n<r.length;++n){const i=r[n],s=e[i];t._client._protocol.env(t.outgoing.id,i,s,!1)}}function nt(t,e,r){"open"===t.outgoing.state?(t._callbacks.push((n=>{n?r(!0!==n?n:new Error(`Unable to start subsystem: ${e}`)):(t.subtype="subsystem",r(void 0,t))})),t._client._protocol.subsystem(t.outgoing.id,e,!0)):r(new Error("Channel is not open"))}const it=(()=>{const t=Buffer.allocUnsafe(16);return()=>(s(t,0,16),t.hexSlice(0,16))})();function st(t){if(!Array.isArray(t))throw new Error("authList must be an array");let e=0;return(r,n,i)=>e!==t.length&&t[e++]}function ot(t,e,r){if("ssh-rsa"===e.type){if(t._protocol._compatFlags&l.IMPLY_RSA_SHA2_SIGALGS&&(r=Array.isArray(r)?["rsa-sha2-256","rsa-sha2-512",...r]:["rsa-sha2-256","rsa-sha2-512"]),Array.isArray(r)){if(-1!==r.indexOf("rsa-sha2-256"))return[["rsa-sha2-256","sha256"]];if(-1!==r.indexOf("rsa-sha2-512"))return[["rsa-sha2-512","sha512"]];if(-1===r.indexOf("ssh-rsa"))return[]}return[["ssh-rsa","sha1"]]}}t.exports=class extends c{constructor(){super(),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,ident:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._agent=void 0,this._readyTimeout=void 0,this._chanMgr=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._remoteVer=void 0,this._protocol=void 0,this._sock=void 0,this._resetKA=void 0}connect(t){if(this._sock&&K(this._sock))return this.once("close",(()=>{this.connect(t)})),this.end(),this;this.config.host=t.hostname||t.host||"localhost",this.config.port=t.port||22,this.config.localAddress="string"==typeof t.localAddress?t.localAddress:void 0,this.config.localPort="string"==typeof t.localPort||"number"==typeof t.localPort?t.localPort:void 0,this.config.forceIPv4=t.forceIPv4||!1,this.config.forceIPv6=t.forceIPv6||!1,this.config.keepaliveCountMax="number"==typeof t.keepaliveCountMax&&t.keepaliveCountMax>=0?t.keepaliveCountMax:3,this.config.keepaliveInterval="number"==typeof t.keepaliveInterval&&t.keepaliveInterval>0?t.keepaliveInterval:0,this.config.readyTimeout="number"==typeof t.readyTimeout&&t.readyTimeout>=0?t.readyTimeout:2e4,this.config.ident="string"==typeof t.ident||Buffer.isBuffer(t.ident)?t.ident:void 0;const e={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:[]},sc:void 0};let r=!0;if("object"==typeof t.algorithms&&null!==t.algorithms&&(e.kex=j(t.algorithms.kex,g,b),e.kex!==g&&(r=!1),e.serverHostKey=j(t.algorithms.serverHostKey,_,v),e.serverHostKey!==_&&(r=!1),e.cs.cipher=j(t.algorithms.cipher,d,y),e.cs.cipher!==d&&(r=!1),e.cs.mac=j(t.algorithms.hmac,A,w),e.cs.mac!==A&&(r=!1),e.cs.compress=j(t.algorithms.compress,p,S),e.cs.compress!==p&&(r=!1),r||(e.sc=e.cs)),"string"==typeof t.username)this.config.username=t.username;else{if("string"!=typeof t.user)throw new Error("Invalid username");this.config.username=t.user}this.config.password="string"==typeof t.password?t.password:void 0,this.config.privateKey="string"==typeof t.privateKey||Buffer.isBuffer(t.privateKey)?t.privateKey:void 0,this.config.localHostname="string"==typeof t.localHostname?t.localHostname:void 0,this.config.localUsername="string"==typeof t.localUsername?t.localUsername:void 0,this.config.tryKeyboard=!0===t.tryKeyboard,"string"==typeof t.agent&&t.agent.length?this.config.agent=U(t.agent):D(t.agent)?this.config.agent=t.agent:this.config.agent=void 0,this.config.allowAgentFwd=!0===t.agentForward&&void 0!==this.config.agent;let i=this.config.authHandler="function"==typeof t.authHandler||Array.isArray(t.authHandler)?t.authHandler:void 0;this.config.strictVendor="boolean"!=typeof t.strictVendor||t.strictVendor;const s=this.config.debug="function"==typeof t.debug?t.debug:void 0;if(!0===t.agentForward&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");let c,l,O=this._callbacks=[];if(this._chanMgr=new W(this),this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._agent=this.config.agent?this.config.agent:void 0,this._remoteVer=void 0,this.config.privateKey){if(c=k(this.config.privateKey,t.passphrase),c instanceof Error)throw new Error(`Cannot parse privateKey: ${c.message}`);if(Array.isArray(c)&&(c=c[0]),null===c.getPrivatePEM())throw new Error("privateKey value does not contain a (valid) private key")}if("function"==typeof t.hostVerifier){const e=t.hostVerifier;let r;-1!==h.indexOf(t.hostHash)&&(r=n(t.hostHash)),l=(t,n)=>{r&&(r.update(t),t=r.digest("hex"));const i=e(t,n);void 0!==i&&n(i)}}const N=this._sock=t.sock||new o;let J=!1,Z=!1;this._protocol&&this._protocol.cleanup();const tt=s?(t,e,r)=>{s(`Debug output from server: ${JSON.stringify(r)}`)}:void 0;let et;const rt=this._protocol=new C({ident:this.config.ident,offer:r?void 0:e,onWrite:t=>{K(N)&&N.write(t)},onError:t=>{"handshake"===t.level&&clearTimeout(this._readyTimeout),rt._destruct||N.removeAllListeners("data"),this.emit("error",t);try{N.end()}catch{}},onHeader:t=>{Z=!0,this._remoteVer=t.versions.software,t.greeting&&this.emit("greeting",t.greeting)},onHandshakeComplete:t=>{this.emit("handshake",t),J||(J=!0,rt.service("ssh-userauth"))},debug:s,hostVerifier:l,messageHandlers:{DEBUG:tt,DISCONNECT:(t,e,r)=>{if(e!==E.BY_APPLICATION){r||void 0===(r=m[e])&&(r=`Unexpected disconnection reason: ${e}`);const t=new Error(r);t.code=e,this.emit("error",t)}N.end()},SERVICE_ACCEPT:(t,e)=>{"ssh-userauth"===e&&St()},EXT_INFO:(t,e)=>{if(void 0===et){for(const t of e)if("server-sig-algs"===t.name)return void(et=t.algs);et=null}},USERAUTH_BANNER:(t,e)=>{this.emit("banner",e)},USERAUTH_SUCCESS:t=>{lt(),clearTimeout(this._readyTimeout),this.emit("ready")},USERAUTH_FAILURE:(t,e,r)=>{if(dt.keyAlgos){const t=dt.keyAlgos[0][0];if(s&&s(`Client: ${dt.type} (${t}) auth failed`),dt.keyAlgos.shift(),dt.keyAlgos.length){const[t,e]=dt.keyAlgos[0];switch(dt.type){case"agent":if(!r)return void rt.authPK(dt.username,dt.agentCtx.currentKey(),t);break;case"publickey":return void rt.authPK(dt.username,dt.key,t);case"hostbased":return void rt.authHostbased(dt.username,dt.key,dt.localHostname,dt.localUsername,t,((t,r)=>{const n=dt.key.sign(t,e);if(n instanceof Error)return n.message=`Error while signing with key: ${n.message}`,n.level="client-authentication",this.emit("error",n),St();r(n)}))}}else dt.keyAlgos=void 0}if("agent"===dt.type){const t=dt.agentCtx.pos();if(!r)return s&&s(`Client: Agent key #${t+1} failed`),bt()}s&&s(`Client: ${dt.type} auth ${r?"succeeded with partial success":"failed"}`),gt=r,At=e,St()},USERAUTH_PASSWD_CHANGEREQ:(t,e)=>{"password"===dt.type&&this.emit("change password",e,(t=>{rt.authPassword(this.config.username,this.config.password,t)}))},USERAUTH_PK_OK:t=>{let e,r;if(dt.keyAlgos&&([e,r]=dt.keyAlgos[0]),"agent"===dt.type){const t=dt.agentCtx.currentKey();rt.authPK(dt.username,t,e,((e,n)=>{const i={hash:r};dt.agentCtx.sign(t,e,i,((t,e)=>{if(!t)return n(e);t.level="agent",this.emit("error",t),bt()}))}))}else"publickey"===dt.type&&rt.authPK(dt.username,dt.key,e,((t,e)=>{const n=dt.key.sign(t,r);if(n instanceof Error)return n.message=`Error signing data with key: ${n.message}`,n.level="client-authentication",this.emit("error",n),St();e(n)}))},USERAUTH_INFO_REQUEST:(t,e,r,n)=>{if("keyboard-interactive"===dt.type){if(0===(Array.isArray(n)?n.length:0))return s&&s("Client: Sending automatic USERAUTH_INFO_RESPONSE"),void rt.authInfoRes();dt.prompt(e,r,"",n,(t=>{rt.authInfoRes(t)}))}},REQUEST_SUCCESS:(t,e)=>{O.length&&O.shift()(!1,e)},REQUEST_FAILURE:t=>{O.length&&O.shift()(!0)},GLOBAL_REQUEST:(t,e,r,n)=>{"hostkeys-00@openssh.com"===e?(!function(t,e,r){if(!t._sock||!K(t._sock))return;if("function"!=typeof r&&(r=X),!Array.isArray(e))throw new TypeError("Invalid keys argument type");const n=[];for(const t of e){const e=k(t);if(e instanceof Error)throw e;n.push(e)}if(!t.config.strictVendor||t.config.strictVendor&&Y.test(t._remoteVer))return t._callbacks.push(((e,i)=>{if(e)return void r(!0!==e?e:new Error("Server failed to prove supplied keys"));const s=[];let o=0;for(V.init(i,0);V.avail()&&o!==n.length;){const e=n[o++],r=e.getPublicSSH(),i=V.readString();z.init(i,0);const a=z.readString(!0);let c,h=z.readString();if(a!==e.type){if("ssh-rsa"!==e.type)continue;switch(a){case"rsa-sha2-256":c="sha256";break;case"rsa-sha2-512":c="sha512";break;default:continue}}const l=t._protocol._kex.sessionID,u=Buffer.allocUnsafe(37+l.length+4+r.length);let f=0;P(u,29,f),u.utf8Write("hostkeys-prove-00@openssh.com",f+=4,29),P(u,l.length,f+=29),B(l,u,0,l.length,f+=4),P(u,r.length,f+=l.length),B(r,u,0,r.length,f+=4),(h=L(h,a))&&!0===e.verify(u,h,c)&&s.push(e)}z.clear(),V.clear(),r(null,s)})),void t._protocol.openssh_hostKeysProve(n);process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}(this,n,((t,e)=>{t||this.emit("hostkeys",e)})),r&&rt.requestSuccess()):r&&rt.requestFailure()},CHANNEL_OPEN:(t,e)=>{!function(t,e){let r,n=-1;const i=()=>{const r={type:e.type,incoming:{id:n,window:F,packetSize:M,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},i=new H(t,r);return t._chanMgr.update(n,i),t._protocol.channelOpenConfirm(e.sender,n,F,M),i},s=()=>{void 0===r&&(r=-1===n?f.RESOURCE_SHORTAGE:f.CONNECT_FAILED),-1!==n&&t._chanMgr.remove(n),t._protocol.channelOpenFail(e.sender,r,"")},o=()=>(n=t._chanMgr.add(),-1===n&&(r=f.RESOURCE_SHORTAGE,t.config.debug&&t.config.debug("Client: Automatic rejection of incoming channel open: no channels available")),-1!==n),a=e.data;switch(e.type){case"forwarded-tcpip":{const e=t._forwarding[`${a.destIP}:${a.destPort}`];if(void 0!==e&&o())return 0===a.destPort&&(a.destPort=e),void t.emit("tcp connection",a,i,s);break}case"forwarded-streamlocal@openssh.com":if(void 0!==t._forwardingUnix[a.socketPath]&&o())return void t.emit("unix connection",a,i,s);break;case"auth-agent@openssh.com":if(t._agentFwdEnabled&&"function"==typeof t._agent.getStream&&o())return void t._agent.getStream(((t,e)=>{if(t)return s();const r=i();r.pipe(e).pipe(r)}));break;case"x11":if(0!==t._acceptX11&&o())return void t.emit("x11",a,i,s);break;default:r=f.UNKNOWN_CHANNEL_TYPE,t.config.debug&&t.config.debug(`Client: Automatic rejection of unsupported incoming channel open type: ${e.type}`)}void 0===r&&(r=f.ADMINISTRATIVELY_PROHIBITED,t.config.debug&&t.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+e.type)),s()}(this,e)},CHANNEL_OPEN_CONFIRMATION:(t,e)=>{const r=this._chanMgr.get(e.recipient);if("function"!=typeof r)return;const n="sftp"===r.type,i={type:n?"session":r.type,incoming:{id:e.recipient,window:F,packetSize:M,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},o=n?new R(this,i,{debug:s}):new H(this,i);this._chanMgr.update(e.recipient,o),r(void 0,o)},CHANNEL_OPEN_FAILURE:(t,e,r,n)=>{const i=this._chanMgr.get(e);"function"==typeof i&&G(this,e,{reason:r,description:n},i)},CHANNEL_DATA:(t,e,r)=>{const n=this._chanMgr.get(e);"object"==typeof n&&null!==n&&0!==n.incoming.window&&(n.incoming.window-=r.length,!1!==n.push(r)?n.incoming.window<=$&&Q(n):n._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(t,e,r,n)=>{if(n!==u)return;const i=this._chanMgr.get(e);"object"==typeof i&&null!==i&&0!==i.incoming.window&&(i.incoming.window-=r.length,i.stderr.push(r)?i.incoming.window<=$&&Q(i):i._waitChanDrain=!0)},CHANNEL_WINDOW_ADJUST:(t,e,r)=>{const n=this._chanMgr.get(e);"object"==typeof n&&null!==n&&(n.outgoing.window+=r,n._waitWindow&&(n._waitWindow=!1,n._chunk?n._write(n._chunk,null,n._chunkcb):n._chunkcb?n._chunkcb():n._chunkErr?n.stderr._write(n._chunkErr,null,n._chunkcbErr):n._chunkcbErr&&n._chunkcbErr()))},CHANNEL_SUCCESS:(t,e)=>{const r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!1))},CHANNEL_FAILURE:(t,e)=>{const r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!0))},CHANNEL_REQUEST:(t,e,r,n,i)=>{const s=this._chanMgr.get(e);if("object"!=typeof s||null===s)return;const o=s._exit;if(void 0===o.code){switch(r){case"exit-status":return void s.emit("exit",o.code=i);case"exit-signal":return void s.emit("exit",o.code=null,o.signal=`SIG${i.signal}`,o.dump=i.coreDumped,o.desc=i.errorMessage)}n&&t.channelFailure(s.outgoing.id)}},CHANNEL_EOF:(t,e)=>{const r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null),r.stderr.readable&&r.stderr.push(null))},CHANNEL_CLOSE:(t,e)=>{q(this,e,this._chanMgr.get(e))}}});N.pause();const nt=this.config.keepaliveInterval,it=this.config.keepaliveCountMax;let at,ct=0;const ht=()=>{if(++ct>it){if(clearInterval(at),N.readable){const t=new Error("Keepalive timeout");t.level="client-timeout",this.emit("error",t),N.destroy()}}else K(N)?(O.push(lt),rt.ping()):clearInterval(at)};function lt(){nt>0&&(ct=0,clearInterval(at),K(N)&&(at=setInterval(ht,nt)))}this._resetKA=lt;const ut=(()=>{let t=!1;return()=>{if(!t&&(t=!0,pt&&!Z)){const t=T("Connection lost before handshake","protocol",!0);this.emit("error",t)}}})(),ft=(()=>{let t=!1;return()=>{t||(t=!0,pt=!0,s&&s("Socket connected"),this.emit("connect"),I.then((()=>{rt.start(),N.on("data",(t=>{try{rt.parse(t,0,t.length)}catch(t){this.emit("error",t);try{K(N)&&N.end()}catch{}}})),N.stderr&&"function"==typeof N.stderr.resume&&N.stderr.resume(),N.resume()})).catch((t=>{this.emit("error",t);try{K(N)&&N.end()}catch{}})))}})();let dt,pt=!1;N.on("connect",ft).on("timeout",(()=>{this.emit("timeout")})).on("error",(t=>{s&&s(`Socket error: ${t.message}`),clearTimeout(this._readyTimeout),t.level="client-socket",this.emit("error",t)})).on("end",(()=>{s&&s("Socket ended"),ut(),rt.cleanup(),clearTimeout(this._readyTimeout),clearInterval(at),this.emit("end")})).on("close",(()=>{s&&s("Socket closed"),ut(),rt.cleanup(),clearTimeout(this._readyTimeout),clearInterval(at),this.emit("close");const t=O;O=this._callbacks=[];const e=new Error("No response from server");for(let r=0;r<t.length;++r)t[r](e);this._chanMgr.cleanup(e)}));let gt=null,At=null;const _t=["none"];void 0!==this.config.password&&_t.push("password"),void 0!==c&&_t.push("publickey"),void 0!==this._agent&&_t.push("agent"),this.config.tryKeyboard&&_t.push("keyboard-interactive"),void 0!==c&&void 0!==this.config.localHostname&&void 0!==this.config.localUsername&&_t.push("hostbased"),Array.isArray(i)?i=st(i):"function"!=typeof i&&(i=st(_t));let Et=!1;const mt=t=>{if(!Et){if(Et=!0,!1===t){const t=new Error("All configured authentication methods failed");return t.level="client-authentication",this.emit("error",t),void this.end()}if("string"==typeof t){const e=t;if(-1===_t.indexOf(e))return yt(`Authentication method not allowed: ${e}`);const r=this.config.username;switch(e){case"password":t={type:e,username:r,password:this.config.password};break;case"publickey":t={type:e,username:r,key:c};break;case"hostbased":t={type:e,username:r,key:c,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":t={type:e,username:r,agentCtx:new x(this._agent)};break;case"keyboard-interactive":t={type:e,username:r,prompt:(...t)=>this.emit("keyboard-interactive",...t)};break;case"none":t={type:e,username:r};break;default:return yt(`Skipping unsupported authentication method: ${t}`)}}else{if("object"!=typeof t||null===t)return yt(`Skipping invalid authentication attempt: ${t}`);{const e=t.username;if("string"!=typeof e)return yt(`Skipping invalid authentication attempt: ${t}`);const r=t.type;switch(r){case"password":{const{password:n}=t;if("string"!=typeof n&&!Buffer.isBuffer(n))return yt("Skipping invalid password auth attempt");t={type:r,username:e,password:n};break}case"publickey":{const n=k(t.key,t.passphrase);if(n instanceof Error)return yt("Skipping invalid key auth attempt");if(!n.isPrivateKey())return yt("Skipping non-private key");t={type:r,username:e,key:n};break}case"hostbased":{const{localHostname:n,localUsername:i}=t,s=k(t.key,t.passphrase);if(s instanceof Error||"string"!=typeof n||"string"!=typeof i)return yt("Skipping invalid hostbased auth attempt");if(!s.isPrivateKey())return yt("Skipping non-private key");t={type:r,username:e,key:s,localHostname:n,localUsername:i};break}case"agent":{let n=t.agent;if("string"==typeof n&&n.length)n=U(n);else if(!D(n))return yt(`Skipping invalid agent: ${t.agent}`);t={type:r,username:e,agentCtx:new x(n)};break}case"keyboard-interactive":{const{prompt:n}=t;if("function"!=typeof n)return yt("Skipping invalid keyboard-interactive auth attempt");t={type:r,username:e,prompt:n};break}case"none":t={type:r,username:e};break;default:return yt(`Skipping unsupported authentication method: ${t}`)}}}dt=t;try{const t=dt.username;switch(dt.type){case"password":rt.authPassword(t,dt.password);break;case"publickey":{let e;if(dt.keyAlgos=ot(this,dt.key,et),dt.keyAlgos){if(!dt.keyAlgos.length)return yt("Skipping key authentication (no mutual hash algorithm)");e=dt.keyAlgos[0][0]}rt.authPK(t,dt.key,e);break}case"hostbased":{let e,r;if(dt.keyAlgos=ot(this,dt.key,et),dt.keyAlgos){if(!dt.keyAlgos.length)return yt("Skipping hostbased authentication (no mutual hash algorithm)");[e,r]=dt.keyAlgos[0]}rt.authHostbased(t,dt.key,dt.localHostname,dt.localUsername,e,((t,e)=>{const n=dt.key.sign(t,r);if(n instanceof Error)return n.message=`Error while signing with key: ${n.message}`,n.level="client-authentication",this.emit("error",n),St();e(n)}));break}case"agent":dt.agentCtx.init((t=>{if(t)return t.level="agent",this.emit("error",t),St();bt()}));break;case"keyboard-interactive":rt.authKeyboard(t);break;case"none":rt.authNone(t)}}finally{Et=!1}}};function yt(t){s&&s(t),process.nextTick(St)}function St(){Et=!1;const t=i(At,gt,mt);Et||void 0===t||mt(t)}const bt=()=>{if("agent"===dt.type){const t=dt.agentCtx.nextKey();if(!1===t)s&&s("Agent: No more keys left to try"),s&&s("Client: agent auth failed"),St();else{const e=dt.agentCtx.pos();let r;if(dt.keyAlgos=ot(this,t,et),dt.keyAlgos){if(!dt.keyAlgos.length)return s&&s(`Agent: Skipping key #${e+1} (no mutual hash algorithm)`),void bt();r=dt.keyAlgos[0][0]}s&&s(`Agent: Trying key #${e+1}`),rt.authPK(dt.username,t,r)}}},wt=()=>{this.config.readyTimeout>0&&(this._readyTimeout=setTimeout((()=>{const t=new Error("Timed out while waiting for handshake");t.level="client-timeout",this.emit("error",t),N.destroy()}),this.config.readyTimeout))};if(t.sock)wt(),"boolean"==typeof N.connecting&&N.connecting||ft();else{let e=this.config.host;const r=this.config.forceIPv4,n=this.config.forceIPv6;s&&s(`Client: Trying ${e} on port ${this.config.port} ...`);const i=()=>{wt(),N.connect({host:e,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort}),N.setMaxListeners(0),N.setTimeout("number"==typeof t.timeout?t.timeout:0)};!r&&!n||r&&n?i():a(e,r?4:6,((t,n,s)=>{if(t){const n=new Error(`Error while looking up ${r?"IPv4":"IPv6"} address for '${e}': ${t}`);return clearTimeout(this._readyTimeout),n.level="client-dns",this.emit("error",n),void this.emit("close")}e=n,i()}))}return this}end(){return this._sock&&K(this._sock)&&(this._protocol.disconnect(E.BY_APPLICATION),this._sock.end()),this}destroy(){return this._sock&&K(this._sock)&&this._sock.destroy(),this}exec(t,e,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"==typeof e&&(r=e,e={}),J(this,"session",{allowHalfOpen:!1!==e.allowHalfOpen},((n,i)=>{if(n)return void r(n);const s=[];function o(t){if(t)return i.close(),void r(t);s.length&&s.shift()()}(!0===this.config.allowAgentFwd||e&&!0===e.agentForward&&void 0!==this._agent)&&s.push((()=>et(i,o))),"object"==typeof e&&null!==e&&("object"==typeof e.env&&null!==e.env&&rt(i,e.env),("object"==typeof e.pty&&null!==e.pty||!0===e.pty)&&s.push((()=>tt(i,e.pty,o))),("object"==typeof e.x11&&null!==e.x11||"number"===e.x11||!0===e.x11)&&s.push((()=>Z(i,e.x11,o)))),s.push((()=>function(t,e,r,n){"open"===t.outgoing.state?(t._callbacks.push((e=>{e?n(!0!==e?e:new Error("Unable to exec")):(t.subtype="exec",t.allowHalfOpen=!1!==r.allowHalfOpen,n(void 0,t))})),t._client._protocol.exec(t.outgoing.id,e,!0)):n(new Error("Channel is not open"))}(i,t,e,r))),s.shift()()})),this}shell(t,e,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"==typeof t?(r=t,t=e=void 0):"function"==typeof e&&(r=e,e=void 0),!t||void 0===t.x11&&void 0===t.env||(e=t,t=void 0),J(this,"session",((n,i)=>{if(n)return void r(n);const s=[];function o(t){if(t)return i.close(),void r(t);s.length&&s.shift()()}(!0===this.config.allowAgentFwd||e&&!0===e.agentForward&&void 0!==this._agent)&&s.push((()=>et(i,o))),!1!==t&&s.push((()=>tt(i,t,o))),"object"==typeof e&&null!==e&&("object"==typeof e.env&&null!==e.env&&rt(i,e.env),("object"==typeof e.x11&&null!==e.x11||"number"===e.x11||!0===e.x11)&&s.push((()=>Z(i,e.x11,o)))),s.push((()=>function(t,e){"open"===t.outgoing.state?(t._callbacks.push((r=>{r?e(!0!==r?r:new Error("Unable to open shell")):(t.subtype="shell",e(void 0,t))})),t._client._protocol.shell(t.outgoing.id,!0)):e(new Error("Channel is not open"))}(i,r))),s.shift()()})),this}subsys(t,e){if(!this._sock||!K(this._sock))throw new Error("Not connected");return J(this,"session",((r,n)=>{r?e(r):nt(n,t,((t,r)=>{t?e(t):e(void 0,r)}))})),this}forwardIn(t,e,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");const n="function"==typeof r;return n&&this._callbacks.push(((n,i)=>{if(n)return void r(!0!==n?n:new Error(`Unable to bind to ${t}:${e}`));let s=e;0===e&&i&&i.length>=4&&(s=N(i,0),this._protocol._compatFlags&l.DYN_RPORT_BUG||(e=s)),this._forwarding[`${t}:${e}`]=s,r(void 0,s)})),this._protocol.tcpipForward(t,e,n),this}unforwardIn(t,e,r){if(!this._sock||!K(this._sock))throw new Error("Not connected");const n="function"==typeof r;return n&&this._callbacks.push((n=>{n?r(!0!==n?n:new Error(`Unable to unbind from ${t}:${e}`)):(delete this._forwarding[`${t}:${e}`],r())})),this._protocol.cancelTcpipForward(t,e,n),this}forwardOut(t,e,r,n,i){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"!=typeof i&&(i=X),J(this,"direct-tcpip",{srcIP:t,srcPort:e,dstIP:r,dstPort:n},i),this}openssh_noMoreSessions(t){if(!this._sock||!K(this._sock))throw new Error("Not connected");const e="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&Y.test(this._remoteVer)?(e&&this._callbacks.push((e=>{e?t(!0!==e?e:new Error("Unable to disable future sessions")):t()})),this._protocol.openssh_noMoreSessions(e),this):e?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardInStreamLocal(t,e){if(!this._sock||!K(this._sock))throw new Error("Not connected");const r="function"==typeof e;return!this.config.strictVendor||this.config.strictVendor&&Y.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?e(!0!==r?r:new Error(`Unable to bind to ${t}`)):(this._forwardingUnix[t]=!0,e())})),this._protocol.openssh_streamLocalForward(t,r),this):r?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_unforwardInStreamLocal(t,e){if(!this._sock||!K(this._sock))throw new Error("Not connected");const r="function"==typeof e;return!this.config.strictVendor||this.config.strictVendor&&Y.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?e(!0!==r?r:new Error(`Unable to unbind from ${t}`)):(delete this._forwardingUnix[t],e())})),this._protocol.openssh_cancelStreamLocalForward(t,r),this):r?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardOutStreamLocal(t,e){if(!this._sock||!K(this._sock))throw new Error("Not connected");return"function"!=typeof e&&(e=X),!this.config.strictVendor||this.config.strictVendor&&Y.test(this._remoteVer)?(J(this,"direct-streamlocal@openssh.com",{socketPath:t},e),this):(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this)}sftp(t){if(!this._sock||!K(this._sock))throw new Error("Not connected");return J(this,"sftp",((e,r)=>{e?t(e):nt(r,"sftp",((e,n)=>{function i(){r.removeListener("ready",s),r.removeListener("error",o),r.removeListener("exit",a),r.removeListener("close",a)}function s(){i(),t(void 0,r)}function o(e){i(),t(e)}function a(e,r){let n;i(),n="number"==typeof e?`Received exit code ${e} while establishing SFTP session`:void 0!==r?`Received signal ${r} while establishing SFTP session`:"Received unexpected SFTP session termination";const s=new Error(n);s.code=e,s.signal=r,t(s)}e?t(e):(r.on("ready",s).on("error",o).on("exit",a).on("close",a),r._init())}))})),this}setNoDelay(t){return this._sock&&"function"==typeof this._sock.setNoDelay&&this._sock.setNoDelay(t),this}}},1980:(t,e,r)=>{"use strict";const{Agent:n}=r(8611),{Agent:i}=r(5692),{connect:s}=r(4756);let o;for(const t of[n,i]){class i extends t{constructor(t,e){super(e),this._connectCfg=t,this._defaultSrcIP=e&&e.srcIP||"localhost"}createConnection(e,n){const i=e&&e.localAddress||this._defaultSrcIP,s=e&&e.localPort||0,a=e.host,h=e.port;void 0===o&&(o=r(1818));const l=new o;let u=!1;l.on("ready",(()=>{l.forwardOut(i,s,a,h,((r,i)=>{if(u=!0,r)return l.end(),n(r);i.once("close",(()=>l.end())),n(null,c(i,t,e))}))})).on("error",n).on("close",(()=>{u||n(new Error("Unexpected connection close"))})).connect(this._connectCfg)}}e[t===n?"SSHTTPAgent":"SSHTTPSAgent"]=i}function a(){}function c(t,e,r){if(e===n)return t.setKeepAlive=a,t.setNoDelay=a,t.setTimeout=a,t.ref=a,t.unref=a,t.destroySoon=t.destroy,t;r.socket=t;const i=s(r),o=(()=>{let e=!1;return()=>{e||(e=!0,t.isPaused()&&t.resume())}})();return i.on("end",o).on("close",o),i}},7649:(t,e,r)=>{"use strict";const{AgentProtocol:n,BaseAgent:i,createAgent:s,CygwinAgent:o,OpenSSHAgent:a,PageantAgent:c}=r(7852),{SSHTTPAgent:h,SSHTTPSAgent:l}=r(1980),{parseKey:u}=r(8946),{flagsToString:f,OPEN_MODE:d,STATUS_CODE:p,stringToFlags:g}=r(4261);t.exports={AgentProtocol:n,BaseAgent:i,createAgent:s,Client:r(1818),CygwinAgent:o,HTTPAgent:h,HTTPSAgent:l,OpenSSHAgent:a,PageantAgent:c,Server:r(734),utils:{parseKey:u,...r(3314),sftp:{flagsToString:f,OPEN_MODE:d,STATUS_CODE:p,stringToFlags:g}}}},3314:(t,e,r)=>{"use strict";const{createCipheriv:n,generateKeyPair:i,generateKeyPairSync:s,getCurves:o,randomBytes:a}=r(6982),{Ber:c}=r(3100),h=r(4015).pbkdf,{CIPHER_INFO:l}=r(7785),u=o(),f=new Map(Object.entries(l));function d(t,e){if("string"!=typeof t)throw new TypeError("Key type must be a string");const r={type:"spki",format:"der"},n={type:"pkcs8",format:"der"};switch(t.toLowerCase()){case"rsa":{if("object"!=typeof e||null===e)throw new TypeError("Missing options object for RSA key");const t=e.bits;if(!Number.isInteger(t))throw new TypeError("RSA bits must be an integer");if(t<=0||t>16384)throw new RangeError("RSA bits must be non-zero and <= 16384");return["rsa",{modulusLength:t,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ecdsa":{if("object"!=typeof e||null===e)throw new TypeError("Missing options object for ECDSA key");if(!Number.isInteger(e.bits))throw new TypeError("ECDSA bits must be an integer");let t;switch(e.bits){case 256:t="prime256v1";break;case 384:t="secp384r1";break;case 521:t="secp521r1";break;default:throw new Error("ECDSA bits must be 256, 384, or 521")}if(!u.includes(t))throw new Error("Unsupported ECDSA bits value");return["ec",{namedCurve:t,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ed25519":return["ed25519",{publicKeyEncoding:r,privateKeyEncoding:n}];default:throw new Error(`Unsupported key type: ${t}`)}}function p(t,e,r,i){let s,o="new",l="";if("object"==typeof i&&null!==i&&("string"==typeof i.comment&&i.comment&&(l=i.comment),"string"==typeof i.format&&i.format&&(o=i.format),i.passphrase)){let t;if("string"==typeof i.passphrase)t=Buffer.from(i.passphrase);else{if(!Buffer.isBuffer(i.passphrase))throw new Error("Invalid passphrase");t=i.passphrase}if(void 0===i.cipher)throw new Error("Missing cipher name");const e=f.get(i.cipher);if(void 0===e)throw new Error("Invalid cipher name");if("new"===o){let r=16;if(void 0!==i.rounds){if(!Number.isInteger(i.rounds))throw new TypeError("rounds must be an integer");i.rounds>0&&(r=i.rounds)}const n=Buffer.allocUnsafe(e.keyLen+e.ivLen),o=a(16);if(0!==h(t,t.length,o,o.length,n,n.length,r))return new Error("Failed to generate information to encrypt key");const c=Buffer.allocUnsafe(4+o.length+4);{let t=0;c.writeUInt32BE(o.length,t+=0),c.set(o,t+=4),c.writeUInt32BE(r,t+=o.length)}s={cipher:e,cipherName:i.cipher,kdfName:"bcrypt",kdfOptions:c,key:n.slice(0,e.keyLen),iv:n.slice(e.keyLen)}}}if("new"===o){let i,o="-----BEGIN OPENSSH PRIVATE KEY-----\n";const h=Buffer.from(s?s.cipherName:"none"),u=Buffer.from(s?s.kdfName:"none"),f=s?s.kdfOptions:Buffer.alloc(0),d=s?s.cipher.blockLen:8,p=function(t,e,r){switch(t){case"rsa":{let t=new c.Reader(r);if(t.readSequence(),0!==t.readInt())throw new Error("Unsupported version in RSA private key");if(t.readSequence(),"1.2.840.113549.1.1.1"!==t.readOID())throw new Error("Bad RSA private OID");if(t.readByte()!==c.Null)throw new Error("Malformed RSA private key (expected null)");if(0!==t.readByte())throw new Error("Malformed RSA private key (expected zero-length null)");if(t=new c.Reader(t.readString(c.OctetString,!0)),t.readSequence(),0!==t.readInt())throw new Error("Unsupported version in RSA private key");const e=t.readString(c.Integer,!0),n=t.readString(c.Integer,!0),i=t.readString(c.Integer,!0),s=t.readString(c.Integer,!0),o=t.readString(c.Integer,!0);t.readString(c.Integer,!0),t.readString(c.Integer,!0);const a=t.readString(c.Integer,!0),h=Buffer.from("ssh-rsa"),l=Buffer.allocUnsafe(4+h.length+4+e.length+4+n.length+4+i.length+4+a.length+4+s.length+4+o.length);let u=0;l.writeUInt32BE(h.length,u+=0),l.set(h,u+=4),l.writeUInt32BE(e.length,u+=h.length),l.set(e,u+=4),l.writeUInt32BE(n.length,u+=e.length),l.set(n,u+=4),l.writeUInt32BE(i.length,u+=n.length),l.set(i,u+=4),l.writeUInt32BE(a.length,u+=i.length),l.set(a,u+=4),l.writeUInt32BE(s.length,u+=a.length),l.set(s,u+=4),l.writeUInt32BE(o.length,u+=s.length),l.set(o,u+=4);const f=Buffer.allocUnsafe(4+h.length+4+n.length+4+e.length);return u=0,f.writeUInt32BE(h.length,u+=0),f.set(h,u+=4),f.writeUInt32BE(n.length,u+=h.length),f.set(n,u+=4),f.writeUInt32BE(e.length,u+=n.length),f.set(e,u+=4),{sshName:h.toString(),priv:l,pub:f}}case"ec":{let t=new c.Reader(e);if(t.readSequence(),t.readSequence(),"1.2.840.10045.2.1"!==t.readOID())throw new Error("Bad ECDSA public OID");t.readOID();let n,i=t.readString(c.BitString,!0);{let t=0;for(;t<i.length&&0===i[t];++t);t>0&&(i=i.slice(t))}if(t=new c.Reader(r),t.readSequence(),0!==t.readInt())throw new Error("Unsupported version in ECDSA private key");if(t.readSequence(),"1.2.840.10045.2.1"!==t.readOID())throw new Error("Bad ECDSA private OID");switch(t.readOID()){case"1.2.840.10045.3.1.7":n="nistp256";break;case"1.3.132.0.34":n="nistp384";break;case"1.3.132.0.35":n="nistp521";break;default:throw new Error("Unsupported curve in ECDSA private key")}if(t=new c.Reader(t.readString(c.OctetString,!0)),t.readSequence(),1!==t.readInt())throw new Error("Unsupported version in ECDSA private key");const s=Buffer.concat([Buffer.from([0]),t.readString(c.OctetString,!0)]),o=Buffer.from(`ecdsa-sha2-${n}`);n=Buffer.from(n);const a=Buffer.allocUnsafe(4+o.length+4+n.length+4+i.length+4+s.length);let h=0;a.writeUInt32BE(o.length,h+=0),a.set(o,h+=4),a.writeUInt32BE(n.length,h+=o.length),a.set(n,h+=4),a.writeUInt32BE(i.length,h+=n.length),a.set(i,h+=4),a.writeUInt32BE(s.length,h+=i.length),a.set(s,h+=4);const l=Buffer.allocUnsafe(4+o.length+4+n.length+4+i.length);return h=0,l.writeUInt32BE(o.length,h+=0),l.set(o,h+=4),l.writeUInt32BE(n.length,h+=o.length),l.set(n,h+=4),l.writeUInt32BE(i.length,h+=n.length),l.set(i,h+=4),{sshName:o.toString(),priv:a,pub:l}}case"ed25519":{let t=new c.Reader(e);if(t.readSequence(),t.readSequence(),"1.3.101.112"!==t.readOID())throw new Error("Bad ED25519 public OID");let n=t.readString(c.BitString,!0);{let t=0;for(;t<n.length&&0===n[t];++t);t>0&&(n=n.slice(t))}if(t=new c.Reader(r),t.readSequence(),0!==t.readInt())throw new Error("Unsupported version in ED25519 private key");if(t.readSequence(),"1.3.101.112"!==t.readOID())throw new Error("Bad ED25519 private OID");t=new c.Reader(t.readString(c.OctetString,!0));const i=t.readString(c.OctetString,!0),s=Buffer.from("ssh-ed25519"),o=Buffer.allocUnsafe(4+s.length+4+n.length+4+(i.length+n.length));let a=0;o.writeUInt32BE(s.length,a+=0),o.set(s,a+=4),o.writeUInt32BE(n.length,a+=s.length),o.set(n,a+=4),o.writeUInt32BE(i.length+n.length,a+=n.length),o.set(i,a+=4),o.set(n,a+=i.length);const h=Buffer.allocUnsafe(4+s.length+4+n.length);return a=0,h.writeUInt32BE(s.length,a+=0),h.set(s,a+=4),h.writeUInt32BE(n.length,a+=s.length),h.set(n,a+=4),{sshName:s.toString(),priv:o,pub:h}}}}(t,e,r),g=a(4),A=Buffer.from(l),_=8+p.priv.length+4+A.length;let E=[];for(let t=1;(_+E.length)%d;++t)E.push(255&t);E=Buffer.from(E);let m,y=Buffer.allocUnsafe(_+E.length);{let t=0;y.set(g,t+=0),y.set(g,t+=4),y.set(p.priv,t+=4),y.writeUInt32BE(A.length,t+=p.priv.length),y.set(A,t+=4),y.set(E,t+=A.length)}if(s){const t={authTagLength:s.cipher.authLen},e=n(s.cipher.sslName,s.key,s.iv,t);e.setAutoPadding(!1),y=Buffer.concat([e.update(y),e.final()]),m=s.cipher.authLen>0?e.getAuthTag():Buffer.alloc(0),s.key.fill(0),s.iv.fill(0)}else m=Buffer.alloc(0);const S=Buffer.from("openssh-key-v1\0"),b=Buffer.allocUnsafe(S.length+4+h.length+4+u.length+4+f.length+4+4+p.pub.length+4+y.length+m.length);{let t=0;b.set(S,t+=0),b.writeUInt32BE(h.length,t+=S.length),b.set(h,t+=4),b.writeUInt32BE(u.length,t+=h.length),b.set(u,t+=4),b.writeUInt32BE(f.length,t+=u.length),b.set(f,t+=4),b.writeUInt32BE(1,t+=f.length),b.writeUInt32BE(p.pub.length,t+=4),b.set(p.pub,t+=4),b.writeUInt32BE(y.length,t+=p.pub.length),b.set(y,t+=4),b.set(m,t+=y.length)}{const t=b.base64Slice(0,b.length);let e=t.replace(/.{64}/g,"$&\n");63&t.length&&(e+="\n"),o+=e}{const t=p.pub.base64Slice(0,p.pub.length);i=`${p.sshName} ${t}${l?` ${l}`:""}`}return o+="-----END OPENSSH PRIVATE KEY-----\n",{private:o,public:i}}throw new Error("Invalid output key format")}function g(){}t.exports={generateKeyPair:(t,e,r)=>{"function"==typeof e&&(r=e,e=void 0),"function"!=typeof r&&(r=g);const n=d(t,e);i(...n,((t,i,s)=>{if(t)return r(t);let o;try{o=p(n[0],i,s,e)}catch(t){return r(t)}r(null,o)}))},generateKeyPairSync:(t,e)=>{const r=d(t,e),{publicKey:n,privateKey:i}=s(...r);return p(r[0],n,i,e)}}},6008:(t,e,r)=>{"use strict";const{inspect:n}=r(9023),{bindingAvailable:i,NullCipher:s,NullDecipher:o}=r(7785),{COMPAT_CHECKS:a,DISCONNECT_REASON:c,eddsaSupported:h,MESSAGE:l,SIGNALS:u,TERMINAL_MODE:f}=r(2535),{DEFAULT_KEXINIT_CLIENT:d,DEFAULT_KEXINIT_SERVER:p,KexInit:g,kexinit:A,onKEXPayload:_}=r(8818),{parseKey:E}=r(8946),m=r(2569),{bufferCopy:y,bufferFill:S,bufferSlice:b,convertSignature:w,sendPacket:v,writeUInt32BE:I}=r(5623),{PacketReader:C,PacketWriter:k,ZlibPacketReader:R,ZlibPacketWriter:B}=r(3129),O=r(8342).rE,T=new Map(Object.values(c).map((t=>[t,1]))),N=Buffer.from(`SSH-2.0-ssh2js${O}`),L=Buffer.from(`${N}\r\n`),P=Buffer.from([l.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),x=Buffer.from([f.TTY_OP_END]);function U(){}const D=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function H(t,e,r){let i,s;this._buffer?(i=Buffer.allocUnsafe(this._buffer.length+(r-e)),i.set(this._buffer,0),0===e?i.set(t,this._buffer.length):i.set(new Uint8Array(t.buffer,t.byteOffset+e,r-e),this._buffer.length),s=this._buffer.length,e=0):(i=t,s=0);const a=e;let c=e,h=e,l=!1,u=0,f=0;for(;e<i.length;++e){const t=i[e];if(13!==t){if(10===t){if(h>c&&h-c>4&&83===i[c]&&83===i[c+1]&&72===i[c+2]&&45===i[c+3]){const t=i.latin1Slice(a,h+1),l=c===a?t:t.slice(c-a),u=D.exec(l);if(!u)throw new Error("Invalid identification string");const f={greeting:c===a?"":t.slice(0,c-a),identRaw:l,versions:{protocol:u[1],software:u[2]},comments:u[3]};return this._remoteIdentRaw=Buffer.from(l),this._debug&&this._debug(`Remote ident: ${n(l)}`),this._compatFlags=Q(f),this._buffer=void 0,this._decipher=new o(0,_.bind(this,{firstPacket:!0})),this._parse=F,this._onHeader(f),this._destruct?(A(this),e+1-s):r}if(this._server)throw new Error("Greetings from clients not permitted");if(++f>1024)throw new Error("Max greeting lines exceeded");l=!1,c=e+1,u=0}else{if(l)throw new Error("Invalid header: expected newline");if(++u>=8192)throw new Error("Header line too long")}h=e}else l=!0}return this._buffer||(this._buffer=b(i,a)),e-s}function F(t,e,r){return this._decipher.decrypt(t,e,r)}function M(t){if(this._onPacket(),0===t.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));const e=(t=this._packetRW.read.read(t))[0];e!==l.USERAUTH_SUCCESS||this._server||this._authenticated||(this._authenticated=!0,"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.write=new B(this)),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.read=new R));const r=m[e];if(void 0!==r)return r(this,t);this._debug&&this._debug(`Inbound: Unsupported message type: ${e}`)}function Q(t){const e=t.versions.software;let r=0;for(const t of a)"string"==typeof t[0]?e===t[0]&&(r|=t[1]):t[0].test(e)&&(r|=t[1]);return r}t.exports=class{constructor(t){const e=t.onWrite;if("function"!=typeof e)throw new Error("Missing onWrite function");this._onWrite=t=>{e(t)};const r=t.onError;if("function"!=typeof r)throw new Error("Missing onError function");this._onError=t=>{r(t)};const o=t.debug;this._debug="function"==typeof o?t=>{o(t)}:void 0;const a=t.onHeader;this._onHeader="function"==typeof a?(...t)=>{a(...t)}:U;const c=t.onPacket;this._onPacket="function"==typeof c?()=>{c()}:U;let u,f=t.onHandshakeComplete;"function"!=typeof f&&(f=U),this._onHandshakeComplete=(...t)=>{this._debug&&this._debug("Handshake completed"),u=void 0===u;const e=this._queue;if(e){this._queue=void 0,this._debug&&this._debug(`Draining outbound queue (${e.length}) ...`);for(let t=0;t<e.length;++t){const r=e[t];let n=this._packetRW.write.finalize(r);if(n===r){const t=this._cipher.allocPacket(r.length);t.set(r,5),n=t}v(this,n)}this._debug&&this._debug("... finished draining outbound queue")}u&&this._server&&this._kex.remoteExtInfoEnabled&&function(t){let e="ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss";h&&(e=`ssh-ed25519,${e}`);const r=Buffer.byteLength(e);let n=t._packetRW.write.allocStart;const i=t._packetRW.write.alloc(28+r);i[n]=l.EXT_INFO,I(i,1,++n),I(i,15,n+=4),i.utf8Write("server-sig-algs",n+=4,15),I(i,r,n+=15),i.utf8Write(e,n+=4,r),t._debug&&t._debug("Outbound: Sending EXT_INFO"),v(t,t._packetRW.write.finalize(i))}(this),f(...t)},this._queue=void 0;const A=t.messageHandlers;let _;if(this._handlers="object"==typeof A&&null!==A?A:{},this._onPayload=M.bind(this),this._server=!!t.server,this._banner=void 0,this._server){if("object"!=typeof t.hostKeys||null===t.hostKeys)throw new Error("Missing server host key(s)");this._hostKeys=t.hostKeys,"string"==typeof t.greeting&&t.greeting.length&&(_="\r\n"===t.greeting.slice(-2)?t.greeting:`${t.greeting}\r\n`),"string"==typeof t.banner&&t.banner.length&&(this._banner="\r\n"===t.banner.slice(-2)?t.banner:`${t.banner}\r\n`)}else this._hostKeys=void 0;let E,m=t.offer;if("object"!=typeof m||null===m?m=this._server?p:d:m.constructor!==g&&(this._server||(m.kex=m.kex.concat(["ext-info-c"])),m=new g(m)),this._kex=void 0,this._kexinit=void 0,this._offer=m,this._cipher=new s(0,this._onWrite),this._decipher=void 0,this._skipNextInboundPacket=!1,this._packetRW={read:new C,write:new k(this)},this._hostVerifier=this._server||"function"!=typeof t.hostVerifier?void 0:t.hostVerifier,this._parse=H,this._buffer=void 0,this._authsQueue=[],this._authenticated=!1,this._remoteIdentRaw=void 0,"string"==typeof t.ident)this._identRaw=Buffer.from(`SSH-2.0-${t.ident}`),E=Buffer.allocUnsafe(this._identRaw.length+2),E.set(this._identRaw,0),E[E.length-2]=13,E[E.length-1]=10;else if(Buffer.isBuffer(t.ident)){const e=Buffer.allocUnsafe(8+t.ident.length);e.latin1Write("SSH-2.0-",0,8),e.set(t.ident,8),this._identRaw=e,E=Buffer.allocUnsafe(e.length+2),E.set(e,0),E[E.length-2]=13,E[E.length-1]=10}else this._identRaw=N,E=L;this._compatFlags=0,this._debug&&(i?this._debug("Custom crypto binding available"):this._debug("Custom crypto binding not available")),this._debug&&this._debug(`Local ident: ${n(this._identRaw.toString())}`),this.start=()=>{this.start=void 0,_&&this._onWrite(_),this._onWrite(E)}}_destruct(t){this._packetRW.read.cleanup(),this._packetRW.write.cleanup(),this._cipher&&this._cipher.free(),this._decipher&&this._decipher.free(),"string"==typeof t&&0!==t.length||(t="fatal error"),this.parse=()=>{throw new Error(`Instance unusable after ${t}`)},this._onWrite=()=>{throw new Error(`Instance unusable after ${t}`)},this._destruct=void 0}cleanup(){this._destruct&&this._destruct()}parse(t,e,r){for(;e<r;)e=this._parse(t,e,r)}disconnect(t){let e=this._packetRW.write.allocStartKEX;const r=this._packetRW.write.alloc(13,!0),n=e+13;T.has(t)||(t=c.PROTOCOL_ERROR),r[e]=l.DISCONNECT,I(r,t,++e),r.fill(0,e+=4,n),this._debug&&this._debug(`Outbound: Sending DISCONNECT (${t})`),v(this,this._packetRW.write.finalize(r,!0),!0)}ping(){const t=this._packetRW.write.allocStart,e=this._packetRW.write.alloc(P.length);e.set(P,t),this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)"),v(this,this._packetRW.write.finalize(e))}rekey(){void 0===this._kexinit?(this._debug&&this._debug("Outbound: Initiated explicit rekey"),this._queue=[],A(this)):this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}requestSuccess(t){let e,r=this._packetRW.write.allocStart;Buffer.isBuffer(t)?(e=this._packetRW.write.alloc(1+t.length),e[r]=l.REQUEST_SUCCESS,e.set(t,++r)):(e=this._packetRW.write.alloc(1),e[r]=l.REQUEST_SUCCESS),this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS"),v(this,this._packetRW.write.finalize(e))}requestFailure(){const t=this._packetRW.write.allocStart,e=this._packetRW.write.alloc(1);e[t]=l.REQUEST_FAILURE,this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE"),v(this,this._packetRW.write.finalize(e))}channelSuccess(t){let e=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[e]=l.CHANNEL_SUCCESS,I(r,t,++e),this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${t})`),v(this,this._packetRW.write.finalize(r))}channelFailure(t){let e=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[e]=l.CHANNEL_FAILURE,I(r,t,++e),this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${t})`),v(this,this._packetRW.write.finalize(r))}channelEOF(t){let e=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[e]=l.CHANNEL_EOF,I(r,t,++e),this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${t})`),v(this,this._packetRW.write.finalize(r))}channelClose(t){let e=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[e]=l.CHANNEL_CLOSE,I(r,t,++e),this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${t})`),v(this,this._packetRW.write.finalize(r))}channelWindowAdjust(t,e){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(9);n[r]=l.CHANNEL_WINDOW_ADJUST,I(n,t,++r),I(n,e,r+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${t}, ${e})`),v(this,this._packetRW.write.finalize(n))}channelData(t,e){const r=Buffer.isBuffer(e),n=r?e.length:Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(9+n);s[i]=l.CHANNEL_DATA,I(s,t,++i),I(s,n,i+=4),r?s.set(e,i+=4):s.utf8Write(e,i+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${t}, ${n})`),v(this,this._packetRW.write.finalize(s))}channelExtData(t,e,r){const n=Buffer.isBuffer(e),i=n?e.length:Buffer.byteLength(e);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(13+i);o[s]=l.CHANNEL_EXTENDED_DATA,I(o,t,++s),I(o,r,s+=4),I(o,i,s+=4),n?o.set(e,s+=4):o.utf8Write(e,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${t})`),v(this,this._packetRW.write.finalize(o))}channelOpenConfirm(t,e,r,n){let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(17);s[i]=l.CHANNEL_OPEN_CONFIRMATION,I(s,t,++i),I(s,e,i+=4),I(s,r,i+=4),I(s,n,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${t}, l:${e})`),v(this,this._packetRW.write.finalize(s))}channelOpenFail(t,e,r){"string"!=typeof r&&(r="");const n=Buffer.byteLength(r);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(13+n+4);s[i]=l.CHANNEL_OPEN_FAILURE,I(s,t,++i),I(s,e,i+=4),I(s,n,i+=4),i+=4,n&&(s.utf8Write(r,i,n),i+=n),I(s,0,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${t})`),v(this,this._packetRW.write.finalize(s))}service(t){if(this._server)throw new Error("Client-only method called in server mode");const e=Buffer.byteLength(t);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+e);n[r]=l.SERVICE_REQUEST,I(n,e,++r),n.utf8Write(t,r+=4,e),this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${t})`),v(this,this._packetRW.write.finalize(n))}authPassword(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t),i=Buffer.byteLength(e),s=r?Buffer.byteLength(r):0;let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+n+4+14+4+8+1+4+i+(r?4+s:0));a[o]=l.USERAUTH_REQUEST,I(a,n,++o),a.utf8Write(t,o+=4,n),I(a,14,o+=n),a.utf8Write("ssh-connection",o+=4,14),I(a,8,o+=14),a.utf8Write("password",o+=4,8),a[o+=8]=r?1:0,I(a,i,++o),Buffer.isBuffer(e)?y(e,a,0,i,o+=4):a.utf8Write(e,o+=4,i),r?(I(a,s,o+=i),Buffer.isBuffer(r)?y(r,a,0,s,o+=4):a.utf8Write(r,o+=4,s),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")):this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)"),this._authsQueue.push("password"),v(this,this._packetRW.write.finalize(a))}authPK(t,e,r,n){if(this._server)throw new Error("Client-only method called in server mode");if((e=E(e))instanceof Error)throw new Error("Invalid key");const i=e.type;e=e.getPublicSSH(),"function"==typeof r&&(n=r,r=void 0),r||(r=i);const s=Buffer.byteLength(t),o=Buffer.byteLength(r),a=e.length,c=this._kex.sessionID,h=c.length,u=(n?4+h:0)+1+4+s+4+14+4+9+1+4+o+4+a;let f,d;if(n?(f=Buffer.allocUnsafe(u),d=0,I(f,h,d),f.set(c,d+=4),d+=h):(f=this._packetRW.write.alloc(u),d=this._packetRW.write.allocStart),f[d]=l.USERAUTH_REQUEST,I(f,s,++d),f.utf8Write(t,d+=4,s),I(f,14,d+=s),f.utf8Write("ssh-connection",d+=4,14),I(f,9,d+=14),f.utf8Write("publickey",d+=4,9),f[d+=9]=n?1:0,I(f,o,++d),f.utf8Write(r,d+=4,o),I(f,a,d+=o),f.set(e,d+=4),!n)return this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)"),void v(this,this._packetRW.write.finalize(f));n(f,(n=>{if(!1===(n=w(n,i)))throw new Error("Error while converting handshake signature");const c=n.length;d=this._packetRW.write.allocStart,f=this._packetRW.write.alloc(5+s+4+14+4+9+1+4+o+4+a+4+4+o+4+c),f[d]=l.USERAUTH_REQUEST,I(f,s,++d),f.utf8Write(t,d+=4,s),I(f,14,d+=s),f.utf8Write("ssh-connection",d+=4,14),I(f,9,d+=14),f.utf8Write("publickey",d+=4,9),f[d+=9]=1,I(f,o,++d),f.utf8Write(r,d+=4,o),I(f,a,d+=o),f.set(e,d+=4),I(f,4+o+4+c,d+=a),I(f,o,d+=4),f.utf8Write(r,d+=4,o),I(f,c,d+=o),f.set(n,d+=4),this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)"),v(this,this._packetRW.write.finalize(f))}))}authHostbased(t,e,r,n,i,s){if(this._server)throw new Error("Client-only method called in server mode");if((e=E(e))instanceof Error)throw new Error("Invalid key");const o=e.type;e=e.getPublicSSH(),"function"==typeof i&&(s=i,i=void 0),i||(i=o);const a=Buffer.byteLength(t),c=Buffer.byteLength(i),h=e.length,u=this._kex.sessionID,f=u.length,d=Buffer.byteLength(r),p=Buffer.byteLength(n),g=Buffer.allocUnsafe(4+f+1+4+a+4+14+4+9+4+c+4+h+4+d+4+p);let A=0;I(g,f,A),g.set(u,A+=4),g[A+=f]=l.USERAUTH_REQUEST,I(g,a,++A),g.utf8Write(t,A+=4,a),I(g,14,A+=a),g.utf8Write("ssh-connection",A+=4,14),I(g,9,A+=14),g.utf8Write("hostbased",A+=4,9),I(g,c,A+=9),g.utf8Write(i,A+=4,c),I(g,h,A+=c),g.set(e,A+=4),I(g,d,A+=h),g.utf8Write(r,A+=4,d),I(g,p,A+=d),g.utf8Write(n,A+=4,p),s(g,(t=>{if(!(t=w(t,o)))throw new Error("Error while converting handshake signature");const e=t.length,r=g.length-f-4;A=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(r+4+4+c+4+e);y(g,n,4+f,g.length,A),I(n,4+c+4+e,A+=r),I(n,c,A+=4),n.utf8Write(i,A+=4,c),I(n,e,A+=c),n.set(t,A+=4),this._authsQueue.push("hostbased"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)"),v(this,this._packetRW.write.finalize(n))}))}authKeyboard(t){if(this._server)throw new Error("Client-only method called in server mode");const e=Buffer.byteLength(t);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+e+4+14+4+20+4+4);n[r]=l.USERAUTH_REQUEST,I(n,e,++r),n.utf8Write(t,r+=4,e),I(n,14,r+=e),n.utf8Write("ssh-connection",r+=4,14),I(n,20,r+=14),n.utf8Write("keyboard-interactive",r+=4,20),I(n,0,r+=20),I(n,0,r+=4),this._authsQueue.push("keyboard-interactive"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)"),v(this,this._packetRW.write.finalize(n))}authNone(t){if(this._server)throw new Error("Client-only method called in server mode");const e=Buffer.byteLength(t);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+e+4+14+4+4);n[r]=l.USERAUTH_REQUEST,I(n,e,++r),n.utf8Write(t,r+=4,e),I(n,14,r+=e),n.utf8Write("ssh-connection",r+=4,14),I(n,4,r+=14),n.utf8Write("none",r+=4,4),this._authsQueue.push("none"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)"),v(this,this._packetRW.write.finalize(n))}authInfoRes(t){if(this._server)throw new Error("Client-only method called in server mode");let e,r=0;if(t){e=new Array(t.length);for(let n=0;n<t.length;++n){const i=Buffer.byteLength(t[n]);e[n]=i,r+=4+i}}let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r);if(i[n]=l.USERAUTH_INFO_RESPONSE,t){I(i,t.length,++n),n+=4;for(let r=0;r<t.length;++r){const s=e[r];I(i,s,n),n+=4,s&&(i.utf8Write(t[r],n,s),n+=s)}}else I(i,0,++n);this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE"),v(this,this._packetRW.write.finalize(i))}tcpipForward(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(23+n+4);s[i]=l.GLOBAL_REQUEST,I(s,13,++i),s.utf8Write("tcpip-forward",i+=4,13),s[i+=13]=void 0===r||!0===r?1:0,I(s,n,++i),s.utf8Write(t,i+=4,n),I(s,e,i+=n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)"),v(this,this._packetRW.write.finalize(s))}cancelTcpipForward(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(30+n+4);s[i]=l.GLOBAL_REQUEST,I(s,20,++i),s.utf8Write("cancel-tcpip-forward",i+=4,20),s[i+=20]=void 0===r||!0===r?1:0,I(s,n,++i),s.utf8Write(t,i+=4,n),I(s,e,i+=n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)"),v(this,this._packetRW.write.finalize(s))}openssh_streamLocalForward(t,e){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(41+r);i[n]=l.GLOBAL_REQUEST,I(i,31,++n),i.utf8Write("streamlocal-forward@openssh.com",n+=4,31),i[n+=31]=void 0===e||!0===e?1:0,I(i,r,++n),i.utf8Write(t,n+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),v(this,this._packetRW.write.finalize(i))}openssh_cancelStreamLocalForward(t,e){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(48+r);i[n]=l.GLOBAL_REQUEST,I(i,38,++n),i.utf8Write("cancel-streamlocal-forward@openssh.com",n+=4,38),i[n+=38]=void 0===e||!0===e?1:0,I(i,r,++n),i.utf8Write(t,n+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),v(this,this._packetRW.write.finalize(i))}directTcpip(t,e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(n.srcIP),s=Buffer.byteLength(n.dstIP);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(33+i+4+4+s+4);a[o]=l.CHANNEL_OPEN,I(a,12,++o),a.utf8Write("direct-tcpip",o+=4,12),I(a,t,o+=12),I(a,e,o+=4),I(a,r,o+=4),I(a,s,o+=4),a.utf8Write(n.dstIP,o+=4,s),I(a,n.dstPort,o+=s),I(a,i,o+=4),a.utf8Write(n.srcIP,o+=4,i),I(a,n.srcPort,o+=i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, direct-tcpip)`),v(this,this._packetRW.write.finalize(a))}openssh_directStreamLocal(t,e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(n.socketPath);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(51+i+4+4);o[s]=l.CHANNEL_OPEN,I(o,30,++s),o.utf8Write("direct-streamlocal@openssh.com",s+=4,30),I(o,t,s+=30),I(o,e,s+=4),I(o,r,s+=4),I(o,i,s+=4),o.utf8Write(n.socketPath,s+=4,i),S(o,0,s+=i,s+8),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, direct-streamlocal@openssh.com)`),v(this,this._packetRW.write.finalize(o))}openssh_noMoreSessions(t){if(this._server)throw new Error("Client-only method called in server mode");let e=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(34);r[e]=l.GLOBAL_REQUEST,I(r,28,++e),r.utf8Write("no-more-sessions@openssh.com",e+=4,28),r[e+=28]=void 0===t||!0===t?1:0,this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)"),v(this,this._packetRW.write.finalize(r))}session(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(24);i[n]=l.CHANNEL_OPEN,I(i,7,++n),i.utf8Write("session",n+=4,7),I(i,t,n+=7),I(i,e,n+=4),I(i,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, session)`),v(this,this._packetRW.write.finalize(i))}windowChange(t,e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(39);o[s]=l.CHANNEL_REQUEST,I(o,t,++s),I(o,13,s+=4),o.utf8Write("window-change",s+=4,13),o[s+=13]=0,I(o,r,++s),I(o,e,s+=4),I(o,i,s+=4),I(o,n,s+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, window-change)`),v(this,this._packetRW.write.finalize(o))}pty(t,e,r,n,i,s,o,a){if(this._server)throw new Error("Client-only method called in server mode");s&&s.length||(s="vt100"),!o||Buffer.isBuffer(o)||Array.isArray(o)||"object"!=typeof o||null===o||(o=function(t){const e=Object.keys(t),r=Buffer.allocUnsafe(5*e.length+1);let n=0;for(let i=0;i<e.length;++i){const s=e[i];if("TTY_OP_END"===s)continue;const o=f[s];if(void 0===o)continue;const a=t[s];"number"==typeof a&&isFinite(a)&&(r[n++]=o,r[n++]=a>>>24,r[n++]=a>>>16,r[n++]=a>>>8,r[n++]=a)}return r[n++]=f.TTY_OP_END,n<r.length?b(r,0,n):r}(o)),o&&o.length||(o=x);const c=s.length,h=o.length;let u=this._packetRW.write.allocStart;const d=this._packetRW.write.alloc(21+c+4+4+4+4+4+h);if(d[u]=l.CHANNEL_REQUEST,I(d,t,++u),I(d,7,u+=4),d.utf8Write("pty-req",u+=4,7),d[u+=7]=void 0===a||!0===a?1:0,I(d,c,++u),d.utf8Write(s,u+=4,c),I(d,r,u+=c),I(d,e,u+=4),I(d,i,u+=4),I(d,n,u+=4),I(d,h,u+=4),u+=4,Array.isArray(o))for(let t=0;t<h;++t)d[u++]=o[t];else Buffer.isBuffer(o)&&d.set(o,u);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, pty-req)`),v(this,this._packetRW.write.finalize(d))}shell(t,e){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(15);n[r]=l.CHANNEL_REQUEST,I(n,t,++r),I(n,5,r+=4),n.utf8Write("shell",r+=4,5),n[r+=5]=void 0===e||!0===e?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, shell)`),v(this,this._packetRW.write.finalize(n))}exec(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.isBuffer(e),i=n?e.length:Buffer.byteLength(e);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(18+i);o[s]=l.CHANNEL_REQUEST,I(o,t,++s),I(o,4,s+=4),o.utf8Write("exec",s+=4,4),o[s+=4]=void 0===r||!0===r?1:0,I(o,i,++s),n?o.set(e,s+=4):o.utf8Write(e,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, exec: ${e})`),v(this,this._packetRW.write.finalize(o))}signal(t,e){if(this._server)throw new Error("Client-only method called in server mode");const r=e;if("SIG"===(e=e.toUpperCase()).slice(0,3)&&(e=e.slice(3)),1!==u[e])throw new Error(`Invalid signal: ${r}`);const n=e.length;let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(20+n);s[i]=l.CHANNEL_REQUEST,I(s,t,++i),I(s,6,i+=4),s.utf8Write("signal",i+=4,6),s[i+=6]=0,I(s,n,++i),s.utf8Write(e,i+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, signal: ${e})`),v(this,this._packetRW.write.finalize(s))}env(t,e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e),s=Buffer.isBuffer(r),o=s?r.length:Buffer.byteLength(r);let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(17+i+4+o);c[a]=l.CHANNEL_REQUEST,I(c,t,++a),I(c,3,a+=4),c.utf8Write("env",a+=4,3),c[a+=3]=void 0===n||!0===n?1:0,I(c,i,++a),c.utf8Write(e,a+=4,i),I(c,o,a+=i),s?c.set(r,a+=4):c.utf8Write(r,a+=4,o),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, env: ${e}=${r})`),v(this,this._packetRW.write.finalize(c))}x11Forward(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=e.protocol,i=e.cookie,s=Buffer.isBuffer(n),o=s?n.length:Buffer.byteLength(n),a=Buffer.isBuffer(i),c=a?i.length:Buffer.byteLength(i);let h=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(22+o+4+c+4);u[h]=l.CHANNEL_REQUEST,I(u,t,++h),I(u,7,h+=4),u.utf8Write("x11-req",h+=4,7),u[h+=7]=void 0===r||!0===r?1:0,u[++h]=e.single?1:0,I(u,o,++h),s?u.set(n,h+=4):u.utf8Write(n,h+=4,o),I(u,c,h+=o),a?u.set(i,h+=4):u.latin1Write(i,h+=4,c),I(u,e.screen||0,h+=c),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, x11-req)`),v(this,this._packetRW.write.finalize(u))}subsystem(t,e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(23+n);s[i]=l.CHANNEL_REQUEST,I(s,t,++i),I(s,9,i+=4),s.utf8Write("subsystem",i+=4,9),s[i+=9]=void 0===r||!0===r?1:0,I(s,n,++i),s.utf8Write(e,i+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, subsystem: ${e})`),v(this,this._packetRW.write.finalize(s))}openssh_agentForward(t,e){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(36);n[r]=l.CHANNEL_REQUEST,I(n,t,++r),I(n,26,r+=4),n.utf8Write("auth-agent-req@openssh.com",r+=4,26),n[r+=26]=void 0===e||!0===e?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, auth-agent-req@openssh.com)`),v(this,this._packetRW.write.finalize(n))}openssh_hostKeysProve(t){if(this._server)throw new Error("Client-only method called in server mode");let e=0;const r=[];for(const n of t){const t=n.getPublicSSH();e+=4+t.length,r.push(t)}let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(35+e);i[n]=l.GLOBAL_REQUEST,I(i,29,++n),i.utf8Write("hostkeys-prove-00@openssh.com",n+=4,29),i[n+=29]=1,++n;for(const t of r)I(i,t.length,n),y(t,i,0,t.length,n+=4),n+=t.length;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)"),v(this,this._packetRW.write.finalize(i))}serviceAccept(t){if(!this._server)throw new Error("Server-only method called in client mode");const e=Buffer.byteLength(t);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+e);if(n[r]=l.SERVICE_ACCEPT,I(n,e,++r),n.utf8Write(t,r+=4,e),this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${t})`),v(this,this._packetRW.write.finalize(n)),this._server&&this._banner&&"ssh-userauth"===t){const t=this._banner;this._banner=void 0;const e=Buffer.byteLength(t);r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+e+4);n[r]=l.USERAUTH_BANNER,I(n,e,++r),n.utf8Write(t,r+=4,e),I(n,0,r+=e),this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER"),v(this,this._packetRW.write.finalize(n))}}forwardedTcpip(t,e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.boundAddr),s=Buffer.byteLength(n.remoteAddr);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(36+i+4+4+s+4);a[o]=l.CHANNEL_OPEN,I(a,15,++o),a.utf8Write("forwarded-tcpip",o+=4,15),I(a,t,o+=15),I(a,e,o+=4),I(a,r,o+=4),I(a,i,o+=4),a.utf8Write(n.boundAddr,o+=4,i),I(a,n.boundPort,o+=i),I(a,s,o+=4),a.utf8Write(n.remoteAddr,o+=4,s),I(a,n.remotePort,o+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, forwarded-tcpip)`),v(this,this._packetRW.write.finalize(a))}x11(t,e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.originAddr);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(24+i+4);o[s]=l.CHANNEL_OPEN,I(o,3,++s),o.utf8Write("x11",s+=4,3),I(o,t,s+=3),I(o,e,s+=4),I(o,r,s+=4),I(o,i,s+=4),o.utf8Write(n.originAddr,s+=4,i),I(o,n.originPort,s+=i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, x11)`),v(this,this._packetRW.write.finalize(o))}openssh_authAgent(t,e,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(39);i[n]=l.CHANNEL_OPEN,I(i,22,++n),i.utf8Write("auth-agent@openssh.com",n+=4,22),I(i,t,n+=22),I(i,e,n+=4),I(i,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, auth-agent@openssh.com)`),v(this,this._packetRW.write.finalize(i))}openssh_forwardedStreamLocal(t,e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.socketPath);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(54+i+4);o[s]=l.CHANNEL_OPEN,I(o,33,++s),o.utf8Write("forwarded-streamlocal@openssh.com",s+=4,33),I(o,t,s+=33),I(o,e,s+=4),I(o,r,s+=4),I(o,i,s+=4),o.utf8Write(n.socketPath,s+=4,i),I(o,0,s+=i),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${t}, forwarded-streamlocal@openssh.com)`),v(this,this._packetRW.write.finalize(o))}exitStatus(t,e){if(!this._server)throw new Error("Server-only method called in client mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(25);n[r]=l.CHANNEL_REQUEST,I(n,t,++r),I(n,11,r+=4),n.utf8Write("exit-status",r+=4,11),n[r+=11]=0,I(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, exit-status: ${e})`),v(this,this._packetRW.write.finalize(n))}exitSignal(t,e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=e;if("string"!=typeof i||!i)throw new Error(`Invalid signal: ${i}`);let s=e.toUpperCase();if("SIG"===s.slice(0,3)&&(s=s.slice(3)),1!==u[s])throw new Error(`Invalid signal: ${i}`);const o=Buffer.byteLength(s),a=n?Buffer.byteLength(n):0;let c=this._packetRW.write.allocStart;const h=this._packetRW.write.alloc(25+o+1+4+a+4);h[c]=l.CHANNEL_REQUEST,I(h,t,++c),I(h,11,c+=4),h.utf8Write("exit-signal",c+=4,11),h[c+=11]=0,I(h,o,++c),h.utf8Write(s,c+=4,o),h[c+=o]=r?1:0,I(h,a,++c),c+=4,a&&(h.utf8Write(n,c,a),c+=a),I(h,0,c),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${t}, exit-signal: ${e})`),v(this,this._packetRW.write.finalize(h))}authFailure(t,e){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");let r;if("boolean"==typeof t&&(e=t,t=void 0),t){r=[];for(let e=0;e<t.length;++e)"none"!==t[e].toLowerCase()&&r.push(t[e]);r=r.join(",")}else r="";const n=r.length;let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+n+1);s[i]=l.USERAUTH_FAILURE,I(s,n,++i),s.utf8Write(r,i+=4,n),s[i+=n]=!0===e?1:0,this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE"),v(this,this._packetRW.write.finalize(s))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");const t=this._packetRW.write.allocStart,e=this._packetRW.write.alloc(1);e[t]=l.USERAUTH_SUCCESS,this._authsQueue.shift(),this._authenticated=!0,this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS"),v(this,this._packetRW.write.finalize(e)),"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.read=new R),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.write=new B(this))}authPKOK(t,e){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length||"publickey"!==this._authsQueue[0])throw new Error('"publickey" auth not in progress');const r=Buffer.byteLength(t),n=e.length;let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+r+4+n);s[i]=l.USERAUTH_PK_OK,I(s,r,++i),s.utf8Write(t,i+=4,r),I(s,n,i+=r),s.set(e,i+=4),this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK"),v(this,this._packetRW.write.finalize(s))}authPasswdChg(t){if(!this._server)throw new Error("Server-only method called in client mode");const e=Buffer.byteLength(t);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+e+4);n[r]=l.USERAUTH_PASSWD_CHANGEREQ,I(n,e,++r),n.utf8Write(t,r+=4,e),I(n,0,r+=e),this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ"),v(this,this._packetRW.write.finalize(n))}authInfoReq(t,e,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=0;const i=t?Buffer.byteLength(t):0,s=e?Buffer.byteLength(e):0;for(let t=0;t<r.length;++t)n+=4+Buffer.byteLength(r[t].prompt)+1;let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+i+4+s+4+4+n);a[o]=l.USERAUTH_INFO_REQUEST,I(a,i,++o),o+=4,t&&(a.utf8Write(t,o,i),o+=i),I(a,s,o),o+=4,e&&(a.utf8Write(e,o,s),o+=s),I(a,0,o),I(a,r.length,o+=4),o+=4;for(let t=0;t<r.length;++t){const e=r[t],n=Buffer.byteLength(e.prompt);I(a,n,o),o+=4,n&&(a.utf8Write(e.prompt,o,n),o+=n),a[o++]=e.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST"),v(this,this._packetRW.write.finalize(a))}}},4261:(t,e,r)=>{"use strict";const n=r(4434),i=r(9896),{constants:s}=i,{Readable:o,Writable:a}=r(2203),{inherits:c,isDate:h}=r(9023),l=Buffer[Symbol.species],{bufferCopy:u,bufferSlice:f,makeBufferParser:d,writeUInt32BE:p}=r(5623),g=Buffer.alloc(28),A={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8},_=new Map(Object.values(A).map((t=>[t,1]))),E={[A.OK]:"No error",[A.EOF]:"End of file",[A.NO_SUCH_FILE]:"No such file or directory",[A.PERMISSION_DENIED]:"Permission denied",[A.FAILURE]:"Failure",[A.BAD_MESSAGE]:"Bad message",[A.NO_CONNECTION]:"No connection",[A.CONNECTION_LOST]:"Connection lost",[A.OP_UNSUPPORTED]:"Operation unsupported"},m=200,y={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32},S=2**32-1,b=Buffer.from([0,0,0,5,1,0,0,0,3]),w=Buffer.from([0,0,0,5,2,0,0,0,3]),v=/^SSH-2.0-(?:OpenSSH|dropbear)/,I=262144,C=d(),k={readable:!1,writable:!1,push:t=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function R(){}function B(t,e,r,n,i,s,o,a){const c=t._maxReadLen,h=Math.max(i-c,0);h&&(i=c);const l=e.length;let u=9,d=s;const g=Buffer.allocUnsafe(13+l+8+4);p(g,g.length-4,0),g[4]=5;const _=t._writeReqid=t._writeReqid+1&S;p(g,_,5),p(g,l,u),g.set(e,u+=4),u+=l;for(let t=7;t>=0;--t)g[u+t]=255&d,d/=256;p(g,i,u+=8),"function"!=typeof o&&(o=R);const E=a||{nb:0,position:s,off:n,origOff:n,len:void 0,overflow:void 0,cb:(n,i,s)=>{const a=E.len,c=E.overflow;if(n){if(o._wantEOFError||n.code!==A.EOF)return o(n)}else{if(s>a)return o(new Error("Received more data than requested"));if(s===a&&c)return E.nb+=s,E.position+=s,E.off+=s,void B(t,e,r,E.off,c,E.position,o,E)}s=s||0,i=0===E.origOff&&r.length===E.nb?r:f(r,E.origOff,E.origOff+E.nb+s),o(void 0,E.nb+s,i,E.position)},buffer:void 0};E.len=i,E.overflow=h,E.buffer=f(r,n,n+i),t._requests[_]=E;const m=M(t,g);t._debug&&t._debug(`SFTP: Outbound: ${m?"Buffered":"Sending"} READ`)}function O(t,e,r,n,s,o){let a,c,h,l,u=64,f=32768;"function"==typeof s?o=s:"object"==typeof s&&null!==s&&("number"==typeof s.concurrency&&s.concurrency>0&&!isNaN(s.concurrency)&&(u=s.concurrency),"number"==typeof s.chunkSize&&s.chunkSize>0&&!isNaN(s.chunkSize)&&(f=s.chunkSize),"number"==typeof s.fileSize&&s.fileSize>0&&!isNaN(s.fileSize)&&(h=s.fileSize),"function"==typeof s.step&&(a=s.step),"string"!=typeof s.mode&&"number"!=typeof s.mode||(c=x(s.mode)));let d,p,g,A=0,_=0,E=!1,m=f*u;function y(r){if(E)return;E=!0;let n,s=0;d||p?(n=()=>{0==--s&&o(r)},!d||t!==i&&"open"!==t.outgoing.state||++s,!p||e!==i&&"open"!==e.outgoing.state||++s,!d||t!==i&&"open"!==t.outgoing.state||t.close(d,n),!p||e!==i&&"open"!==e.outgoing.state||e.close(p,n)):o(r)}t.open(r,"r",((s,E)=>{if(s)return y(s);function S(s,h){if(s)return t!==i?void t.stat(r,((t,e)=>{if(t)return y(s);S(null,e)})):y(s);l=h.size,e.open(n,"w",((r,i)=>{if(r)return y(r);if(p=i,l<=0)return y();for(;m>l;){if(1===u){m=l;break}m-=f,--u}if(g=function(t){try{return Buffer.allocUnsafe(t)}catch(t){return t}}(m),g instanceof Error)return y(g);function s(r,n,i,s,c,u){if(r)return y(r);c=c||0,e.write(p,g,c,n,s,(function(r){if(r)return y(r);if(_+=n,a&&a(_,n,l),n<u)return h(c,s+n,u-n);if(_===l)return void e.close(p,(e=>{if(p=void 0,e)return y(e);t.close(d,(t=>{if(d=void 0,t)return y(t);o()}))}));if(A>=l)return;const i=A+f>l?l-A:f;h(c,A,i),A+=i}))}function h(e,r,n){t.read(d,g,e,n,r,function(t,e,r){return(n,i,o)=>{s(n,i,0,e,t,r)}}(e,r,n))}function E(){let t=0,e=0;for(;A<l&&t<u;){const r=A+f>l?l-A:f;h(e,A,r),e+=r,A+=r,++t}}void 0!==c?e.fchmod(p,c,(function t(r){r?e.chmod(n,c,(e=>t())):E()})):E()}))}d=E,void 0===h?t.fstat(d,S):S(null,{size:h})}))}function T(t,e,r,n,i,s,o){const a="function"==typeof o?o:void 0;t.write(e,r,n,i,s,((o,c)=>{if(o)return t.close(e,(()=>{a&&a(o)}));c===i?t.close(e,a):T(t,e,r,n+=c,i-=c,s+=c,a)}))}class N{constructor(t){this.mode=t&&t.mode,this.uid=t&&t.uid,this.gid=t&&t.gid,this.size=t&&t.size,this.atime=t&&t.atime,this.mtime=t&&t.mtime,this.extended=t&&t.extended}isDirectory(){return(this.mode&s.S_IFMT)===s.S_IFDIR}isFile(){return(this.mode&s.S_IFMT)===s.S_IFREG}isBlockDevice(){return(this.mode&s.S_IFMT)===s.S_IFBLK}isCharacterDevice(){return(this.mode&s.S_IFMT)===s.S_IFCHR}isSymbolicLink(){return(this.mode&s.S_IFMT)===s.S_IFLNK}isFIFO(){return(this.mode&s.S_IFMT)===s.S_IFIFO}isSocket(){return(this.mode&s.S_IFMT)===s.S_IFSOCK}}function L(t){let e=0,r=0;if("object"==typeof t&&null!==t){if("number"==typeof t.size){e|=1;const n=t.size;g[r++]=n/72057594037927940,g[r++]=n/281474976710656,g[r++]=n/1099511627776,g[r++]=n/4294967296,g[r++]=n/16777216,g[r++]=n/65536,g[r++]=n/256,g[r++]=n}if("number"==typeof t.uid&&"number"==typeof t.gid){e|=2;const n=t.uid,i=t.gid;g[r++]=n>>>24,g[r++]=n>>>16,g[r++]=n>>>8,g[r++]=n,g[r++]=i>>>24,g[r++]=i>>>16,g[r++]=i>>>8,g[r++]=i}if("number"==typeof t.mode||"string"==typeof t.mode){const n=x(t.mode);e|=4,g[r++]=n>>>24,g[r++]=n>>>16,g[r++]=n>>>8,g[r++]=n}if(("number"==typeof t.atime||h(t.atime))&&("number"==typeof t.mtime||h(t.mtime))){const n=P(t.atime),i=P(t.mtime);e|=8,g[r++]=n>>>24,g[r++]=n>>>16,g[r++]=n>>>8,g[r++]=n,g[r++]=i>>>24,g[r++]=i>>>16,g[r++]=i>>>8,g[r++]=i}}return{flags:e,nb:r}}function P(t){if("number"==typeof t&&t==t)return t;if(h(t))return parseInt(t.getTime()/1e3,10);throw new Error(`Cannot parse time: ${t}`)}function x(t){if("number"==typeof t&&t==t)return t;if("string"==typeof t)return x(parseInt(t,8));throw new Error(`Cannot parse mode: ${t}`)}const U={r:y.READ,"r+":y.READ|y.WRITE,w:y.TRUNC|y.CREAT|y.WRITE,wx:y.TRUNC|y.CREAT|y.WRITE|y.EXCL,xw:y.TRUNC|y.CREAT|y.WRITE|y.EXCL,"w+":y.TRUNC|y.CREAT|y.READ|y.WRITE,"wx+":y.TRUNC|y.CREAT|y.READ|y.WRITE|y.EXCL,"xw+":y.TRUNC|y.CREAT|y.READ|y.WRITE|y.EXCL,a:y.APPEND|y.CREAT|y.WRITE,ax:y.APPEND|y.CREAT|y.WRITE|y.EXCL,xa:y.APPEND|y.CREAT|y.WRITE|y.EXCL,"a+":y.APPEND|y.CREAT|y.READ|y.WRITE,"ax+":y.APPEND|y.CREAT|y.READ|y.WRITE|y.EXCL,"xa+":y.APPEND|y.CREAT|y.READ|y.WRITE|y.EXCL};function D(t){const e=U[t];return void 0!==e?e:null}const H=(()=>{const t=Object.keys(U);return e=>{for(let r=0;r<t.length;++r){const n=t[r];if(U[n]===e)return n}return null}})();function F(t){const e=C.readUInt32BE();if(void 0===e)return;const r=new N;if(1&e){const e=C.readUInt64BE(t);if(void 0===e)return;r.size=e}if(2&e){const t=C.readUInt32BE(),e=C.readUInt32BE();if(void 0===e)return;r.uid=t,r.gid=e}if(4&e){const t=C.readUInt32BE();if(void 0===t)return;r.mode=t}if(8&e){const t=C.readUInt32BE(),e=C.readUInt32BE();if(void 0===e)return;r.atime=t,r.mtime=e}if(2147483648&e){const t=C.readUInt32BE();if(void 0===t)return;const e={};for(let r=0;r<t;++r){const t=C.readString(!0),r=C.readString();if(void 0===r)return;e[t]=r}r.extended=e}return r}function M(t,e){const r=Q(t,e);return void 0===r||(t._buffer.push(r),!1)}function Q(t,e){const r=t.outgoing;if("open"!==r.state)return;if(0===r.window)return t._waitWindow=!0,t._chunkcb=$,e;let n;const i=e.length;let s=0;for(;i-s>0&&r.window>0;){const n=Math.min(i-s,r.window,r.packetSize);r.window-=n,0===r.window&&(t._waitWindow=!0,t._chunkcb=$),0===s&&n===i?t._protocol.channelData(t.outgoing.id,e):t._protocol.channelData(t.outgoing.id,f(e,s,s+n)),s+=n}return i-s>0&&(n=s>0?f(e,s,i):e),n}function $(){this._chunkcb=void 0;const t=this._buffer;let e=0;for(;e<t.length;){const r=t[e],n=Q(this,r);if(void 0!==n)return n!==r&&(t[e]=n),void(e>0&&(this._buffer=t.slice(e)));++e}e>0&&(this._buffer=[])}function W(t,e,r){const n=new Error(e);return n.level="sftp-protocol",!r&&t._debug&&t._debug(`SFTP: Inbound: ${e}`),t.emit("error",n),t.destroy(),j(t),!1}function j(t){const e=Object.keys(t._requests);if(0===e.length)return;const r=t._requests;t._requests={};const n=new Error("No response from server");for(let t=0;t<e.length;++t){const i=r[e[t]];"function"==typeof i.cb&&i.cb(n)}}const K={2:(t,e)=>{if(-1!==t._version)return W(t,"Duplicate VERSION packet");const r={};C.init(e,1);let n=C.readUInt32BE();for(;C.avail();){const t=C.readString(!0),e=C.readString(!0);if(void 0===e){n=void 0;break}r[t]=e}if(C.clear(),void 0===n)return W(t,"Malformed VERSION packet");if(t._debug){const e=Object.keys(r);e.length?t._debug(`SFTP: Inbound: Received VERSION (v${n}, exts:${e})`):t._debug(`SFTP: Inbound: Received VERSION (v${n})`)}if(t._version=n,t._extensions=r,"1"===r["limits@openssh.com"])return function(t,e){let r=9;const n=Buffer.allocUnsafe(31);p(n,n.length-4,0),n[4]=m;const i=t._writeReqid=t._writeReqid+1&S;p(n,i,5),p(n,18,r),n.utf8Write("limits@openssh.com",r+=4,18),t._requests[i]={extended:"limits@openssh.com",cb:e};const s=M(t,n);if(t._debug){const e=s?"Buffered":"Sending";t._debug(`SFTP: Outbound: ${e} limits@openssh.com`)}}(t,((e,r)=>{e||(r.maxPktLen>0&&(t._maxOutPktLen=r.maxPktLen),r.maxReadLen>0&&(t._maxReadLen=r.maxReadLen),r.maxWriteLen>0&&(t._maxWriteLen=r.maxWriteLen),t.maxOpenHandles=r.maxOpenHandles>0?r.maxOpenHandles:1/0),t.emit("ready")}));t.emit("ready")},101:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readUInt32BE(),i=C.readString(!0);if(C.clear(),t._debug){const e=JSON.stringify(i);t._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${n}, ${e})`)}const s=t._requests[r];if(delete t._requests[r],s&&"function"==typeof s.cb){if(n===A.OK)return void s.cb();const t=new Error(i||E[n]||"Unknown status");t.code=n,s.cb(t)}},102:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n)return void 0!==r&&delete t._requests[r],W(t,"Malformed HANDLE packet");t._debug&&t._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);const i=t._requests[r];delete t._requests[r],i&&"function"==typeof i.cb&&i.cb(void 0,n)},103:(t,e)=>{C.init(e,1);const r=C.readUInt32BE();let n;if(void 0!==r&&(n=t._requests[r],delete t._requests[r]),n&&"function"==typeof n.cb)if(n.buffer){const e=C.readString(n.buffer);if(C.clear(),void 0!==e)return t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${e})`),void n.cb(void 0,n.buffer,e)}else{const e=C.readString();if(C.clear(),void 0!==e)return t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${e.length})`),void n.cb(void 0,e)}else{const e=C.skipString();if(C.clear(),void 0!==e)return void(t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${e})`))}return W(t,"Malformed DATA packet")},104:(t,e)=>{C.init(e,1);const r=C.readUInt32BE();let n;void 0!==r&&(n=t._requests[r],delete t._requests[r]);const i=C.readUInt32BE();if(void 0!==i){let e=[];for(let r=0;r<i;++r){const r=C.readString(!0),n=C.readString(!0),i=F(t._biOpt);if(void 0===i){e=void 0;break}e.push({filename:r,longname:n,attrs:i})}if(void 0!==e)return t._debug&&t._debug(`SFTP: Inbound: Received NAME (id:${r}, ${e.length})`),C.clear(),void(n&&"function"==typeof n.cb&&n.cb(void 0,e))}return C.clear(),W(t,"Malformed NAME packet")},105:(t,e)=>{C.init(e,1);const r=C.readUInt32BE();let n;void 0!==r&&(n=t._requests[r],delete t._requests[r]);const i=F(t._biOpt);return C.clear(),void 0!==i?(t._debug&&t._debug(`SFTP: Inbound: Received ATTRS (id:${r})`),void(n&&"function"==typeof n.cb&&n.cb(void 0,i))):W(t,"Malformed ATTRS packet")},201:(t,e)=>{C.init(e,1);const r=C.readUInt32BE();if(void 0!==r){const e=t._requests[r];if(!e)return t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),void C.clear();switch(delete t._requests[r],e.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{const n=t._biOpt,i={f_bsize:C.readUInt64BE(n),f_frsize:C.readUInt64BE(n),f_blocks:C.readUInt64BE(n),f_bfree:C.readUInt64BE(n),f_bavail:C.readUInt64BE(n),f_files:C.readUInt64BE(n),f_ffree:C.readUInt64BE(n),f_favail:C.readUInt64BE(n),f_sid:C.readUInt64BE(n),f_flag:C.readUInt64BE(n),f_namemax:C.readUInt64BE(n)};if(void 0===i.f_namemax)break;return t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${e.extended})`),C.clear(),void("function"==typeof e.cb&&e.cb(void 0,i))}case"limits@openssh.com":{const n={maxPktLen:C.readUInt64BE(),maxReadLen:C.readUInt64BE(),maxWriteLen:C.readUInt64BE(),maxOpenHandles:C.readUInt64BE()};if(void 0===n.maxOpenHandles)break;return t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${e.extended})`),C.clear(),void("function"==typeof e.cb&&e.cb(void 0,n))}case"users-groups-by-id@openssh.com":{const n=C.readUInt32BE();if(void 0===n)break;const i=new Array(n);for(let t=0;t<i.length;++t)i[t]=C.readString(!0);const s=C.readUInt32BE();if(void 0===s)break;const o=new Array(s);for(let t=0;t<o.length;++t)o[t]=C.readString(!0);if(o.length>0&&void 0===o[o.length-1])break;return t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${e.extended})`),C.clear(),void("function"==typeof e.cb&&e.cb(void 0,i,o))}default:return t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),C.clear(),void("function"==typeof e.cb&&e.cb())}}return C.clear(),W(t,"Malformed EXTENDED_REPLY packet")}},G={1:(t,e)=>{if(-1!==t._version)return W(t,"Duplicate INIT packet");const r={};C.init(e,1);let n=C.readUInt32BE();for(;C.avail();){const t=C.readString(!0),e=C.readString(!0);if(void 0===e){n=void 0;break}r[t]=e}if(C.clear(),void 0===n)return W(t,"Malformed INIT packet");if(t._debug){const e=Object.keys(r);e.length?t._debug(`SFTP: Inbound: Received INIT (v${n}, exts:${e})`):t._debug(`SFTP: Inbound: Received INIT (v${n})`)}M(t,w),t._version=n,t._extensions=r,t.emit("ready")},3:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0),i=C.readUInt32BE(),s=F(t._biOpt);if(C.clear(),void 0===s)return W(t,"Malformed OPEN packet");t._debug&&t._debug(`SFTP: Inbound: Received OPEN (id:${r})`),t.emit("OPEN",r,n,i,s)||t.status(r,A.OP_UNSUPPORTED)},4:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n||n.length>256)return W(t,"Malformed CLOSE packet");t._debug&&t._debug(`SFTP: Inbound: Received CLOSE (id:${r})`),t.emit("CLOSE",r,n)||t.status(r,A.OP_UNSUPPORTED)},5:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(),i=C.readUInt64BE(t._biOpt),s=C.readUInt32BE();if(C.clear(),void 0===s||n.length>256)return W(t,"Malformed READ packet");t._debug&&t._debug(`SFTP: Inbound: Received READ (id:${r})`),t.emit("READ",r,n,i,s)||t.status(r,A.OP_UNSUPPORTED)},6:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(),i=C.readUInt64BE(t._biOpt),s=C.readString();if(C.clear(),void 0===s||n.length>256)return W(t,"Malformed WRITE packet");t._debug&&t._debug(`SFTP: Inbound: Received WRITE (id:${r})`),t.emit("WRITE",r,n,i,s)||t.status(r,A.OP_UNSUPPORTED)},7:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed LSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received LSTAT (id:${r})`),t.emit("LSTAT",r,n)||t.status(r,A.OP_UNSUPPORTED)},8:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n||n.length>256)return W(t,"Malformed FSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received FSTAT (id:${r})`),t.emit("FSTAT",r,n)||t.status(r,A.OP_UNSUPPORTED)},9:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0),i=F(t._biOpt);if(C.clear(),void 0===i)return W(t,"Malformed SETSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`),t.emit("SETSTAT",r,n,i)||t.status(r,A.OP_UNSUPPORTED)},10:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(),i=F(t._biOpt);if(C.clear(),void 0===i||n.length>256)return W(t,"Malformed FSETSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`),t.emit("FSETSTAT",r,n,i)||t.status(r,A.OP_UNSUPPORTED)},11:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed OPENDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`),t.emit("OPENDIR",r,n)||t.status(r,A.OP_UNSUPPORTED)},12:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n||n.length>256)return W(t,"Malformed READDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received READDIR (id:${r})`),t.emit("READDIR",r,n)||t.status(r,A.OP_UNSUPPORTED)},13:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed REMOVE packet");t._debug&&t._debug(`SFTP: Inbound: Received REMOVE (id:${r})`),t.emit("REMOVE",r,n)||t.status(r,A.OP_UNSUPPORTED)},14:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0),i=F(t._biOpt);if(C.clear(),void 0===i)return W(t,"Malformed MKDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received MKDIR (id:${r})`),t.emit("MKDIR",r,n,i)||t.status(r,A.OP_UNSUPPORTED)},15:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed RMDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received RMDIR (id:${r})`),t.emit("RMDIR",r,n)||t.status(r,A.OP_UNSUPPORTED)},16:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed REALPATH packet");t._debug&&t._debug(`SFTP: Inbound: Received REALPATH (id:${r})`),t.emit("REALPATH",r,n)||t.status(r,A.OP_UNSUPPORTED)},17:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed STAT packet");t._debug&&t._debug(`SFTP: Inbound: Received STAT (id:${r})`),t.emit("STAT",r,n)||t.status(r,A.OP_UNSUPPORTED)},18:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0),i=C.readString(!0);if(C.clear(),void 0===i)return W(t,"Malformed RENAME packet");t._debug&&t._debug(`SFTP: Inbound: Received RENAME (id:${r})`),t.emit("RENAME",r,n,i)||t.status(r,A.OP_UNSUPPORTED)},19:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return W(t,"Malformed READLINK packet");t._debug&&t._debug(`SFTP: Inbound: Received READLINK (id:${r})`),t.emit("READLINK",r,n)||t.status(r,A.OP_UNSUPPORTED)},20:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0),i=C.readString(!0);if(C.clear(),void 0===i)return W(t,"Malformed SYMLINK packet");let s;t._debug&&t._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`),s=t._isOpenSSH?t.emit("SYMLINK",r,i,n):t.emit("SYMLINK",r,n,i),s||t.status(r,A.OP_UNSUPPORTED)},[m]:(t,e)=>{C.init(e,1);const r=C.readUInt32BE(),n=C.readString(!0);if(void 0===n)return C.clear(),W(t,"Malformed EXTENDED packet");let i;C.avail()&&(i=C.readRaw()),C.clear(),t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`),t.emit("EXTENDED",r,n,i)||t.status(r,A.OP_UNSUPPORTED)}},{ERR_INVALID_ARG_TYPE:q,ERR_OUT_OF_RANGE:V,validateNumber:z}=r(8977);let Y;const X=[];function J(t,e){if(!Number.isSafeInteger(t)){if(z(t,e),!Number.isInteger(t))throw new V(e,"an integer",t);throw new V(e,">= 0 and <= 2 ** 53 - 1",t)}if(t<0)throw new V(e,">= 0 and <= 2 ** 53 - 1",t)}function Z(t){return t+7&-8}function tt(t,e,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(void 0===r.highWaterMark&&(r.highWaterMark=65536),r.emitClose=!1,r.autoDestroy=!1,o.call(this,r),this.path=e,this.flags=void 0===r.flags?"r":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesRead=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=t,this._opening=!1,void 0!==this.start&&(J(this.start,"start"),this.pos=this.start),void 0===this.end)this.end=1/0;else if(this.end!==1/0&&(J(this.end,"end"),void 0!==this.start&&this.start>this.end))throw new V("start",`<= "end" (here: ${this.end})`,this.start);this.on("end",(function(){this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}function et(t,e,r){if(!t.handle)return n();function n(n){e(n=n||r),t.isClosed=!0,n||t.emit("close")}t.sftp.close(t.handle,n)}function rt(t,e,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,r.autoDestroy=!1,a.call(this,r),this.path=e,this.flags=void 0===r.flags?"w":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesWritten=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=t,this._opening=!1,void 0!==this.start&&(J(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",(function(){this._writableState.finalCalled||this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}c(tt,o),tt.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((t,e)=>{if(this._opening=!1,t)return this.emit("error",t),void(this.autoClose&&this.destroy());this.handle=e,this.emit("open",e),this.emit("ready"),this.read()})))},tt.prototype._read=function(t){if(!Buffer.isBuffer(this.handle))return this.once("open",(()=>this._read(t)));if(this.destroyed)return;var e;(!Y||Y.length-Y.used<128)&&(e=this.readableHighWaterMark||this._readableState.highWaterMark,Y=X.length>0?X.pop():Buffer.allocUnsafe(e),Y.used=0);const r=Y;let n=Math.min(Y.length-Y.used,t);const i=Y.used;if(void 0!==this.end&&(n=Math.min(this.end-this.pos+1,n)),n<=0)return this.push(null);this.sftp.read(this.handle,Y,Y.used,n,this.pos,((t,e)=>{if(t)return this.emit("error",t),void(this.autoClose&&this.destroy());let s=null;if(i+n===r.used&&r===Y)r.used=Z(r.used+e-n);else{const t=i+n&-8,s=Z(i+e);t-s>=128&&X.push(r.slice(s,t))}e>0&&(this.bytesRead+=e,s=r.slice(i,i+e)),this.pos+=e,this.push(s)})),Y.used=Z(Y.used+n)},tt.prototype._destroy=function(t,e){!this._opening||Buffer.isBuffer(this.handle)?(et(this,e,t),this.handle=null,this._opening=!1):this.once("open",et.bind(null,this,e,t))},tt.prototype.close=function(t){this.destroy(null,t)},Object.defineProperty(tt.prototype,"pending",{get(){return null===this.handle},configurable:!0}),c(rt,a),rt.prototype._final=function(t){this.autoClose&&this.destroy(),t()},rt.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((t,e)=>{if(this._opening=!1,t)return this.emit("error",t),void(this.autoClose&&this.destroy());this.handle=e;const r=t=>{if(t)this.sftp.chmod(this.path,this.mode,(t=>r()));else if("a"!==this.flags[0])this.emit("open",e),this.emit("ready");else{const t=(r,n)=>{r?this.sftp.stat(this.path,((e,n)=>{if(e)return this.destroy(),void this.emit("error",r);t(null,n)})):(this.pos=n.size,this.emit("open",e),this.emit("ready"))};this.sftp.fstat(e,t)}};this.sftp.fchmod(e,this.mode,r)})))},rt.prototype._write=function(t,e,r){if(!Buffer.isBuffer(t)){const e=new q("data","Buffer",t);return this.emit("error",e)}if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._write(t,e,r)}));this.sftp.write(this.handle,t,0,t.length,this.pos,((t,e)=>{if(t)return this.autoClose&&this.destroy(),r(t);this.bytesWritten+=e,r()})),this.pos+=t.length},rt.prototype._writev=function(t,e){if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._writev(t,e)}));const r=this.sftp,n=this.handle;let i=t.length;const s=(t,r)=>{if(t)return this.destroy(),e(t);this.bytesWritten+=r,0==--i&&e()};for(let e=0;e<t.length;++e){const i=t[e].chunk;r.write(n,i,0,i.length,this.pos,s),this.pos+=i.length}},"function"!=typeof a.prototype.destroy&&(rt.prototype.destroy=tt.prototype.destroy),rt.prototype._destroy=tt.prototype._destroy,rt.prototype.close=function(t){if(t){if(this.isClosed)return void process.nextTick(t);this.on("close",t)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()},rt.prototype.destroySoon=rt.prototype.end,Object.defineProperty(rt.prototype,"pending",{get(){return null===this.handle},configurable:!0}),t.exports={flagsToString:H,OPEN_MODE:y,SFTP:class extends n{constructor(t,e,r){super(),"object"==typeof r&&r||(r={});const n=t._protocol._remoteIdentRaw;this.server=!!r.server,this._debug="function"==typeof r.debug?r.debug:void 0,this._isOpenSSH=n&&v.test(n),this._version=-1,this._extensions={},this._biOpt=r.biOpt,this._pktLenBytes=0,this._pktLen=0,this._pktPos=0,this._pktType=0,this._pktData=void 0,this._writeReqid=-1,this._requests={},this._maxInPktLen=I,this._maxOutPktLen=34e3,this._maxReadLen=(this._isOpenSSH?I:34e3)-2048,this._maxWriteLen=(this._isOpenSSH?I:34e3)-2048,this.maxOpenHandles=void 0,this._client=t,this._protocol=t._protocol,this._callbacks=[],this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this._waitWindow=!1,this._chunkcb=void 0,this._buffer=[],this.type=e.type,this.subtype=void 0,this.incoming=e.incoming,this.outgoing=e.outgoing,this.stderr=k,this.readable=!0}push(t){if(null===t){if(j(this),!this.readable)return;return this.readable=!1,void this.emit("end")}let e=0;for(;e<t.length;){if(this._pktLenBytes<4){let r=Math.min(4-this._pktLenBytes,t.length-e);for(this._pktLenBytes+=r;r--;)this._pktLen=(this._pktLen<<8)+t[e++];if(this._pktLenBytes<4)return;if(0===this._pktLen)return W(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){const t=this._maxInPktLen;return W(this,`Packet length ${this._pktLen} exceeds max length of ${t}`)}if(e>=t.length)return}if(this._pktPos<this._pktLen){const r=Math.min(this._pktLen-this._pktPos,t.length-e);if(0!==e||r!==t.length?r===this._pktLen?this._pkt=new l(t.buffer,t.byteOffset+e,r):(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(new Uint8Array(t.buffer,t.byteOffset+e,r),this._pktPos)):r===this._pktLen?this._pkt=t:(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(t,this._pktPos)),e+=r,this._pktPos+=r,this._pktPos<this._pktLen)return}const r=this._pkt[0],n=this._pkt;this._pktLen=0,this._pktLenBytes=0,this._pkt=void 0,this._pktPos=0;const i=this.server?G[r]:K[r];if(!i)return W(this,`Unknown packet type ${r}`);if(-1===this._version)if(this.server){if(1!==r)return W(this,`Expected INIT packet, got ${r}`)}else if(2!==r)return W(this,`Expected VERSION packet, got ${r}`);if(!1===i(this,n))return}}end(){this.destroy()}destroy(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._protocol.channelClose(this.outgoing.id))}_init(){this._init=R,this.server||M(this,b)}createReadStream(t,e){if(this.server)throw new Error("Client-only method called in server mode");return new tt(this,t,e)}createWriteStream(t,e){if(this.server)throw new Error("Client-only method called in server mode");return new rt(this,t,e)}open(t,e,r,n){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof r&&(n=r,r=void 0);const i="number"==typeof e?e:D(e);if(null===i)throw new Error(`Unknown flags string: ${e}`);let s=0,o=0;"string"!=typeof r&&"number"!=typeof r||(r={mode:r}),"object"==typeof r&&null!==r&&(s=(r=L(r)).flags,o=r.nb);const a=Buffer.byteLength(t);let c=9;const h=Buffer.allocUnsafe(13+a+4+4+o);p(h,h.length-4,0),h[4]=3;const l=this._writeReqid=this._writeReqid+1&S;p(h,l,5),p(h,a,c),h.utf8Write(t,c+=4,a),p(h,i,c+=a),p(h,s,c+=4),o&&(c+=4,o===g.length?h.set(g,c):u(g,h,0,o,c),c+=o),this._requests[l]={cb:n};const f=M(this,h);this._debug&&this._debug(`SFTP: Outbound: ${f?"Buffered":"Sending"} OPEN`)}close(t,e){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=4;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.set(t,n+=4),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} CLOSE`)}read(t,e,r,n,i,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(e))throw new Error("buffer is not a Buffer");if(r>=e.length)throw new Error("offset is out of bounds");if(r+n>e.length)throw new Error("length extends beyond buffer");if(null===i)throw new Error("null position currently unsupported");B(this,t,e,r,n,i,s)}readData(t,e,r,n,i,s){this.read(t,e,r,n,i,s)}write(t,e,r,n,i,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(e))throw new Error("buffer is not a Buffer");if(r>e.length)throw new Error("offset is out of bounds");if(r+n>e.length)throw new Error("length extends beyond buffer");if(null===i)throw new Error("null position currently unsupported");if(!n)return void(s&&process.nextTick(s,void 0,0));const o=this._maxWriteLen,a=Math.max(n-o,0),c=i;a&&(n=o);const h=t.length;let l=9;const f=Buffer.allocUnsafe(13+h+8+4+n);p(f,f.length-4,0),f[4]=6;const d=this._writeReqid=this._writeReqid+1&S;p(f,d,5),p(f,h,l),f.set(t,l+=4),l+=h;for(let t=7;t>=0;--t)f[l+t]=255&i,i/=256;p(f,n,l+=8),u(e,f,r,r+n,l+=4),this._requests[d]={cb:i=>{i?"function"==typeof s&&s(i):a?this.write(t,e,r+n,a,c+n,s):"function"==typeof s&&s(void 0,r+n)}};const g=M(this,f);if(this._debug){const t=g?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${t} WRITE (id:${d})`)}}writeData(t,e,r,n,i,s){this.write(t,e,r,n,i,s)}fastGet(t,e,r,n){if(this.server)throw new Error("Client-only method called in server mode");O(this,i,t,e,r,n)}fastPut(t,e,r,n){if(this.server)throw new Error("Client-only method called in server mode");O(i,this,t,e,r,n)}readFile(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");let n;if("function"==typeof r?n=r:"function"==typeof e&&(n=e,e=void 0),"string"==typeof e)e={encoding:e,flag:"r"};else if(e){if("object"!=typeof e)throw new TypeError("Bad arguments")}else e={encoding:null,flag:"r"};const i=e.encoding;if(i&&!Buffer.isEncoding(i))throw new Error(`Unknown encoding: ${i}`);let s,o,a,c,h=0,l=0;const u=e.flag||"r",d=()=>{0===s?(o=Buffer.allocUnsafe(8192),this.read(c,o,0,8192,l,p)):this.read(c,o,h,s-h,l,p)},p=(t,e)=>{let r;if(t){if(r=t.code===A.EOF,!r)return this.close(c,(()=>n&&n(t)))}else r=!1;if(r||0===s&&0===e)return g();l+=e,h+=e,0!==s?h===s?g():d():(a.push(f(o,0,e)),d())};p._wantEOFError=!0;const g=()=>{this.close(c,(t=>(0===s?o=Buffer.concat(a,h):h<s&&(o=f(o,0,h)),i&&(o=o.toString(i)),n&&n(t,o))))};this.open(t,u,438,((e,r)=>{if(e)return n&&n(e);c=r;const i=(e,r)=>{if(e)this.stat(t,((t,r)=>{if(t)return this.close(c,(()=>{n&&n(e)}));i(null,r)}));else{if(s=r.size||0,0===s)return a=[],d();o=Buffer.allocUnsafe(s),d()}};this.fstat(c,i)}))}writeFile(t,e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if("function"==typeof n?i=n:"function"==typeof r&&(i=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"w"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"w"};if(r.encoding&&!Buffer.isEncoding(r.encoding))throw new Error(`Unknown encoding: ${r.encoding}`);const s=r.flag||"w";this.open(t,s,r.mode,((n,o)=>{if(n)i&&i(n);else{const n=Buffer.isBuffer(e)?e:Buffer.from(""+e,r.encoding||"utf8"),a=/a/.test(s)?null:0;if(null===a){const e=(r,s)=>{r?this.stat(t,((t,n)=>{if(t)return this.close(o,(()=>{i&&i(r)}));e(null,n)})):T(this,o,n,0,n.length,s.size,i)};return void this.fstat(o,e)}T(this,o,n,0,n.length,a,i)}}))}appendFile(t,e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if("function"==typeof n?i=n:"function"==typeof r&&(i=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"a"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"a"};r.flag||(r=Object.assign({flag:"a"},r)),this.writeFile(t,e,r,i)}exists(t,e){if(this.server)throw new Error("Client-only method called in server mode");this.stat(t,(t=>{e&&e(!t)}))}unlink(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=13;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} REMOVE`)}rename(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t),i=Buffer.byteLength(e);let s=9;const o=Buffer.allocUnsafe(13+n+4+i);p(o,o.length-4,0),o[4]=18;const a=this._writeReqid=this._writeReqid+1&S;p(o,a,5),p(o,n,s),o.utf8Write(t,s+=4,n),p(o,i,s+=n),o.utf8Write(e,s+=4,i),this._requests[a]={cb:r};const c=M(this,o);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} RENAME`)}mkdir(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0,i=0;"function"==typeof e&&(r=e,e=void 0),"object"==typeof e&&null!==e&&(n=(e=L(e)).flags,i=e.nb);const s=Buffer.byteLength(t);let o=9;const a=Buffer.allocUnsafe(13+s+4+i);p(a,a.length-4,0),a[4]=14;const c=this._writeReqid=this._writeReqid+1&S;p(a,c,5),p(a,s,o),a.utf8Write(t,o+=4,s),p(a,n,o+=s),i&&(o+=4,i===g.length?a.set(g,o):u(g,a,0,i,o),o+=i),this._requests[c]={cb:r};const h=M(this,a);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} MKDIR`)}rmdir(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=15;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} RMDIR`)}readdir(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof e&&(r=e,e={}),"object"==typeof e&&null!==e||(e={});const n=!e||!e.full;if(!Buffer.isBuffer(t)&&"string"!=typeof t)throw new Error("missing directory handle or path");if("string"==typeof t){const n=[];let i=0;const s=(t,o)=>{if(t)return r(t);this.readdir(o,e,((t,e)=>{const a=t&&t.code===A.EOF;if(t&&!a)return this.close(o,(()=>r(t)));if(a)return this.close(o,(t=>{if(t)return r(t);r(void 0,n)}));for(let t=0;t<e.length;++t,++i)n[i]=e[t];s(void 0,o)}))};return this.opendir(t,s)}const i=t.length;let s=9;const o=Buffer.allocUnsafe(13+i);p(o,o.length-4,0),o[4]=12;const a=this._writeReqid=this._writeReqid+1&S;p(o,a,5),p(o,i,s),o.set(t,s+=4),this._requests[a]={cb:n?(t,e)=>{if("function"==typeof r){if(t)return r(t);for(let t=e.length-1;t>=0;--t)"."!==e[t].filename&&".."!==e[t].filename||e.splice(t,1);r(void 0,e)}}:r};const c=M(this,o);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} READDIR`)}fstat(t,e){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=8;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.set(t,n+=4),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} FSTAT`)}stat(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=17;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} STAT`)}lstat(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=7;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} LSTAT`)}opendir(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=11;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} OPENDIR`)}setstat(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0,i=0;"object"==typeof e&&null!==e?(n=(e=L(e)).flags,i=e.nb):"function"==typeof e&&(r=e);const s=Buffer.byteLength(t);let o=9;const a=Buffer.allocUnsafe(13+s+4+i);p(a,a.length-4,0),a[4]=9;const c=this._writeReqid=this._writeReqid+1&S;p(a,c,5),p(a,s,o),a.utf8Write(t,o+=4,s),p(a,n,o+=s),i&&(o+=4,i===g.length?a.set(g,o):u(g,a,0,i,o),o+=i),this._requests[c]={cb:r};const h=M(this,a);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} SETSTAT`)}fsetstat(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");let n=0,i=0;"object"==typeof e&&null!==e?(n=(e=L(e)).flags,i=e.nb):"function"==typeof e&&(r=e);const s=t.length;let o=9;const a=Buffer.allocUnsafe(13+s+4+i);p(a,a.length-4,0),a[4]=10;const c=this._writeReqid=this._writeReqid+1&S;p(a,c,5),p(a,s,o),a.set(t,o+=4),p(a,n,o+=s),i&&(o+=4,i===g.length?a.set(g,o):u(g,a,0,i,o),o+=i),this._requests[c]={cb:r};const h=M(this,a);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} FSETSTAT`)}futimes(t,e,r,n){return this.fsetstat(t,{atime:P(e),mtime:P(r)},n)}utimes(t,e,r,n){return this.setstat(t,{atime:P(e),mtime:P(r)},n)}fchown(t,e,r,n){return this.fsetstat(t,{uid:e,gid:r},n)}chown(t,e,r,n){return this.setstat(t,{uid:e,gid:r},n)}fchmod(t,e,r){return this.fsetstat(t,{mode:e},r)}chmod(t,e,r){return this.setstat(t,{mode:e},r)}readlink(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=19;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:(t,r)=>{if("function"==typeof e)return t?e(t):r&&r.length?void e(void 0,r[0].filename):e(new Error("Response missing link info"))}};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} READLINK`)}symlink(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e),i=Buffer.byteLength(t);let s=9;const o=Buffer.allocUnsafe(13+n+4+i);p(o,o.length-4,0),o[4]=20;const a=this._writeReqid=this._writeReqid+1&S;p(o,a,5),this._isOpenSSH?(p(o,i,s),o.utf8Write(t,s+=4,i),p(o,n,s+=i),o.utf8Write(e,s+=4,n)):(p(o,n,s),o.utf8Write(e,s+=4,n),p(o,i,s+=n),o.utf8Write(t,s+=4,i)),this._requests[a]={cb:r};const c=M(this,o);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} SYMLINK`)}realpath(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=16;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,r,n),i.utf8Write(t,n+=4,r),this._requests[s]={cb:(t,r)=>{if("function"==typeof e)return t?e(t):r&&r.length?void e(void 0,r[0].filename):e(new Error("Response missing path info"))}};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["posix-rename@openssh.com"];if(!n||"1"!==n)throw new Error("Server does not support this extended request");const i=Buffer.byteLength(t),s=Buffer.byteLength(e);let o=9;const a=Buffer.allocUnsafe(41+i+4+s);p(a,a.length-4,0),a[4]=m;const c=this._writeReqid=this._writeReqid+1&S;p(a,c,5),p(a,24,o),a.utf8Write("posix-rename@openssh.com",o+=4,24),p(a,i,o+=24),a.utf8Write(t,o+=4,i),p(a,s,o+=i),a.utf8Write(e,o+=4,s),this._requests[c]={cb:r};const h=M(this,a);if(this._debug){const t=h?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} posix-rename@openssh.com`)}}ext_openssh_statvfs(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["statvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");const n=Buffer.byteLength(t);let i=9;const s=Buffer.allocUnsafe(36+n);p(s,s.length-4,0),s[4]=m;const o=this._writeReqid=this._writeReqid+1&S;p(s,o,5),p(s,19,i),s.utf8Write("statvfs@openssh.com",i+=4,19),p(s,n,i+=19),s.utf8Write(t,i+=4,n),this._requests[o]={extended:"statvfs@openssh.com",cb:e};const a=M(this,s);if(this._debug){const t=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} statvfs@openssh.com`)}}ext_openssh_fstatvfs(t,e){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["fstatvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const n=t.length;let i=9;const s=Buffer.allocUnsafe(37+n);p(s,s.length-4,0),s[4]=m;const o=this._writeReqid=this._writeReqid+1&S;p(s,o,5),p(s,20,i),s.utf8Write("fstatvfs@openssh.com",i+=4,20),p(s,n,i+=20),s.set(t,i+=4),this._requests[o]={extended:"fstatvfs@openssh.com",cb:e};const a=M(this,s);if(this._debug){const t=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} fstatvfs@openssh.com`)}}ext_openssh_hardlink(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["hardlink@openssh.com"])throw new Error("Server does not support this extended request");const n=Buffer.byteLength(t),i=Buffer.byteLength(e);let s=9;const o=Buffer.allocUnsafe(37+n+4+i);p(o,o.length-4,0),o[4]=m;const a=this._writeReqid=this._writeReqid+1&S;p(o,a,5),p(o,20,s),o.utf8Write("hardlink@openssh.com",s+=4,20),p(o,n,s+=20),o.utf8Write(t,s+=4,n),p(o,i,s+=n),o.utf8Write(e,s+=4,i),this._requests[a]={cb:r};const c=M(this,o);if(this._debug){const t=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} hardlink@openssh.com`)}}ext_openssh_fsync(t,e){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["fsync@openssh.com"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;let n=9;const i=Buffer.allocUnsafe(34+r);p(i,i.length-4,0),i[4]=m;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,17,n),i.utf8Write("fsync@openssh.com",n+=4,17),p(i,r,n+=17),i.set(t,n+=4),this._requests[s]={cb:e};const o=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["lsetstat@openssh.com"])throw new Error("Server does not support this extended request");let n=0,i=0;"object"==typeof e&&null!==e?(n=(e=L(e)).flags,i=e.nb):"function"==typeof e&&(r=e);const s=Buffer.byteLength(t);let o=9;const a=Buffer.allocUnsafe(37+s+4+i);p(a,a.length-4,0),a[4]=m;const c=this._writeReqid=this._writeReqid+1&S;p(a,c,5),p(a,20,o),a.utf8Write("lsetstat@openssh.com",o+=4,20),p(a,s,o+=20),a.utf8Write(t,o+=4,s),p(a,n,o+=s),i&&(o+=4,i===g.length?a.set(g,o):u(g,a,0,i,o),o+=i),this._requests[c]={cb:r};const h=M(this,a);if(this._debug){const t=h?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} lsetstat@openssh.com`)}}ext_openssh_expandPath(t,e){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["expand-path@openssh.com"])throw new Error("Server does not support this extended request");const r=Buffer.byteLength(t);let n=9;const i=Buffer.allocUnsafe(40+r);p(i,i.length-4,0),i[4]=m;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,5),p(i,23,n),i.utf8Write("expand-path@openssh.com",n+=4,23),p(i,r,n+=20),i.utf8Write(t,n+=4,r),this._requests[s]={cb:(t,r)=>{if("function"==typeof e)return t?e(t):r&&r.length?void e(void 0,r[0].filename):e(new Error("Response missing expanded path"))}};const o=M(this,i);if(this._debug){const t=o?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} expand-path@openssh.com`)}}ext_copy_data(t,e,r,n,i,s){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["copy-data"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(t))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(n))throw new Error("Destination handle is not a Buffer");let o=0;const a=Buffer.allocUnsafe(26+t.length+8+8+4+n.length+8);p(a,a.length-4,o),o+=4,a[o]=m,++o;const c=this._writeReqid=this._writeReqid+1&S;p(a,c,o),o+=4,p(a,9,o),o+=4,a.utf8Write("copy-data",o,9),o+=9,p(a,t.length,o),o+=4,a.set(t,o),o+=t.length;for(let t=7;t>=0;--t)a[o+t]=255&e,e/=256;o+=8;for(let t=7;t>=0;--t)a[o+t]=255&r,r/=256;o+=8,p(a,n.length,o),o+=4,a.set(n,o),o+=n.length;for(let t=7;t>=0;--t)a[o+t]=255&i,i/=256;this._requests[c]={cb:s};const h=M(this,a);if(this._debug){const t=h?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} copy-data`)}}ext_home_dir(t,e){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["home-directory"])throw new Error("Server does not support this extended request");if("string"!=typeof t)throw new TypeError("username is not a string");let r=0;const n=Buffer.byteLength(t),i=Buffer.allocUnsafe(31+n);p(i,i.length-4,r),r+=4,i[r]=m,++r;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,r),r+=4,p(i,14,r),r+=4,i.utf8Write("home-directory",r,14),r+=14,p(i,n,r),r+=4,i.utf8Write(t,r,n),r+=n,this._requests[s]={cb:(t,r)=>{if("function"==typeof e)return t?e(t):r&&r.length?void e(void 0,r[0].filename):e(new Error("Response missing home directory"))}};const o=M(this,i);if(this._debug){const t=o?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} home-directory`)}}ext_users_groups(t,e,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["users-groups-by-id@openssh.com"])throw new Error("Server does not support this extended request");if(!Array.isArray(t))throw new TypeError("uids is not an array");for(const e of t)if(!Number.isInteger(e)||e<0||e>2**32-1)throw new Error("uid values must all be 32-bit unsigned integers");if(!Array.isArray(e))throw new TypeError("gids is not an array");for(const t of e)if(!Number.isInteger(t)||t<0||t>2**32-1)throw new Error("gid values must all be 32-bit unsigned integers");let n=0;const i=Buffer.allocUnsafe(47+4*t.length+4+4*e.length);p(i,i.length-4,n),n+=4,i[n]=m,++n;const s=this._writeReqid=this._writeReqid+1&S;p(i,s,n),n+=4,p(i,30,n),n+=4,i.utf8Write("users-groups-by-id@openssh.com",n,30),n+=30,p(i,4*t.length,n),n+=4;for(const e of t)p(i,e,n),n+=4;p(i,4*e.length,n),n+=4;for(const t of e)p(i,t,n),n+=4;this._requests[s]={extended:"users-groups-by-id@openssh.com",cb:r};const o=M(this,i);if(this._debug){const t=o?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${t} users-groups-by-id@openssh.com`)}}handle(t,e){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;if(r>256)throw new Error("handle too large (> 256 bytes)");let n=9;const i=Buffer.allocUnsafe(13+r);p(i,i.length-4,0),i[4]=102,p(i,t,5),p(i,r,n),r&&i.set(e,n+=4);const s=M(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} HANDLE`)}status(t,e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!_.has(e))throw new Error(`Bad status code: ${e}`);r||(r="");const n=Buffer.byteLength(r);let i=9;const s=Buffer.allocUnsafe(17+n+4);p(s,s.length-4,0),s[4]=101,p(s,t,5),p(s,e,i),p(s,n,i+=4),i+=4,n&&(s.utf8Write(r,i,n),i+=n),p(s,0,i);const o=M(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} STATUS`)}data(t,e,r){if(!this.server)throw new Error("Server-only method called in client mode");const n=Buffer.isBuffer(e);if(!n&&"string"!=typeof e)throw new Error("data is not a Buffer or string");let i;n||r||(r=void 0,i=!0);const s=n?e.length:Buffer.byteLength(e,r);let o=9;const a=Buffer.allocUnsafe(13+s);p(a,a.length-4,0),a[4]=103,p(a,t,5),p(a,s,o),s&&(n?a.set(e,o+=4):i?a.utf8Write(e,o+=4,s):a.write(e,o+=4,s,r));const c=M(this,a);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} DATA`)}name(t,e){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(e)){if("object"!=typeof e||null===e)throw new Error("names is not an object or array");e=[e]}const r=e.length;let n,i=0;const s=[];for(let t=0;t<r;++t){const r=e[t],o=r&&r.filename&&"string"==typeof r.filename?r.filename:"";i+=4+Buffer.byteLength(o);const a=r&&r.longname&&"string"==typeof r.longname?r.longname:"";if(i+=4+Buffer.byteLength(a),"object"==typeof r.attrs&&null!==r.attrs){if(n=L(r.attrs),i+=4+n.nb,n.nb){let t;n.nb===g.length?t=new Uint8Array(g):(t=new Uint8Array(n.nb),u(g,t,0,n.nb,0)),n.bytes=t}s.push(n)}else i+=4,s.push(null)}let o=9;const a=Buffer.allocUnsafe(13+i);p(a,a.length-4,0),a[4]=104,p(a,t,5),p(a,r,o),o+=4;for(let t=0;t<r;++t){const r=e[t];{const t=r&&r.filename&&"string"==typeof r.filename?r.filename:"",e=Buffer.byteLength(t);p(a,e,o),o+=4,e&&(a.utf8Write(t,o,e),o+=e)}{const t=r&&r.longname&&"string"==typeof r.longname?r.longname:"",e=Buffer.byteLength(t);p(a,e,o),o+=4,e&&(a.utf8Write(t,o,e),o+=e)}const n=s[t];n?(p(a,n.flags,o),o+=4,n.flags&&n.bytes&&(a.set(n.bytes,o),o+=n.nb)):(p(a,0,o),o+=4)}const c=M(this,a);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} NAME`)}attrs(t,e){if(!this.server)throw new Error("Server-only method called in client mode");if("object"!=typeof e||null===e)throw new Error("attrs is not an object");const r=(e=L(e)).flags,n=e.nb;let i=9;const s=Buffer.allocUnsafe(13+n);p(s,s.length-4,0),s[4]=105,p(s,t,5),p(s,r,i),n&&(i+=4,n===g.length?s.set(g,i):u(g,s,0,n,i),i+=n);const o=M(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} ATTRS`)}},Stats:N,STATUS_CODE:A,stringToFlags:D}},2535:(t,e,r)=>{"use strict";const n=r(6982);let i;try{i=r(Object(function(){var t=new Error("Cannot find module 'cpu-features'");throw t.code="MODULE_NOT_FOUND",t}()))()}catch{}const{bindingAvailable:s,CIPHER_INFO:o,MAC_INFO:a}=r(7785),c=(()=>{if("function"==typeof n.sign&&"function"==typeof n.verify){const t="-----BEGIN PRIVATE KEY-----\r\nMC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r\n-----END PRIVATE KEY-----",e=Buffer.from("a");let r,i;try{r=n.sign(null,e,t),i=n.verify(null,e,t,r)}catch{}return Buffer.isBuffer(r)&&64===r.length&&!0===i}return!1})(),h="function"==typeof n.diffieHellman&&"function"==typeof n.generateKeyPairSync&&"function"==typeof n.createPublicKey,l=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];h&&(l.unshift("curve25519-sha256"),l.unshift("curve25519-sha256@libssh.org"));const u=l.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]),f=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];c&&f.unshift("ssh-ed25519");const d=f.concat(["ssh-dss"]),p=(()=>{const t=n.getCiphers();return e=>t.includes(o[e].sslName)})();let g=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];i&&i.flags&&!i.flags.aes?s?g.unshift("chacha20-poly1305@openssh.com"):g.push("chacha20-poly1305@openssh.com"):s&&i&&"x86"===i.arch?g.splice(4,0,"chacha20-poly1305@openssh.com"):g.push("chacha20-poly1305@openssh.com"),g=g.filter(p);const A=g.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(p)),_=(()=>{const t=n.getHashes();return e=>t.includes(a[e].sslName)})(),E=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(_),m=E.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(_)),y=["none","zlib@openssh.com","zlib"],S=y.concat([]),b={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4,BUG_DHGEX_LARGE:8,IMPLY_RSA_SHA2_SIGALGS:16};t.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,EXT_INFO:7,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:void 0,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce(((t,e)=>({...t,[e]:1})),{}),COMPAT:b,COMPAT_CHECKS:[["Cisco-1.25",b.BAD_DHGEX],[/^Cisco-1[.]/,b.BUG_DHGEX_LARGE],[/^[0-9.]+$/,b.OLD_EXIT],[/^OpenSSH_5[.][0-9]+/,b.DYN_RPORT_BUG],[/^OpenSSH_7[.]4/,b.IMPLY_RSA_SHA2_SIGALGS]],DEFAULT_KEX:l,SUPPORTED_KEX:u,DEFAULT_SERVER_HOST_KEY:f,SUPPORTED_SERVER_HOST_KEY:d,DEFAULT_CIPHER:g,SUPPORTED_CIPHER:A,DEFAULT_MAC:E,SUPPORTED_MAC:m,DEFAULT_COMPRESSION:y,SUPPORTED_COMPRESSION:S,curve25519Supported:h,eddsaSupported:c},t.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(t.exports.DISCONNECT_REASON)).reduce(((t,[e,r])=>({...t,[r]:e})),{})},7785:(t,e,r)=>{"use strict";const{createCipheriv:n,createDecipheriv:i,createHmac:s,randomFillSync:o,timingSafeEqual:a}=r(6982),{readUInt32BE:c,writeUInt32BE:h}=r(5623),l=Buffer[Symbol.species],u=2**32-1,f=Buffer.alloc(0),d=Buffer.alloc(4),p=new Map,g=35e3;let A,_,E,m,y,S,b;try{A=r(Object(function(){var t=new Error("Cannot find module './crypto/build/Release/sshcrypto.node'");throw t.code="MODULE_NOT_FOUND",t}())),({AESGCMCipher:_,ChaChaPolyCipher:E,GenericCipher:m,AESGCMDecipher:y,ChaChaPolyDecipher:S,GenericDecipher:b}=A)}catch{}const w=(()=>{function t(t,e,r,n,i,s,o){return{sslName:t,blockLen:e,keyLen:r,ivLen:0!==n||1&o?n:e,authLen:i,discardLen:s,stream:!!(1&o)}}return{"chacha20-poly1305@openssh.com":t("chacha20",8,64,0,16,0,1),"aes128-gcm":t("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm":t("aes-256-gcm",16,32,12,16,0,1),"aes128-gcm@openssh.com":t("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm@openssh.com":t("aes-256-gcm",16,32,12,16,0,1),"aes128-cbc":t("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":t("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":t("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":t("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":t("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":t("bf-cbc",8,16,0,0,0,0),"idea-cbc":t("idea-cbc",8,16,0,0,0,0),"cast128-cbc":t("cast-cbc",8,16,0,0,0,0),"aes128-ctr":t("aes-128-ctr",16,16,16,0,0,1),"aes192-ctr":t("aes-192-ctr",16,24,16,0,0,1),"aes256-ctr":t("aes-256-ctr",16,32,16,0,0,1),"3des-ctr":t("des-ede3",8,24,8,0,0,1),"blowfish-ctr":t("bf-ecb",8,16,8,0,0,1),"cast128-ctr":t("cast5-ecb",8,16,8,0,0,1),arcfour:t("rc4",8,16,0,0,1536,1),arcfour128:t("rc4",8,16,0,0,1536,1),arcfour256:t("rc4",8,32,0,0,1536,1),arcfour512:t("rc4",8,64,0,0,1536,1)}})(),v=(()=>{function t(t,e,r,n){return{sslName:t,len:e,actualLen:r,isETM:n}}return{"hmac-md5":t("md5",16,16,!1),"hmac-md5-96":t("md5",16,12,!1),"hmac-ripemd160":t("ripemd160",20,20,!1),"hmac-sha1":t("sha1",20,20,!1),"hmac-sha1-etm@openssh.com":t("sha1",20,20,!0),"hmac-sha1-96":t("sha1",20,12,!1),"hmac-sha2-256":t("sha256",32,32,!1),"hmac-sha2-256-etm@openssh.com":t("sha256",32,32,!0),"hmac-sha2-256-96":t("sha256",32,12,!1),"hmac-sha2-512":t("sha512",64,64,!1),"hmac-sha2-512-etm@openssh.com":t("sha512",64,64,!0),"hmac-sha2-512-96":t("sha512",64,12,!1)}})(),I=Buffer.alloc(32),C=Buffer.alloc(16);let k,R,B;class O{constructor(t){const e=t.outbound;this.outSeqno=e.seqno,this._onWrite=e.onWrite,this._encKeyMain=e.cipherKey.slice(0,32),this._encKeyPktLen=e.cipherKey.slice(32),this._dead=!1}free(){this._dead=!0}allocPacket(t){let e=5+t,r=8-(e-4&7);r<4&&(r+=8),e+=r;const n=Buffer.allocUnsafe(e);return h(n,e-4,0),n[4]=r,o(n,5+t,r),n}encrypt(t){if(this._dead)return;C[0]=0,h(C,this.outSeqno,12);const e=n("chacha20",this._encKeyMain,C).update(I),r=n("chacha20",this._encKeyPktLen,C).update(t.slice(0,4));this._onWrite(r),C[0]=1;const i=n("chacha20",this._encKeyMain,C).update(t.slice(4));this._onWrite(i),B(R,r,r.length,i,i.length,e);const s=Buffer.allocUnsafe(16);s.set(new Uint8Array(k.HEAPU8.buffer,R,16),0),this._onWrite(s),this.outSeqno=this.outSeqno+1>>>0}}class T{constructor(t){const e=t.outbound;this.outSeqno=e.seqno,this._onWrite=e.onWrite,this._instance=new E(e.cipherKey),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(t){let e=5+t,r=8-(e-4&7);r<4&&(r+=8),e+=r;const n=Buffer.allocUnsafe(e+16);return h(n,e-4,0),n[4]=r,o(n,5+t,r),n}encrypt(t){this._dead||(this._instance.encrypt(t,this.outSeqno),this._onWrite(t),this.outSeqno=this.outSeqno+1>>>0)}}class N{constructor(t){const e=t.outbound;this.outSeqno=e.seqno,this._onWrite=e.onWrite,this._encSSLName=e.cipherInfo.sslName,this._encKey=e.cipherKey,this._encIV=e.cipherIV,this._dead=!1}free(){this._dead=!0}allocPacket(t){let e=5+t,r=16-(e-4&15);r<4&&(r+=16),e+=r;const n=Buffer.allocUnsafe(e);return h(n,e-4,0),n[4]=r,o(n,5+t,r),n}encrypt(t){if(this._dead)return;const e=n(this._encSSLName,this._encKey,this._encIV);e.setAutoPadding(!1);const r=t.slice(0,4);e.setAAD(r),this._onWrite(r);const i=e.update(t.slice(4));this._onWrite(i);const s=e.final();s.length&&this._onWrite(s);const o=e.getAuthTag();this._onWrite(o),$(this._encIV),this.outSeqno=this.outSeqno+1>>>0}}class L{constructor(t){const e=t.outbound;this.outSeqno=e.seqno,this._onWrite=e.onWrite,this._instance=new _(e.cipherInfo.sslName,e.cipherKey,e.cipherIV),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(t){let e=5+t,r=16-(e-4&15);r<4&&(r+=16),e+=r;const n=Buffer.allocUnsafe(e+16);return h(n,e-4,0),n[4]=r,o(n,5+t,r),n}encrypt(t){this._dead||(this._instance.encrypt(t),this._onWrite(t),this.outSeqno=this.outSeqno+1>>>0)}}class P{constructor(t){const e=t.outbound;this.outSeqno=e.seqno,this._onWrite=e.onWrite,this._encBlockLen=e.cipherInfo.blockLen,this._cipherInstance=n(e.cipherInfo.sslName,e.cipherKey,e.cipherIV),this._macSSLName=e.macInfo.sslName,this._macKey=e.macKey,this._macActualLen=e.macInfo.actualLen,this._macETM=e.macInfo.isETM,this._aadLen=this._macETM?4:0,this._dead=!1;const r=e.cipherInfo.discardLen;if(r){let t=p.get(r);void 0===t&&(t=Buffer.alloc(r),p.set(r,t)),this._cipherInstance.update(t)}}free(){this._dead=!0}allocPacket(t){const e=this._encBlockLen;let r=5+t,n=e-(r-this._aadLen&e-1);n<4&&(n+=e),r+=n;const i=Buffer.allocUnsafe(r);return h(i,r-4,0),i[4]=n,o(i,5+t,n),i}encrypt(t){if(this._dead)return;let e;if(this._macETM){const r=new Uint8Array(t.buffer,t.byteOffset,4),n=this._cipherInstance.update(new Uint8Array(t.buffer,t.byteOffset+4,t.length-4));this._onWrite(r),this._onWrite(n),e=s(this._macSSLName,this._macKey),h(d,this.outSeqno,0),e.update(d),e.update(r),e.update(n)}else{const r=this._cipherInstance.update(t);this._onWrite(r),e=s(this._macSSLName,this._macKey),h(d,this.outSeqno,0),e.update(d),e.update(t)}let r=e.digest();r.length>this._macActualLen&&(r=r.slice(0,this._macActualLen)),this._onWrite(r),this.outSeqno=this.outSeqno+1>>>0}}class x{constructor(t){const e=t.outbound;this.outSeqno=e.seqno,this._onWrite=e.onWrite,this._encBlockLen=e.cipherInfo.blockLen,this._macLen=e.macInfo.len,this._macActualLen=e.macInfo.actualLen,this._aadLen=e.macInfo.isETM?4:0,this._instance=new m(e.cipherInfo.sslName,e.cipherKey,e.cipherIV,e.macInfo.sslName,e.macKey,e.macInfo.isETM),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(t){const e=this._encBlockLen;let r=5+t,n=e-(r-this._aadLen&e-1);n<4&&(n+=e),r+=n;const i=Buffer.allocUnsafe(r+this._macLen);return h(i,r-4,0),i[4]=n,o(i,5+t,n),i}encrypt(t){this._dead||(this._instance.encrypt(t,this.outSeqno),this._macActualLen<this._macLen&&(t=new l(t.buffer,t.byteOffset,t.length-(this._macLen-this._macActualLen))),this._onWrite(t),this.outSeqno=this.outSeqno+1>>>0)}}class U{constructor(t){const e=t.inbound;this.inSeqno=e.seqno,this._onPayload=e.onPayload,this._decKeyMain=e.decipherKey.slice(0,32),this._decKeyPktLen=e.decipherKey.slice(32),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._calcMac=Buffer.allocUnsafe(16),this._macPos=0}free(){}decrypt(t,e,r){for(;e<r;){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-e);for(;n--;)this._lenBuf[this._lenPos++]=t[e++];if(this._lenPos<4)return;C[0]=0,h(C,this.inSeqno,12);const s=i("chacha20",this._decKeyPktLen,C).update(this._lenBuf);if(this._len=c(s,0),this._len>g||this._len<8||7&this._len)throw new Error("Bad packet length")}if(this._pktLen<this._len){if(e>=r)return;const n=Math.min(this._len-this._pktLen,r-e);let i;if(i=0!==e||n!==r?new Uint8Array(t.buffer,t.byteOffset+e,n):t,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),e+=n,this._pktLen+=n,this._pktLen<this._len||e>=r)return}{const n=Math.min(16-this._macPos,r-e);if(0!==e||n!==r?this._mac.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._macPos):this._mac.set(t,this._macPos),e+=n,this._macPos+=n,this._macPos<16)return}C[0]=0,h(C,this.inSeqno,12);const s=n("chacha20",this._decKeyMain,C).update(I);if(B(R,this._lenBuf,4,this._packet,this._packet.length,s),this._calcMac.set(new Uint8Array(k.HEAPU8.buffer,R,16),0),!a(this._calcMac,this._mac))throw new Error("Invalid MAC");C[0]=1;const o=i("chacha20",this._decKeyMain,C).update(this._packet),u=new l(o.buffer,o.byteOffset+1,o.length-o[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const t=this._onPayload(u);if(void 0!==t)return!1===t?e:t}}}}class D{constructor(t){const e=t.inbound;this.inSeqno=e.seqno,this._onPayload=e.onPayload,this._instance=new S(e.decipherKey),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._macPos=0}free(){this._instance.free()}decrypt(t,e,r){for(;e<r;){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-e);for(;n--;)this._lenBuf[this._lenPos++]=t[e++];if(this._lenPos<4)return;if(this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno),this._len>g||this._len<8||7&this._len)throw new Error("Bad packet length");if(e>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-e);let i;if(i=0!==e||n!==r?new Uint8Array(t.buffer,t.byteOffset+e,n):t,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),e+=n,this._pktLen+=n,this._pktLen<this._len||e>=r)return}{const n=Math.min(16-this._macPos,r-e);if(0!==e||n!==r?this._mac.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._macPos):this._mac.set(t,this._macPos),e+=n,this._macPos+=n,this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);const n=new l(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const t=this._onPayload(n);if(void 0!==t)return!1===t?e:t}}}}class H{constructor(t){const e=t.inbound;this.inSeqno=e.seqno,this._onPayload=e.onPayload,this._decipherInstance=null,this._decipherSSLName=e.decipherInfo.sslName,this._decipherKey=e.decipherKey,this._decipherIV=e.decipherIV,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(t,e,r){for(;e<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-e);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+t[e++];if(this._lenBytes<4)return;if(this._len+20>g||this._len<16||15&this._len)throw new Error("Bad packet length");this._decipherInstance=i(this._decipherSSLName,this._decipherKey,this._decipherIV),this._decipherInstance.setAutoPadding(!1),this._decipherInstance.setAAD(W(this._len))}if(this._pktLen<this._len){if(e>=r)return;const n=Math.min(this._len-this._pktLen,r-e);let i;if(i=0!==e||n!==r?this._decipherInstance.update(new Uint8Array(t.buffer,t.byteOffset+e,n)):this._decipherInstance.update(t),i.length&&(n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._packetPos)),this._packetPos+=i.length),e+=n,this._pktLen+=n,this._pktLen<this._len||e>=r)return}{const n=Math.min(16-this._tagPos,r-e);if(0!==e||n!==r?this._tag.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._tagPos):this._tag.set(t,this._tagPos),e+=n,this._tagPos+=n,this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);const t=this._decipherInstance.final();t.length&&(this._packet?this._packet.set(t,this._packetPos):this._packet=t)}const n=this._packet?new l(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):f;this.inSeqno=this.inSeqno+1>>>0,$(this._decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tagPos=0;{const t=this._onPayload(n);if(void 0!==t)return!1===t?e:t}}}}class F{constructor(t){const e=t.inbound;this.inSeqno=e.seqno,this._onPayload=e.onPayload,this._instance=new y(e.decipherInfo.sslName,e.decipherKey,e.decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(t,e,r){for(;e<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-e);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+t[e++];if(this._lenBytes<4)return;if(this._len+20>g||this._len<16||15&this._len)throw new Error(`Bad packet length: ${this._len}`)}if(this._pktLen<this._len){if(e>=r)return;const n=Math.min(this._len-this._pktLen,r-e);let i;if(i=0!==e||n!==r?new Uint8Array(t.buffer,t.byteOffset+e,n):t,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),e+=n,this._pktLen+=n,this._pktLen<this._len||e>=r)return}{const n=Math.min(16-this._tagPos,r-e);if(0!==e||n!==r?this._tag.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._tagPos):this._tag.set(t,this._tagPos),e+=n,this._tagPos+=n,this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);const n=new l(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tagPos=0;{const t=this._onPayload(n);if(void 0!==t)return!1===t?e:t}}}}class M{constructor(t){const e=t.inbound;this.inSeqno=e.seqno,this._onPayload=e.onPayload,this._decipherInstance=i(e.decipherInfo.sslName,e.decipherKey,e.decipherIV),this._decipherInstance.setAutoPadding(!1),this._block=Buffer.allocUnsafe(e.macInfo.isETM?4:e.decipherInfo.blockLen),this._blockSize=e.decipherInfo.blockLen,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._mac=Buffer.allocUnsafe(e.macInfo.actualLen),this._macPos=0,this._macSSLName=e.macInfo.sslName,this._macKey=e.macKey,this._macActualLen=e.macInfo.actualLen,this._macETM=e.macInfo.isETM,this._macInstance=null;const r=e.decipherInfo.discardLen;if(r){let t=p.get(r);void 0===t&&(t=Buffer.alloc(r),p.set(r,t)),this._decipherInstance.update(t)}}free(){}decrypt(t,e,r){for(;e<r;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-e);if(0!==e||n!==r||n<t.length?this._block.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._blockPos):this._block.set(t,this._blockPos),e+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let i,o;if(this._macETM?this._len=o=c(this._block,0):(i=this._decipherInstance.update(this._block),this._len=c(i,0),o=4+this._len-this._blockSize),this._len>g||this._len<5||o&this._blockSize-1)throw new Error("Bad packet length");if(this._macInstance=s(this._macSSLName,this._macKey),h(d,this.inSeqno,0),this._macInstance.update(d),this._macETM?this._macInstance.update(this._block):(this._macInstance.update(new Uint8Array(i.buffer,i.byteOffset,4)),this._pktLen=i.length-4,this._packetPos=this._pktLen,this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(i.buffer,i.byteOffset+4,this._packetPos),0)),e>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-e);let i;i=0!==e||n!==r?new Uint8Array(t.buffer,t.byteOffset+e,n):t,this._macETM&&this._macInstance.update(i);const s=this._decipherInstance.update(i);if(s.length&&(n===this._len?this._packet=s:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(s,this._packetPos)),this._packetPos+=s.length),e+=n,this._pktLen+=n,this._pktLen<this._len||e>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-e);if(0!==e||n!==r?this._mac.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._macPos):this._mac.set(t,this._macPos),e+=n,this._macPos+=n,this._macPos<this._macActualLen)return}this._macETM||this._macInstance.update(this._packet);let o=this._macInstance.digest();if(this._macActualLen<o.length&&(o=new Uint8Array(o.buffer,o.byteOffset,this._macActualLen)),n=o,i=this._mac,!(n.length!==i.length?(a(n,n),0):a(n,i)))throw new Error("Invalid MAC");const u=new l(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._macPos=0,this._macInstance=null;{const t=this._onPayload(u);if(void 0!==t)return!1===t?e:t}}var n,i}}class Q{constructor(t){const e=t.inbound;this.inSeqno=e.seqno,this._onPayload=e.onPayload,this._instance=new b(e.decipherInfo.sslName,e.decipherKey,e.decipherIV,e.macInfo.sslName,e.macKey,e.macInfo.isETM,e.macInfo.actualLen),this._block=Buffer.allocUnsafe(e.macInfo.isETM||e.decipherInfo.stream?4:e.decipherInfo.blockLen),this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(e.macInfo.actualLen),this._macPos=0,this._macActualLen=e.macInfo.actualLen,this._macETM=e.macInfo.isETM}free(){this._instance.free()}decrypt(t,e,r){for(;e<r;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-e);if(0!==e||n!==r||n<t.length?this._block.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._blockPos):this._block.set(t,this._blockPos),e+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let i;if(this._macETM?this._len=i=c(this._block,0):(this._instance.decryptBlock(this._block),this._len=c(this._block,0),i=4+this._len-this._block.length),this._len>g||this._len<5||i&this._block.length-1)throw new Error("Bad packet length");if(this._macETM||(this._pktLen=this._block.length-4,this._pktLen&&(this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0))),e>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-e);let i;if(i=0!==e||n!==r?new Uint8Array(t.buffer,t.byteOffset+e,n):t,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._pktLen)),e+=n,this._pktLen+=n,this._pktLen<this._len||e>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-e);if(0!==e||n!==r?this._mac.set(new Uint8Array(t.buffer,t.byteOffset+e,n),this._macPos):this._mac.set(t,this._macPos),e+=n,this._macPos+=n,this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);const n=new l(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._macPos=0,this._macInstance=null;{const t=this._onPayload(n);if(void 0!==t)return!1===t?e:t}}}}function $(t){++t[11]>>>8&&++t[10]>>>8&&++t[9]>>>8&&++t[8]>>>8&&++t[7]>>>8&&++t[6]>>>8&&++t[5]>>>8&&++t[4]}const W=(()=>{const t=Buffer.alloc(4);return e=>(t[0]=e>>>24,t[1]=e>>>16,t[2]=e>>>8,t[3]=e,t)})();t.exports={CIPHER_INFO:w,MAC_INFO:v,bindingAvailable:!!A,init:new Promise((async(t,e)=>{try{k=await r(125)(),R=k._malloc(16),B=k.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(t){return e(t)}t()})),NullCipher:class{constructor(t,e){this.outSeqno=t,this._onWrite=e,this._dead=!1}free(){this._dead=!0}allocPacket(t){let e=5+t,r=8-(7&e);r<4&&(r+=8),e+=r;const n=Buffer.allocUnsafe(e);return h(n,e-4,0),n[4]=r,o(n,5+t,r),n}encrypt(t){this._dead||(this._onWrite(t),this.outSeqno=this.outSeqno+1>>>0)}},createCipher:function(t){if("object"!=typeof t||null===t)throw new Error("Invalid config");if("object"!=typeof t.outbound||null===t.outbound)throw new Error("Invalid outbound");const e=t.outbound;if("function"!=typeof e.onWrite)throw new Error("Invalid outbound.onWrite");if("object"!=typeof e.cipherInfo||null===e.cipherInfo)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(e.cipherKey)||e.cipherKey.length!==e.cipherInfo.keyLen)throw new Error("Invalid outbound.cipherKey");if(e.cipherInfo.ivLen&&(!Buffer.isBuffer(e.cipherIV)||e.cipherIV.length!==e.cipherInfo.ivLen))throw new Error("Invalid outbound.cipherIV");if("number"!=typeof e.seqno||e.seqno<0||e.seqno>u)throw new Error("Invalid outbound.seqno");const r=!!e.forceNative;switch(e.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return _&&!r?new L(t):new N(t);case"chacha20":return E&&!r?new T(t):new O(t);default:if("object"!=typeof e.macInfo||null===e.macInfo)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(e.macKey)||e.macKey.length!==e.macInfo.len)throw new Error("Invalid outbound.macKey");return m&&!r?new x(t):new P(t)}},NullDecipher:class{constructor(t,e){this.inSeqno=t,this._onPayload=e,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0}free(){}decrypt(t,e,r){for(;e<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-e);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+t[e++];if(this._lenBytes<4)return;if(this._len>g||this._len<8||4+this._len&7)throw new Error("Bad packet length");if(e>=r)return}if(this._packetPos<this._len){const n=Math.min(this._len-this._packetPos,r-e);let i;if(i=0!==e||n!==r?new Uint8Array(t.buffer,t.byteOffset+e,n):t,n===this._len?this._packet=i:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(i,this._packetPos)),e+=n,this._packetPos+=n,this._packetPos<this._len)return}const n=this._packet?new l(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):f;this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0;{const t=this._onPayload(n);if(void 0!==t)return!1===t?e:t}}}},createDecipher:function(t){if("object"!=typeof t||null===t)throw new Error("Invalid config");if("object"!=typeof t.inbound||null===t.inbound)throw new Error("Invalid inbound");const e=t.inbound;if("function"!=typeof e.onPayload)throw new Error("Invalid inbound.onPayload");if("object"!=typeof e.decipherInfo||null===e.decipherInfo)throw new Error("Invalid inbound.decipherInfo");if(!Buffer.isBuffer(e.decipherKey)||e.decipherKey.length!==e.decipherInfo.keyLen)throw new Error("Invalid inbound.decipherKey");if(e.decipherInfo.ivLen&&(!Buffer.isBuffer(e.decipherIV)||e.decipherIV.length!==e.decipherInfo.ivLen))throw new Error("Invalid inbound.decipherIV");if("number"!=typeof e.seqno||e.seqno<0||e.seqno>u)throw new Error("Invalid inbound.seqno");const r=!!e.forceNative;switch(e.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return y&&!r?new F(t):new H(t);case"chacha20":return S&&!r?new D(t):new U(t);default:if("object"!=typeof e.macInfo||null===e.macInfo)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(e.macKey)||e.macKey.length!==e.macInfo.len)throw new Error("Invalid inbound.macKey");return b&&!r?new Q(t):new M(t)}}}},125:(t,e,r)=>{var n,i=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||__filename,function(t){var e,i,s;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){i=t,s=e}));var o,a={};for(o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);var c,h,l,u,f,d="object"==typeof window,p="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,A="";g?(A=p?r(6928).dirname(A)+"/":__dirname+"/",c=function(t,e){var n=j(t);return n?e?n:n.toString():(u||(u=r(9896)),f||(f=r(6928)),t=f.normalize(t),u.readFileSync(t,e?null:"utf8"))},l=function(t){return(t=c(t,!0)).buffer||(t=new Uint8Array(t)),S(t.buffer),t},h=function(t,e,n){var i=j(t);i&&e(i),u||(u=r(9896)),f||(f=r(6928)),t=f.normalize(t),u.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),e.inspect=function(){return"[Emscripten Module object]"}):(d||p)&&(p?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),n&&(A=n),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",c=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(i){if(t=j(t)){e=[];for(var r=0;r<t.length;r++){var n=t[r];255<n&&($&&S(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+r+" not in 0x00-0xFF."),n&=255),e.push(String.fromCharCode(n))}return e.join("")}throw i}},p&&(l=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){if(t=j(t))return t;throw e}}),h=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)e(n.response);else{var i=j(t);i?e(i.buffer):r()}},n.onerror=r,n.send(null)}),e.print||console.log.bind(console);var _,E=e.printErr||console.warn.bind(console);for(o in a)a.hasOwnProperty(o)&&(e[o]=a[o]);a=null,e.wasmBinary&&(_=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var m,y=!1;function S(t,e){t||U("Assertion failed: "+e)}function b(t){var r=e["_"+t];return S(r,"Cannot call unknown function "+t+", make sure it is exported"),r}var w,v,I,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(){var t=m.buffer;w=t,e.HEAP8=v=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=new Int32Array(t),e.HEAPU8=I=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var R,B=[],O=[],T=[];function N(){var t=e.preRun.shift();B.unshift(t)}var L=0,P=null,x=null;function U(t){throw e.onAbort&&e.onAbort(t),E(t),y=!0,t=new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info."),s(t),t}e.preloadedImages={},e.preloadedAudios={};var D,H="data:application/octet-stream;base64,";if(!(D="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==").startsWith(H)){var F=D;D=e.locateFile?e.locateFile(F,A):A+F}function M(){var t=D;try{if(t==D&&_)return new Uint8Array(_);var e=j(t);if(e)return e;if(l)return l(t);throw"both async and sync fetching of the wasm failed"}catch(t){U(t)}}function Q(t){for(;0<t.length;){var r=t.shift();if("function"==typeof r)r(e);else{var n=r.m;"number"==typeof n?void 0===r.l?R.get(n)():R.get(n)(r.l):n(void 0===r.l?null:r.l)}}}var $=!1,W="function"==typeof atob?atob:function(t){var e="",r=0;t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++));n=n<<2|i>>4,i=(15&i)<<4|s>>2;var a=(3&s)<<6|o;e+=String.fromCharCode(n),64!==s&&(e+=String.fromCharCode(i)),64!==o&&(e+=String.fromCharCode(a))}while(r<t.length);return e};function j(t){if(t.startsWith(H)){if(t=t.slice(H.length),"boolean"==typeof g&&g){var e=Buffer.from(t,"base64");e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}else try{var r=W(t),n=new Uint8Array(r.length);for(t=0;t<r.length;++t)n[t]=r.charCodeAt(t);e=n}catch(t){throw Error("Converting base64 string to bytes failed.")}return e}}var K={a:function(t){var e=I.length;if(2147483648<(t>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=e*(1+.2/r);n=Math.min(n,t+100663296),0<(n=Math.max(t,n))%65536&&(n+=65536-n%65536);t:{try{m.grow(Math.min(2147483648,n)-w.byteLength+65535>>>16),k();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1}};!function(){function t(t){e.asm=t.exports,m=e.asm.b,k(),R=e.asm.j,O.unshift(e.asm.c),L--,e.monitorRunDependencies&&e.monitorRunDependencies(L),0==L&&(null!==P&&(clearInterval(P),P=null),x&&(t=x,x=null,t()))}function r(e){t(e.instance)}function n(t){return function(){if(!_&&(d||p)){if("function"==typeof fetch&&!D.startsWith("file://"))return fetch(D,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+D+"'";return t.arrayBuffer()})).catch((function(){return M()}));if(h)return new Promise((function(t,e){h(D,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return M()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then(t,(function(t){E("failed to asynchronously prepare wasm: "+t),U(t)}))}var i={a:K};if(L++,e.monitorRunDependencies&&e.monitorRunDependencies(L),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return E("Module.instantiateWasm callback failed with error: "+t),!1}(_||"function"!=typeof WebAssembly.instantiateStreaming||D.startsWith(H)||D.startsWith("file://")||"function"!=typeof fetch?n(r):fetch(D,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return E("wasm streaming compile failed: "+t),E("falling back to ArrayBuffer instantiation"),n(r)}))}))).catch(s)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.c).apply(null,arguments)},e._poly1305_auth=function(){return(e._poly1305_auth=e.asm.d).apply(null,arguments)};var G,q=e.stackSave=function(){return(q=e.stackSave=e.asm.e).apply(null,arguments)},V=e.stackRestore=function(){return(V=e.stackRestore=e.asm.f).apply(null,arguments)},z=e.stackAlloc=function(){return(z=e.stackAlloc=e.asm.g).apply(null,arguments)};function Y(){function t(){if(!G&&(G=!0,e.calledRun=!0,!y)){if(Q(O),i(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();T.unshift(t)}Q(T)}}if(!(0<L)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)N();Q(B),0<L||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e._malloc=function(){return(e._malloc=e.asm.h).apply(null,arguments)},e._free=function(){return(e._free=e.asm.i).apply(null,arguments)},e.cwrap=function(t,e,r,n){var i=(r=r||[]).every((function(t){return"number"===t}));return"string"!==e&&i&&!n?b(t):function(){return function(t,e,r,n){var i={string:function(t){var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2),n=e=z(r),i=I;if(0<r){r=n+r-1;for(var s=0;s<t.length;++s){var o=t.charCodeAt(s);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s)),127>=o){if(n>=r)break;i[n++]=o}else{if(2047>=o){if(n+1>=r)break;i[n++]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;i[n++]=224|o>>12}else{if(n+3>=r)break;i[n++]=240|o>>18,i[n++]=128|o>>12&63}i[n++]=128|o>>6&63}i[n++]=128|63&o}}i[n]=0}}return e},array:function(t){var e=z(t.length);return v.set(t,e),e}},s=b(t),o=[];if(t=0,n)for(var a=0;a<n.length;a++){var c=i[r[a]];c?(0===t&&(t=q()),o[a]=c(n[a])):o[a]=n[a]}return r=function(t){if("string"===e)if(t){for(var r=I,n=t+NaN,i=t;r[i]&&!(i>=n);)++i;if(16<i-t&&r.subarray&&C)t=C.decode(r.subarray(t,i));else{for(n="";t<i;){var s=r[t++];if(128&s){var o=63&r[t++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|o);else{var a=63&r[t++];65536>(s=224==(240&s)?(15&s)<<12|o<<6|a:(7&s)<<18|o<<12|a<<6|63&r[t++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}t=n}}else t="";else t="boolean"===e?!!t:t;return t}(r=s.apply(null,o)),0!==t&&V(t),r}(t,e,r,arguments)}},x=function t(){G||Y(),G||(x=t)},e.run=Y,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Y(),t.ready});t.exports=i},2569:(t,e,r)=>{"use strict";const n=new Array(256);[r(8818).HANDLERS,r(3439)].forEach((t=>{for(let[e,r]of Object.entries(t))e=+e,isFinite(e)&&e>=0&&e<n.length&&(n[e]=r)})),t.exports=n},3439:(t,e,r)=>{"use strict";const{bufferSlice:n,bufferParser:i,doFatalError:s,sigSSHToASN1:o,writeUInt32BE:a}=r(5623),{CHANNEL_OPEN_FAILURE:c,COMPAT:h,MESSAGE:l,TERMINAL_MODE:u}=r(2535),{parseKey:f}=r(8946),d=Array.from(Object.entries(u)).reduce(((t,[e,r])=>({...t,[e]:r})),{});t.exports={[l.DISCONNECT]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readString(!0),o=i.readString();if(i.clear(),void 0===o)return s(t,"Inbound: Malformed DISCONNECT packet");t._debug&&t._debug(`Inbound: Received DISCONNECT (${r}, "${n}")`);const a=t._handlers.DISCONNECT;a&&a(t,r,n)},[l.IGNORE]:(t,e)=>{t._debug&&t._debug("Inbound: Received IGNORE")},[l.UNIMPLEMENTED]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return s(t,"Inbound: Malformed UNIMPLEMENTED packet");t._debug&&t._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[l.DEBUG]:(t,e)=>{i.init(e,1);const r=i.readBool(),n=i.readString(!0),o=i.readString();if(i.clear(),void 0===o)return s(t,"Inbound: Malformed DEBUG packet");t._debug&&t._debug("Inbound: Received DEBUG");const a=t._handlers.DEBUG;a&&a(t,r,n)},[l.SERVICE_REQUEST]:(t,e)=>{i.init(e,1);const r=i.readString(!0);if(i.clear(),void 0===r)return s(t,"Inbound: Malformed SERVICE_REQUEST packet");t._debug&&t._debug(`Inbound: Received SERVICE_REQUEST (${r})`);const n=t._handlers.SERVICE_REQUEST;n&&n(t,r)},[l.SERVICE_ACCEPT]:(t,e)=>{i.init(e,1);const r=i.readString(!0);if(i.clear(),void 0===r)return s(t,"Inbound: Malformed SERVICE_ACCEPT packet");t._debug&&t._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);const n=t._handlers.SERVICE_ACCEPT;n&&n(t,r)},[l.EXT_INFO]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE();let n;if(void 0!==r){n=[];for(let t=0;t<r;++t){const t=i.readString(!0),e=i.readString();if(void 0===e){n=void 0;break}if("server-sig-algs"!==t);else{const r=e.latin1Slice(0,e.length).split(",");n.push({name:t,algs:r})}}}if(i.clear(),void 0===n)return s(t,"Inbound: Malformed EXT_INFO packet");t._debug&&t._debug("Inbound: Received EXT_INFO");const o=t._handlers.EXT_INFO;o&&o(t,n)},[l.USERAUTH_REQUEST]:(t,e)=>{i.init(e,1);const r=i.readString(!0),c=i.readString(!0),h=i.readString(!0);let l,u;switch(h){case"none":l=null;break;case"password":{const t=i.readBool();if(void 0!==t&&(l=i.readString(!0),void 0!==l&&t)){const t=i.readString(!0);l=void 0!==t?{oldPassword:l,newPassword:t}:void 0}break}case"publickey":{const r=i.readBool();if(void 0!==r){const s=i.readString(!0);let c=s;const h=i.readString();let f;switch(s){case"rsa-sha2-256":c="ssh-rsa",f="sha256";break;case"rsa-sha2-512":c="ssh-rsa",f="sha512"}if(r){const r=i.pos();let u=i.readString();if(void 0!==u&&(u.length>4+s.length+4&&u.utf8Slice(4,4+s.length)===s&&(u=n(u,4+s.length+4)),u=o(u,c),u)){const n=t._kex.sessionID,i=Buffer.allocUnsafe(4+n.length+r);a(i,n.length,0),i.set(n,4),i.set(new Uint8Array(e.buffer,e.byteOffset,r),4+n.length),l={keyAlgo:c,key:h,signature:u,blob:i,hashAlgo:f}}}else l={keyAlgo:c,key:h,hashAlgo:f},u="publickey -- check"}break}case"hostbased":{const r=i.readString(!0);let s=r;const c=i.readString(),h=i.readString(!0),u=i.readString(!0);let f;switch(r){case"rsa-sha2-256":s="ssh-rsa",f="sha256";break;case"rsa-sha2-512":s="ssh-rsa",f="sha512"}const d=i.pos();let p=i.readString();if(void 0!==p&&(p.length>4+r.length+4&&p.utf8Slice(4,4+r.length)===r&&(p=n(p,4+r.length+4)),p=o(p,s),void 0!==p)){const r=t._kex.sessionID,n=Buffer.allocUnsafe(4+r.length+d);a(n,r.length,0),n.set(r,4),n.set(new Uint8Array(e.buffer,e.byteOffset,d),4+r.length),l={keyAlgo:s,key:c,signature:p,blob:n,localHostname:h,localUsername:u,hashAlgo:f}}break}case"keyboard-interactive":i.skipString(),l=i.readList();break;default:void 0!==h&&(l=i.readRaw())}if(i.clear(),void 0===l)return s(t,"Inbound: Malformed USERAUTH_REQUEST packet");void 0===u&&(u=h),t._authsQueue.push(h),t._debug&&t._debug(`Inbound: Received USERAUTH_REQUEST (${u})`);const f=t._handlers.USERAUTH_REQUEST;f&&f(t,r,c,h,l)},[l.USERAUTH_FAILURE]:(t,e)=>{i.init(e,1);const r=i.readList(),n=i.readBool();if(i.clear(),void 0===n)return s(t,"Inbound: Malformed USERAUTH_FAILURE packet");t._debug&&t._debug(`Inbound: Received USERAUTH_FAILURE (${r})`),t._authsQueue.shift();const o=t._handlers.USERAUTH_FAILURE;o&&o(t,r,n)},[l.USERAUTH_SUCCESS]:(t,e)=>{t._debug&&t._debug("Inbound: Received USERAUTH_SUCCESS"),t._authsQueue.shift();const r=t._handlers.USERAUTH_SUCCESS;r&&r(t)},[l.USERAUTH_BANNER]:(t,e)=>{i.init(e,1);const r=i.readString(!0),n=i.readString();if(i.clear(),void 0===n)return s(t,"Inbound: Malformed USERAUTH_BANNER packet");t._debug&&t._debug("Inbound: Received USERAUTH_BANNER");const o=t._handlers.USERAUTH_BANNER;o&&o(t,r)},60:(t,e)=>{if(t._authsQueue.length)switch(t._authsQueue[0]){case"password":{i.init(e,1);const r=i.readString(!0),n=i.readString();if(i.clear(),void 0===n)return s(t,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet");t._debug&&t._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");const o=t._handlers.USERAUTH_PASSWD_CHANGEREQ;o&&o(t,r);break}case"publickey":{i.init(e,1);const r=i.readString(!0),n=i.readString();if(i.clear(),void 0===n)return s(t,"Inbound: Malformed USERAUTH_PK_OK packet");t._debug&&t._debug("Inbound: Received USERAUTH_PK_OK"),t._authsQueue.shift();const o=t._handlers.USERAUTH_PK_OK;o&&o(t,r,n);break}case"keyboard-interactive":{i.init(e,1);const r=i.readString(!0),n=i.readString(!0);i.readString();const o=i.readUInt32BE();let a;if(void 0!==o){let t;for(a=new Array(o),t=0;t<o;++t){const e=i.readString(!0),r=i.readBool();if(void 0===r)break;a[t]={prompt:e,echo:r}}t!==o&&(a=void 0)}if(i.clear(),void 0===a)return s(t,"Inbound: Malformed USERAUTH_INFO_REQUEST packet");t._debug&&t._debug("Inbound: Received USERAUTH_INFO_REQUEST");const c=t._handlers.USERAUTH_INFO_REQUEST;c&&c(t,r,n,a);break}default:t._debug&&t._debug("Inbound: Received unexpected payload type 60")}else t._debug&&t._debug("Inbound: Received payload type 60 without auth")},61:(t,e)=>{if(!t._authsQueue.length)return void(t._debug&&t._debug("Inbound: Received payload type 61 without auth"));if("keyboard-interactive"!==t._authsQueue[0])return s(t,"Inbound: Received unexpected payload type 61");i.init(e,1);const r=i.readUInt32BE();let n;if(void 0!==r){let t;for(n=new Array(r),t=0;t<r;++t){const e=i.readString(!0);if(void 0===e)break;n[t]=e}t!==r&&(n=void 0)}if(i.clear(),void 0===n)return s(t,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet");t._debug&&t._debug("Inbound: Received USERAUTH_INFO_RESPONSE");const o=t._handlers.USERAUTH_INFO_RESPONSE;o&&o(t,n)},[l.GLOBAL_REQUEST]:(t,e)=>{i.init(e,1);const r=i.readString(!0),n=i.readBool();let o;if(void 0!==n)switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{const t=i.readString(!0),e=i.readUInt32BE();void 0!==e&&(o={bindAddr:t,bindPort:e});break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{const t=i.readString(!0);void 0!==t&&(o={socketPath:t});break}case"no-more-sessions@openssh.com":o=null;break;case"hostkeys-00@openssh.com":for(o=[];i.avail()>0;){const t=i.readString();if(void 0===t){o=void 0;break}const e=f(t);e instanceof Error||o.push(e)}break;default:o=i.readRaw()}if(i.clear(),void 0===o)return s(t,"Inbound: Malformed GLOBAL_REQUEST packet");t._debug&&t._debug(`Inbound: GLOBAL_REQUEST (${r})`);const a=t._handlers.GLOBAL_REQUEST;a?a(t,r,n,o):t.requestFailure()},[l.REQUEST_SUCCESS]:(t,e)=>{const r=e.length>1?n(e,1):null;t._debug&&t._debug("Inbound: REQUEST_SUCCESS");const i=t._handlers.REQUEST_SUCCESS;i&&i(t,r)},[l.REQUEST_FAILURE]:(t,e)=>{t._debug&&t._debug("Inbound: Received REQUEST_FAILURE");const r=t._handlers.REQUEST_FAILURE;r&&r(t)},[l.CHANNEL_OPEN]:(t,e)=>{i.init(e,1);const r=i.readString(!0),n=i.readUInt32BE(),o=i.readUInt32BE(),a=i.readUInt32BE();let h;switch(r){case"forwarded-tcpip":case"direct-tcpip":{const t=i.readString(!0),e=i.readUInt32BE(),s=i.readString(!0),c=i.readUInt32BE();void 0!==c&&(h={type:r,sender:n,window:o,packetSize:a,data:{destIP:t,destPort:e,srcIP:s,srcPort:c}});break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{const t=i.readString(!0);void 0!==t&&(h={type:r,sender:n,window:o,packetSize:a,data:{socketPath:t}});break}case"x11":{const t=i.readString(!0),e=i.readUInt32BE();void 0!==e&&(h={type:r,sender:n,window:o,packetSize:a,data:{srcIP:t,srcPort:e}});break}default:h={type:r,sender:n,window:o,packetSize:a,data:{}}}if(i.clear(),void 0===h)return s(t,"Inbound: Malformed CHANNEL_OPEN packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN (s:${n}, ${r})`);const l=t._handlers.CHANNEL_OPEN;l?l(t,h):t.channelOpenFail(h.sender,c.ADMINISTRATIVELY_PROHIBITED,"","")},[l.CHANNEL_OPEN_CONFIRMATION]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readUInt32BE(),o=i.readUInt32BE(),a=i.readUInt32BE(),c=i.avail()?i.readRaw():void 0;if(i.clear(),void 0===a)return s(t,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${n})`);const h=t._handlers.CHANNEL_OPEN_CONFIRMATION;h&&h(t,{recipient:r,sender:n,window:o,packetSize:a,data:c})},[l.CHANNEL_OPEN_FAILURE]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readUInt32BE(),o=i.readString(!0),a=i.readString();if(i.clear(),void 0===a)return s(t,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);const c=t._handlers.CHANNEL_OPEN_FAILURE;c&&c(t,r,n,o)},[l.CHANNEL_WINDOW_ADJUST]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readUInt32BE();if(i.clear(),void 0===n)return s(t,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet");t._debug&&t._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${n})`);const o=t._handlers.CHANNEL_WINDOW_ADJUST;o&&o(t,r,n)},[l.CHANNEL_DATA]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readString();if(i.clear(),void 0===n)return s(t,"Inbound: Malformed CHANNEL_DATA packet");t._debug&&t._debug(`Inbound: CHANNEL_DATA (r:${r}, ${n.length})`);const o=t._handlers.CHANNEL_DATA;o&&o(t,r,n)},[l.CHANNEL_EXTENDED_DATA]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readUInt32BE(),o=i.readString();if(i.clear(),void 0===o)return s(t,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet");t._debug&&t._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${o.length})`);const a=t._handlers.CHANNEL_EXTENDED_DATA;a&&a(t,r,o,n)},[l.CHANNEL_EOF]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return s(t,"Inbound: Malformed CHANNEL_EOF packet");t._debug&&t._debug(`Inbound: CHANNEL_EOF (r:${r})`);const n=t._handlers.CHANNEL_EOF;n&&n(t,r)},[l.CHANNEL_CLOSE]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return s(t,"Inbound: Malformed CHANNEL_CLOSE packet");t._debug&&t._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);const n=t._handlers.CHANNEL_CLOSE;n&&n(t,r)},[l.CHANNEL_REQUEST]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE(),n=i.readString(!0),o=i.readBool();let a;if(void 0!==o)switch(n){case"exit-status":a=i.readUInt32BE(),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;case"exit-signal":{let e,s;if(t._compatFlags&h.OLD_EXIT){const t=i.readUInt32BE();switch(t){case 1:e="HUP";break;case 2:e="INT";break;case 3:e="QUIT";break;case 6:e="ABRT";break;case 9:e="KILL";break;case 14:e="ALRM";break;case 15:e="TERM";break;default:void 0!==t&&(e=`UNKNOWN (${t})`)}s=!1}else e=i.readString(!0),s=i.readBool(),void 0===s&&(e=void 0);const o=i.readString(!0);void 0!==i.skipString()&&(a={signal:e,coreDumped:s,errorMessage:o}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${e})`);break}case"pty-req":{const e=i.readString(!0),s=i.readUInt32BE(),o=i.readUInt32BE(),c=i.readUInt32BE(),h=i.readUInt32BE(),l=i.readString();if(void 0!==l){i.init(l,1);let t={};for(;i.avail();){const e=i.readByte();if(e===u.TTY_OP_END)break;const r=d[e],n=i.readUInt32BE();if(void 0===e||void 0===r||void 0===n){t=void 0;break}t[r]=n}void 0!==t&&(a={term:e,cols:s,rows:o,width:c,height:h,modes:t})}t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"window-change":{const e=i.readUInt32BE(),s=i.readUInt32BE(),o=i.readUInt32BE(),c=i.readUInt32BE();void 0!==c&&(a={cols:e,rows:s,width:o,height:c}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"x11-req":{const e=i.readBool(),s=i.readString(!0),o=i.readString(),c=i.readUInt32BE();void 0!==c&&(a={single:e,protocol:s,cookie:o,screen:c}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"env":{const e=i.readString(!0),s=i.readString(!0);void 0!==s&&(a={name:e,value:s}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${e}=${s})`);break}case"shell":case"auth-agent-req@openssh.com":a=null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;case"exec":case"subsystem":case"signal":a=i.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;case"xon-xoff":a=i.readBool(),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;default:a=i.avail()?i.readRaw():null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`)}if(i.clear(),void 0===a)return s(t,"Inbound: Malformed CHANNEL_REQUEST packet");const c=t._handlers.CHANNEL_REQUEST;c&&c(t,r,n,o,a)},[l.CHANNEL_SUCCESS]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return s(t,"Inbound: Malformed CHANNEL_SUCCESS packet");t._debug&&t._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);const n=t._handlers.CHANNEL_SUCCESS;n&&n(t,r)},[l.CHANNEL_FAILURE]:(t,e)=>{i.init(e,1);const r=i.readUInt32BE();if(i.clear(),void 0===r)return s(t,"Inbound: Malformed CHANNEL_FAILURE packet");t._debug&&t._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);const n=t._handlers.CHANNEL_FAILURE;n&&n(t,r)}}},8818:(t,e,r)=>{"use strict";const{createDiffieHellman:n,createDiffieHellmanGroup:i,createECDH:s,createHash:o,createPublicKey:a,diffieHellman:c,generateKeyPairSync:h,randomFillSync:l}=r(6982),{Ber:u}=r(3100),{COMPAT:f,curve25519Supported:d,DEFAULT_KEX:p,DEFAULT_SERVER_HOST_KEY:g,DEFAULT_CIPHER:A,DEFAULT_MAC:_,DEFAULT_COMPRESSION:E,DISCONNECT_REASON:m,MESSAGE:y}=r(2535),{CIPHER_INFO:S,createCipher:b,createDecipher:w,MAC_INFO:v}=r(7785),{parseDERKey:I}=r(8946),{bufferFill:C,bufferParser:k,convertSignature:R,doFatalError:B,FastBuffer:O,sigSSHToASN1:T,writeUInt32BE:N,convertToMpint:L}=r(5623),{PacketReader:P,PacketWriter:x,ZlibPacketReader:U,ZlibPacketWriter:D}=r(3129);let H;const F=Buffer.alloc(0);function M(t){let e;if(t._compatFlags&f.BAD_DHGEX){const r=t._offer.lists.kex;let n=r.array,i=!1;for(let t=0;t<n.length;++t)n[t].includes("group-exchange")&&(i||(i=!0,n=n.slice()),n.splice(t--,1));if(i){let i=17+t._offer.totalSize+1+4;const s=Buffer.from(n.join(","));i-=r.buffer.length-s.length;const o=t._offer.lists.all,a=new Uint8Array(o.buffer,o.byteOffset+4+r.buffer.length,o.length-(4+r.buffer.length));e=Buffer.allocUnsafe(i),N(e,s.length,17),e.set(s,21),e.set(a,21+s.length)}}void 0===e&&(e=Buffer.allocUnsafe(17+t._offer.totalSize+1+4),t._offer.copyAllTo(e,17)),t._debug&&t._debug("Outbound: Sending KEXINIT"),e[0]=y.KEXINIT,l(e,1,16),C(e,0,e.length-5),t._kexinit=e,t._packetRW.write.allocStart=0;{const r=t._packetRW.write.allocStartKEX,n=t._packetRW.write.alloc(e.length,!0);n.set(e,r),t._cipher.encrypt(t._packetRW.write.finalize(n,!0))}}function Q(t,e){const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0}};if(k.init(e,17),void 0===(r.kex=k.readList())||void 0===(r.serverHostKey=k.readList())||void 0===(r.cs.cipher=k.readList())||void 0===(r.sc.cipher=k.readList())||void 0===(r.cs.mac=k.readList())||void 0===(r.sc.mac=k.readList())||void 0===(r.cs.compress=k.readList())||void 0===(r.sc.compress=k.readList())||void 0===(r.cs.lang=k.readList())||void 0===(r.sc.lang=k.readList()))return k.clear(),B(t,"Received malformed KEXINIT","handshake",m.KEY_EXCHANGE_FAILED);const n=k.pos(),i=n<e.length&&1===e[n];k.clear();const s=t._offer,o=r;let a,c,h,l=s.lists.kex.array;if(t._compatFlags&f.BAD_DHGEX){let t=!1;for(let e=0;e<l.length;++e)-1!==l[e].indexOf("group-exchange")&&(t||(t=!0,l=l.slice()),l.splice(e--,1))}const u=t._debug;let d;for(u&&u("Inbound: Handshake in progress"),u&&u(`Handshake: (local) KEX method: ${l}`),u&&u(`Handshake: (remote) KEX method: ${o.kex}`),t._server?(c=l,a=o.kex,d=-1!==a.indexOf("ext-info-c")):(c=o.kex,a=l,d=-1!==c.indexOf("ext-info-s")),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching key exchange algorithm"),B(t,"Handshake failed: no matching key exchange algorithm","handshake",m.KEY_EXCHANGE_FAILED);r.kex=a[h],u&&u(`Handshake: KEX algorithm: ${a[h]}`),!i||o.kex.length&&a[h]===o.kex[0]||(t._skipNextInboundPacket=!0);const p=s.lists.serverHostKey.array;for(u&&u(`Handshake: (local) Host key format: ${p}`),u&&u(`Handshake: (remote) Host key format: ${o.serverHostKey}`),t._server?(c=p,a=o.serverHostKey):(c=o.serverHostKey,a=p),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching host key format"),B(t,"Handshake failed: no matching host key format","handshake",m.KEY_EXCHANGE_FAILED);r.serverHostKey=a[h],u&&u(`Handshake: Host key format: ${a[h]}`);const g=s.lists.cs.cipher.array;for(u&&u(`Handshake: (local) C->S cipher: ${g}`),u&&u(`Handshake: (remote) C->S cipher: ${o.cs.cipher}`),t._server?(c=g,a=o.cs.cipher):(c=o.cs.cipher,a=g),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching C->S cipher"),B(t,"Handshake failed: no matching C->S cipher","handshake",m.KEY_EXCHANGE_FAILED);r.cs.cipher=a[h],u&&u(`Handshake: C->S Cipher: ${a[h]}`);const A=s.lists.sc.cipher.array;for(u&&u(`Handshake: (local) S->C cipher: ${A}`),u&&u(`Handshake: (remote) S->C cipher: ${o.sc.cipher}`),t._server?(c=A,a=o.sc.cipher):(c=o.sc.cipher,a=A),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching S->C cipher"),B(t,"Handshake failed: no matching S->C cipher","handshake",m.KEY_EXCHANGE_FAILED);r.sc.cipher=a[h],u&&u(`Handshake: S->C cipher: ${a[h]}`);const _=s.lists.cs.mac.array;if(u&&u(`Handshake: (local) C->S MAC: ${_}`),u&&u(`Handshake: (remote) C->S MAC: ${o.cs.mac}`),S[r.cs.cipher].authLen>0)r.cs.mac="",u&&u("Handshake: C->S MAC: <implicit>");else{for(t._server?(c=_,a=o.cs.mac):(c=o.cs.mac,a=_),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching C->S MAC"),B(t,"Handshake failed: no matching C->S MAC","handshake",m.KEY_EXCHANGE_FAILED);r.cs.mac=a[h],u&&u(`Handshake: C->S MAC: ${a[h]}`)}const E=s.lists.sc.mac.array;if(u&&u(`Handshake: (local) S->C MAC: ${E}`),u&&u(`Handshake: (remote) S->C MAC: ${o.sc.mac}`),S[r.sc.cipher].authLen>0)r.sc.mac="",u&&u("Handshake: S->C MAC: <implicit>");else{for(t._server?(c=E,a=o.sc.mac):(c=o.sc.mac,a=E),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching S->C MAC"),B(t,"Handshake failed: no matching S->C MAC","handshake",m.KEY_EXCHANGE_FAILED);r.sc.mac=a[h],u&&u(`Handshake: S->C MAC: ${a[h]}`)}const y=s.lists.cs.compress.array;for(u&&u(`Handshake: (local) C->S compression: ${y}`),u&&u(`Handshake: (remote) C->S compression: ${o.cs.compress}`),t._server?(c=y,a=o.cs.compress):(c=o.cs.compress,a=y),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching C->S compression"),B(t,"Handshake failed: no matching C->S compression","handshake",m.KEY_EXCHANGE_FAILED);r.cs.compress=a[h],u&&u(`Handshake: C->S compression: ${a[h]}`);const b=s.lists.sc.compress.array;for(u&&u(`Handshake: (local) S->C compression: ${b}`),u&&u(`Handshake: (remote) S->C compression: ${o.sc.compress}`),t._server?(c=b,a=o.sc.compress):(c=o.sc.compress,a=b),h=0;h<a.length&&-1===c.indexOf(a[h]);++h);if(h===a.length)return u&&u("Handshake: No matching S->C compression"),B(t,"Handshake failed: no matching S->C compression","handshake",m.KEY_EXCHANGE_FAILED);r.sc.compress=a[h],u&&u(`Handshake: S->C compression: ${a[h]}`),r.cs.lang="",r.sc.lang="",t._kex&&(t._kexinit||M(t),t._decipher._onPayload=G.bind(t,{firstPacket:!1})),t._kex=$(r,t,e),t._kex.remoteExtInfoEnabled=d,t._kex.start()}const $=(()=>{class t{constructor(t,e,r){this._protocol=e,this.sessionID=e._kex?e._kex.sessionID:void 0,this.negotiated=t,this.remoteExtInfoEnabled=!1,this._step=1,this._public=null,this._dh=null,this._sentNEWKEYS=!1,this._receivedNEWKEYS=!1,this._finished=!1,this._hostVerified=!1,this._kexinit=e._kexinit,this._remoteKexinit=r,this._identRaw=e._identRaw,this._remoteIdentRaw=e._remoteIdentRaw,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0}finish(t){if(this._finished)return!1;this._finished=!0;const e=this._protocol._server,r=this.negotiated,n=this.convertPublicKey(this._dhData);let i=this.computeSecret(this._dhData);if(i instanceof Error)return i.message=`Error while computing DH secret (${this.type}): ${i.message}`,i.level="handshake",B(this._protocol,i,m.KEY_EXCHANGE_FAILED);const s=o(this.hashName);j(s,e?this._remoteIdentRaw:this._identRaw),j(s,e?this._identRaw:this._remoteIdentRaw),j(s,e?this._remoteKexinit:this._kexinit),j(s,e?this._kexinit:this._remoteKexinit);const a=e?this._hostKey.getPublicSSH():this._hostKey;if(j(s,a),"groupex"===this.type){const t=this.getDHParams(),e=Buffer.allocUnsafe(4);N(e,this._minBits,0),s.update(e),N(e,this._prefBits,0),s.update(e),N(e,this._maxBits,0),s.update(e),j(s,t.prime),j(s,t.generator)}j(s,e?n:this.getPublicKey());const c=e?this.getPublicKey():n;j(s,c),j(s,i);const h=s.digest();if(e){let t;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":t="sha256";break;case"rsa-sha2-512":t="sha512"}this._protocol._debug&&this._protocol._debug("Generating signature ...");let e=this._hostKey.sign(h,t);if(e instanceof Error)return B(this._protocol,`Handshake failed: signature generation failed for ${this._hostKey.type} host key: ${e.message}`,"handshake",m.KEY_EXCHANGE_FAILED);if(e=R(e,this._hostKey.type),!1===e)return B(this._protocol,`Handshake failed: signature conversion failed for ${this._hostKey.type} host key`,"handshake",m.KEY_EXCHANGE_FAILED);const r=this.negotiated.serverHostKey,n=Buffer.byteLength(r),i=4+n+4+e.length;let s=this._protocol._packetRW.write.allocStartKEX;const o=this._protocol._packetRW.write.alloc(5+a.length+4+c.length+4+i,!0);if(o[s]=y.KEXDH_REPLY,N(o,a.length,++s),o.set(a,s+=4),N(o,c.length,s+=a.length),o.set(c,s+=4),N(o,i,s+=c.length),N(o,n,s+=4),o.utf8Write(r,s+=4,n),N(o,e.length,s+=n),o.set(e,s+=4),this._protocol._debug){let t;switch(this.type){case"group":t="KEXDH_REPLY";break;case"groupex":t="KEXDH_GEX_REPLY";break;default:t="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${t}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(o,!0))}else{k.init(this._sig,0);const t=k.readString(!0);if(!t)return B(this._protocol,"Malformed packet while reading signature","handshake",m.KEY_EXCHANGE_FAILED);if(t!==r.serverHostKey)return B(this._protocol,`Wrong signature type: ${t}, expected: ${r.serverHostKey}`,"handshake",m.KEY_EXCHANGE_FAILED);let e,n,i=k.readString();if(k.clear(),void 0===i)return B(this._protocol,"Malformed packet while reading signature","handshake",m.KEY_EXCHANGE_FAILED);if(!(i=T(i,t)))return B(this._protocol,"Malformed signature","handshake",m.KEY_EXCHANGE_FAILED);{k.init(this._hostKey,0);const t=k.readString(!0),r=this._hostKey.slice(k.pos());if(k.clear(),e=I(r,t),e instanceof Error)return e.level="handshake",B(this._protocol,e,m.KEY_EXCHANGE_FAILED)}switch(this.negotiated.serverHostKey){case"rsa-sha2-256":n="sha256";break;case"rsa-sha2-512":n="sha512"}this._protocol._debug&&this._protocol._debug("Verifying signature ...");const s=e.verify(h,i,n);if(!0!==s)return s instanceof Error?this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${s.stack}`):this._protocol._debug&&this._protocol._debug("Signature verification failed"),B(this._protocol,"Handshake failed: signature verification failed","handshake",m.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Verified signature")}let l,u;!e&&t||q(this);const f=t=>{if(l)return q(this),l.outbound.seqno=this._protocol._cipher.outSeqno,this._protocol._cipher.free(),this._protocol._cipher=b(l),this._protocol._packetRW.write=u,l=void 0,u=void 0,this._protocol._onHandshakeComplete(r),!1;this.sessionID||(this.sessionID=h);{const t=Buffer.allocUnsafe(4+i.length);N(t,i.length,0),t.set(i,4),i=t}const n=S[r.cs.cipher],s=S[r.sc.cipher],o=K(n.ivLen,this.hashName,i,h,this.sessionID,"A"),a=K(s.ivLen,this.hashName,i,h,this.sessionID,"B"),c=K(n.keyLen,this.hashName,i,h,this.sessionID,"C"),d=K(s.keyLen,this.hashName,i,h,this.sessionID,"D");let p,g,A,_;n.authLen||(p=v[r.cs.mac],g=K(p.len,this.hashName,i,h,this.sessionID,"E")),s.authLen||(A=v[r.sc.mac],_=K(A.len,this.hashName,i,h,this.sessionID,"F"));const E={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:e?n:s,decipherIV:e?o:a,decipherKey:e?c:d,macInfo:e?p:A,macKey:e?g:_},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:e?s:n,cipherIV:e?a:o,cipherKey:e?d:c,macInfo:e?A:p,macKey:e?_:g}};this._protocol._decipher.free(),l=E,this._protocol._decipher=w(E);const m={read:void 0,write:void 0};switch(r.cs.compress){case"zlib":e?m.read=new U:m.write=new D(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){e?m.read=new U:m.write=new D(this._protocol);break}default:e?m.read=new P:m.write=new x(this._protocol)}switch(r.sc.compress){case"zlib":e?m.write=new D(this._protocol):m.read=new U;break;case"zlib@openssh.com":if(this._protocol._authenticated){e?m.write=new D(this._protocol):m.read=new U;break}default:e?m.write=new x(this._protocol):m.read=new P}return this._protocol._packetRW.read.cleanup(),this._protocol._packetRW.write.cleanup(),this._protocol._packetRW.read=m.read,u=m.write,this._public=null,this._dh=null,this._kexinit=this._protocol._kexinit=void 0,this._remoteKexinit=void 0,this._identRaw=void 0,this._remoteIdentRaw=void 0,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0,!t&&f()};return(e||t)&&(this.finish=f),e?void 0:f(t)}start(){if(!this._protocol._server){if(this._protocol._debug){let t;t="group"===this.type?"KEXDH_INIT":"KEXECDH_INIT",this._protocol._debug(`Outbound: Sending ${t}`)}const t=this.getPublicKey();let e=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+t.length,!0);r[e]=y.KEXDH_INIT,N(r,t.length,++e),r.set(t,e+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}getPublicKey(){this.generateKeys();const t=this._public;if(t)return this.convertPublicKey(t)}convertPublicKey(t){let e,r=0,n=t.length;for(;0===t[r];)++r,--n;return 128&t[r]?(e=Buffer.allocUnsafe(1+n),e[0]=0,t.copy(e,1,r),e):(n!==t.length&&(e=Buffer.allocUnsafe(n),t.copy(e,0,r),t=e),t)}computeSecret(t){this.generateKeys();try{return L(this._dh.computeSecret(t))}catch(t){return t}}parse(t){const e=t[0];switch(this._step){case 1:if(this._protocol._server){if(e!==y.KEXDH_INIT)return B(this._protocol,`Received packet ${e} instead of ${y.KEXDH_INIT}`,"handshake",m.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Init"),k.init(t,1);const r=k.readString();if(k.clear(),void 0===r)return B(this._protocol,"Received malformed KEX*_INIT","handshake",m.KEY_EXCHANGE_FAILED);this._dhData=r;let n=this._protocol._hostKeys[this.negotiated.serverHostKey];Array.isArray(n)&&(n=n[0]),this._hostKey=n,this.finish()}else{if(e!==y.KEXDH_REPLY)return B(this._protocol,`Received packet ${e} instead of ${y.KEXDH_REPLY}`,"handshake",m.KEY_EXCHANGE_FAILED);let r,n,i;if(this._protocol._debug&&this._protocol._debug("Received DH Reply"),k.init(t,1),void 0===(r=k.readString())||void 0===(n=k.readString())||void 0===(i=k.readString()))return k.clear(),B(this._protocol,"Received malformed KEX*_REPLY","handshake",m.KEY_EXCHANGE_FAILED);k.clear(),k.init(r,0);const s=k.readString(!0);if(k.clear(),void 0===s)return B(this._protocol,"Received malformed host public key","handshake",m.KEY_EXCHANGE_FAILED);if(s!==this.negotiated.serverHostKey)switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if("ssh-rsa"===s)break;default:return B(this._protocol,"Host key does not match negotiated type","handshake",m.KEY_EXCHANGE_FAILED)}this._hostKey=r,this._dhData=n,this._sig=i;let o,a=!1;if(void 0===this._protocol._hostVerifier?(o=!0,this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")):o=this._protocol._hostVerifier(r,(t=>{if(!a){if(a=!0,!1===t)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),B(this._protocol,"Host denied (verification failed)","handshake",m.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,this._receivedNEWKEYS?this.finish():q(this)}})),void 0===o)return void++this._step;if(a=!0,!1===o)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),B(this._protocol,"Host denied (verification failed)","handshake",m.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,q(this)}++this._step;break;case 2:return e!==y.NEWKEYS?B(this._protocol,`Received packet ${e} instead of ${y.NEWKEYS}`,"handshake",m.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS"),this._receivedNEWKEYS=!0,++this._step,this.finish(!this._protocol._server&&!this._hostVerified));default:return B(this._protocol,`Received unexpected packet ${e} after NEWKEYS`,"handshake",m.KEY_EXCHANGE_FAILED)}}}class e extends t{constructor(t,...e){super(...e),this.type="25519",this.hashName=t,this._keys=null}generateKeys(){this._keys||(this._keys=h("x25519"))}getPublicKey(){return this.generateKeys(),this._keys.publicKey.export({type:"spki",format:"der"}).slice(-32)}convertPublicKey(t){let e,r=0,n=t.length;for(;0===t[r];)++r,--n;return 32===t.length||n!==t.length&&(e=Buffer.allocUnsafe(n),t.copy(e,0,r),t=e),t}computeSecret(t){this.generateKeys();try{const e=new u.Writer;return e.startSequence(),e.startSequence(),e.writeOID("1.3.101.110"),e.endSequence(),e.startSequence(u.BitString),e.writeByte(0),e._ensure(t.length),t.copy(e._buf,e._offset,0,t.length),e._offset+=t.length,e.endSequence(),e.endSequence(),L(c({privateKey:this._keys.privateKey,publicKey:a({key:e.buffer,type:"spki",format:"der"})}))}catch(t){return t}}}class r extends t{constructor(t,e,...r){super(...r),this.type="ecdh",this.curveName=t,this.hashName=e}generateKeys(){this._dh||(this._dh=s(this.curveName),this._public=this._dh.generateKeys())}}class l extends t{constructor(t,...e){super(...e),this.type="groupex",this.hashName=t,this._prime=null,this._generator=null,this._minBits=2048,this._prefBits=function(t){const e=S[t.cs.cipher],r=S[t.sc.cipher],n=8*Math.max(0,"des-ede3-cbc"===e.sslName?14:e.keyLen,e.blockLen,e.ivLen,"des-ede3-cbc"===r.sslName?14:r.keyLen,r.blockLen,r.ivLen);return n<=112?2048:n<=128?3072:n<=192?7680:8192}(this.negotiated),this._protocol._compatFlags&f.BUG_DHGEX_LARGE&&(this._prefBits=Math.min(this._prefBits,4096)),this._maxBits=8192}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let t=this._protocol._packetRW.write.allocStartKEX;const e=this._protocol._packetRW.write.alloc(13,!0);e[t]=y.KEXDH_GEX_REQUEST,N(e,this._minBits,++t),N(e,this._prefBits,t+=4),N(e,this._maxBits,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(e,!0))}generateKeys(){!this._dh&&this._prime&&this._generator&&(this._dh=n(this._prime,this._generator),this._public=this._dh.generateKeys())}setDHParams(t,e){if(!Buffer.isBuffer(t))throw new Error("Invalid prime value");if(!Buffer.isBuffer(e))throw new Error("Invalid generator value");this._prime=t,this._generator=e}getDHParams(){if(this._dh)return{prime:L(this._dh.getPrime()),generator:L(this._dh.getGenerator())}}parse(e){const r=e[0];switch(this._step){case 1:{if(this._protocol._server)return r!==y.KEXDH_GEX_REQUEST?B(this._protocol,`Received packet ${r} instead of `+y.KEXDH_GEX_REQUEST,"handshake",m.KEY_EXCHANGE_FAILED):B(this._protocol,"Group exchange not implemented for server","handshake",m.KEY_EXCHANGE_FAILED);if(r!==y.KEXDH_GEX_GROUP)return B(this._protocol,`Received packet ${r} instead of ${y.KEXDH_GEX_GROUP}`,"handshake",m.KEY_EXCHANGE_FAILED);let t,n;if(this._protocol._debug&&this._protocol._debug("Received DH GEX Group"),k.init(e,1),void 0===(t=k.readString())||void 0===(n=k.readString()))return k.clear(),B(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",m.KEY_EXCHANGE_FAILED);k.clear(),this.setDHParams(t,n),this.generateKeys();const i=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let s=this._protocol._packetRW.write.allocStartKEX;const o=this._protocol._packetRW.write.alloc(5+i.length,!0);o[s]=y.KEXDH_GEX_INIT,N(o,i.length,++s),o.set(i,s+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(o,!0)),++this._step;break}case 2:if(this._protocol._server)return r!==y.KEXDH_GEX_INIT?B(this._protocol,`Received packet ${r} instead of ${y.KEXDH_GEX_INIT}`,"handshake",m.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Received DH GEX Init"),B(this._protocol,"Group exchange not implemented for server","handshake",m.KEY_EXCHANGE_FAILED));if(r!==y.KEXDH_GEX_REPLY)return B(this._protocol,`Received packet ${r} instead of ${y.KEXDH_GEX_REPLY}`,"handshake",m.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Reply"),this._step=1,e[0]=y.KEXDH_REPLY,this.parse=t.prototype.parse,this.parse(e)}}}class p extends t{constructor(t,e,...r){super(...r),this.type="group",this.groupName=t,this.hashName=e}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");const t=this.getPublicKey();let e=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+t.length,!0);r[e]=y.KEXDH_INIT,N(r,t.length,++e),r.set(t,e+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}generateKeys(){this._dh||(this._dh=i(this.groupName),this._public=this._dh.generateKeys())}getDHParams(){if(this._dh)return{prime:L(this._dh.getPrime()),generator:L(this._dh.getGenerator())}}}return(t,...n)=>{if("object"!=typeof t||null===t)throw new Error("Invalid negotiated argument");const i=t.kex;if("string"==typeof i){switch(n=[t,...n],i){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!d)break;return new e("sha256",...n);case"ecdh-sha2-nistp256":return new r("prime256v1","sha256",...n);case"ecdh-sha2-nistp384":return new r("secp384r1","sha384",...n);case"ecdh-sha2-nistp521":return new r("secp521r1","sha512",...n);case"diffie-hellman-group1-sha1":return new p("modp2","sha1",...n);case"diffie-hellman-group14-sha1":return new p("modp14","sha1",...n);case"diffie-hellman-group14-sha256":return new p("modp14","sha256",...n);case"diffie-hellman-group15-sha512":return new p("modp15","sha512",...n);case"diffie-hellman-group16-sha512":return new p("modp16","sha512",...n);case"diffie-hellman-group17-sha512":return new p("modp17","sha512",...n);case"diffie-hellman-group18-sha512":return new p("modp18","sha512",...n);case"diffie-hellman-group-exchange-sha1":return new l("sha1",...n);case"diffie-hellman-group-exchange-sha256":return new l("sha256",...n)}throw new Error(`Unsupported key exchange algorithm: ${i}`)}throw new Error(`Invalid key exchange type: ${i}`)}})(),W=(()=>{const t=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class{constructor(e){if("object"!=typeof e||null===e)throw new TypeError("Argument must be an object");const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},all:void 0};let n=0;for(const i of t){let t,s,o,a;if("string"==typeof i)t=r,s=e[i],o=a=i;else{const n=i[0];t=r[n],a=i[1],s=e[n][a],o=`${n}.${a}`}const c={array:void 0,buffer:void 0};if(Buffer.isBuffer(s))c.array=(""+s).split(","),c.buffer=s,n+=4+s.length;else{if("string"==typeof s&&(s=s.split(",")),!Array.isArray(s))throw new TypeError(`Invalid \`${o}\` type: ${typeof s}`);c.array=s,c.buffer=Buffer.from(s.join(",")),n+=4+c.buffer.length}t[a]=c}const i=Buffer.allocUnsafe(n);r.all=i;let s=0;for(const e of t){let t;t="string"==typeof e?r[e].buffer:r[e[0]][e[1]].buffer,s=N(i,t.length,s),i.set(t,s),s+=t.length}this.totalSize=n,this.lists=r}copyAllTo(t,e){const r=this.lists.all;if("number"!=typeof e)throw new TypeError("Invalid offset value: "+typeof e);if(t.length-e<r.length)throw new Error("Insufficient space to copy list");return t.set(r,e),r.length}}})(),j=(()=>{const t=Buffer.allocUnsafe(4);return(e,r)=>{N(t,r.length,0),e.update(t),e.update(r)}})();function K(t,e,r,n,i,s){let a;if(t){let c=o(e).update(r).update(n).update(s).update(i).digest();for(;c.length<t;){const t=o(e).update(r).update(n).update(c).digest(),i=Buffer.allocUnsafe(c.length+t.length);i.set(c,0),i.set(t,c.length),c=i}a=c.length===t?c:new O(c.buffer,c.byteOffset,t)}else a=F;return a}function G(t,e){if(0===e.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));if(this._skipNextInboundPacket)return void(this._skipNextInboundPacket=!1);const n=(e=this._packetRW.read.read(e))[0];switch(n){case y.DISCONNECT:case y.IGNORE:case y.UNIMPLEMENTED:case y.DEBUG:return H||(H=r(2569)),H[n](this,e);case y.KEXINIT:return t.firstPacket?(t.firstPacket=!1,Q(this,e)):B(this,"Received extra KEXINIT during handshake","handshake",m.KEY_EXCHANGE_FAILED);default:if(n<20||n>49)return B(this,`Received unexpected packet type ${n}`,"handshake",m.KEY_EXCHANGE_FAILED)}return this._kex.parse(e)}function q(t){if(!t._sentNEWKEYS){t._protocol._debug&&t._protocol._debug("Outbound: Sending NEWKEYS");const e=t._protocol._packetRW.write.allocStartKEX,r=t._protocol._packetRW.write.alloc(1,!0);r[e]=y.NEWKEYS,t._protocol._cipher.encrypt(t._protocol._packetRW.write.finalize(r,!0)),t._sentNEWKEYS=!0}}t.exports={KexInit:W,kexinit:M,onKEXPayload:G,DEFAULT_KEXINIT_CLIENT:new W({kex:p.concat(["ext-info-c"]),serverHostKey:g,cs:{cipher:A,mac:_,compress:E,lang:[]},sc:{cipher:A,mac:_,compress:E,lang:[]}}),DEFAULT_KEXINIT_SERVER:new W({kex:p,serverHostKey:g,cs:{cipher:A,mac:_,compress:E,lang:[]},sc:{cipher:A,mac:_,compress:E,lang:[]}}),HANDLERS:{[y.KEXINIT]:Q}}},8946:(t,e,r)=>{"use strict";const{createDecipheriv:n,createECDH:i,createHash:s,createHmac:o,createSign:a,createVerify:c,getCiphers:h,sign:l,verify:u}=r(6982),f=h(),{Ber:d}=r(3100),p=r(4015).pbkdf,{CIPHER_INFO:g}=r(7785),{eddsaSupported:A,SUPPORTED_CIPHER:_}=r(2535),{bufferSlice:E,makeBufferParser:m,readString:y,readUInt32BE:S,writeUInt32BE:b}=r(5623),w=Symbol("Hash Algorithm"),v=Symbol("Private key PEM"),I=Symbol("Public key PEM"),C=Symbol("Public key SSH"),k=Symbol("Decrypted Key"),R=Object.create(null);{const et=Object.keys(g);for(let rt=0;rt<et.length;++rt){const nt=g[et[rt]].sslName;nt&&!R[nt]&&(R[nt]=g[et[rt]])}}const B=m();function O(t,e){let r=(e=e.base64Slice(0,e.length)).replace(/.{64}/g,"$&\n");return 63&e.length&&(r+="\n"),`-----BEGIN ${t} KEY-----\n${r}-----END ${t} KEY-----`}function T(t,e){const r=Buffer.allocUnsafe(t.length+e.length);return r.set(t,0),r.set(e,t.length),r}function N(t,e){const r=t.length;let n=t._pos||0;for(let i=0;i<e;++i){const e=r-n;if(n>=r||e<4)return!1;const i=S(t,n);if(e<4+i)return!1;n+=4+i}return t._pos=n,!0}function L(t,e){const r=new d.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(d.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(t,d.Integer),r.writeBuffer(e,d.Integer),r.endSequence(),r.endSequence(),r.endSequence(),O("PUBLIC",r.buffer)}function P(t,e){const r=Buffer.allocUnsafe(15+e.length+4+t.length);b(r,7,0),r.utf8Write("ssh-rsa",4,7);let n=11;return b(r,e.length,n),r.set(e,n+=4),b(r,t.length,n+=e.length),r.set(t,n+4),r}const x=(()=>{function t(t){return BigInt(`0x${t.hexSlice(0,t.length)}`)}function e(t){let e=t.toString(16);if(1&e.length)e=`0${e}`;else{const t=e.charCodeAt(0);(56===t||57===t||t>=97&&t<=102)&&(e=`00${e}`)}return Buffer.from(e,"hex")}return function(r,n,i,s,o,a){const c=t(i);return O("RSA PRIVATE",function(t,e,r,n,i,s,o,a){const c=new d.Writer;return c.startSequence(),c.writeInt(0,d.Integer),c.writeBuffer(t,d.Integer),c.writeBuffer(e,d.Integer),c.writeBuffer(r,d.Integer),c.writeBuffer(n,d.Integer),c.writeBuffer(i,d.Integer),c.writeBuffer(s,d.Integer),c.writeBuffer(o,d.Integer),c.writeBuffer(a,d.Integer),c.endSequence(),c.buffer}(r,n,i,o,a,e(c%(t(o)-1n)),e(c%(t(a)-1n)),s))}})();function U(t,e,r,n){const i=new d.Writer;return i.startSequence(),i.startSequence(),i.writeOID("1.2.840.10040.4.1"),i.startSequence(),i.writeBuffer(t,d.Integer),i.writeBuffer(e,d.Integer),i.writeBuffer(r,d.Integer),i.endSequence(),i.endSequence(),i.startSequence(d.BitString),i.writeByte(0),i.writeBuffer(n,d.Integer),i.endSequence(),i.endSequence(),O("PUBLIC",i.buffer)}function D(t,e,r,n){const i=Buffer.allocUnsafe(15+t.length+4+e.length+4+r.length+4+n.length);b(i,7,0),i.utf8Write("ssh-dss",4,7);let s=11;return b(i,t.length,s),i.set(t,s+=4),b(i,e.length,s+=t.length),i.set(e,s+=4),b(i,r.length,s+=e.length),i.set(r,s+=4),b(i,n.length,s+=r.length),i.set(n,s+4),i}function H(t,e,r,n,i){const s=new d.Writer;return s.startSequence(),s.writeInt(0,d.Integer),s.writeBuffer(t,d.Integer),s.writeBuffer(e,d.Integer),s.writeBuffer(r,d.Integer),s.writeBuffer(n,d.Integer),s.writeBuffer(i,d.Integer),s.endSequence(),O("DSA PRIVATE",s.buffer)}function F(t){const e=new d.Writer;return e.startSequence(),e.startSequence(),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(d.BitString),e.writeByte(0),e._ensure(t.length),e._buf.set(t,e._offset),e._offset+=t.length,e.endSequence(),e.endSequence(),O("PUBLIC",e.buffer)}function M(t){const e=Buffer.allocUnsafe(19+t.length);return b(e,11,0),e.utf8Write("ssh-ed25519",4,11),b(e,t.length,15),e.set(t,19),e}function Q(t){const e=new d.Writer;return e.startSequence(),e.writeInt(0,d.Integer),e.startSequence(),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(d.OctetString),e.writeBuffer(t,d.OctetString),e.endSequence(),e.endSequence(),O("PRIVATE",e.buffer)}function $(t,e){const r=new d.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(t),r.endSequence(),r.startSequence(d.BitString),r.writeByte(0),r._ensure(e.length),r._buf.set(e,r._offset),r._offset+=e.length,r.endSequence(),r.endSequence(),O("PUBLIC",r.buffer)}function W(t,e){let r;switch(t){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}const n=Buffer.allocUnsafe(39+e.length);return b(n,19,0),n.utf8Write(`ecdsa-sha2-${r}`,4,19),b(n,8,23),n.utf8Write(r,27,8),b(n,e.length,35),n.set(e,39),n}function j(t,e,r){const n=new d.Writer;return n.startSequence(),n.writeInt(1,d.Integer),n.writeBuffer(r,d.OctetString),n.startSequence(160),n.writeOID(t),n.endSequence(),n.startSequence(161),n.startSequence(d.BitString),n.writeByte(0),n._ensure(e.length),n._buf.set(e,n._offset),n._offset+=e.length,n.endSequence(),n.endSequence(),n.endSequence(),O("EC PRIVATE",n.buffer)}const K={sign:"function"==typeof l?function(t,e){const r=this[v];if(null===r)return new Error("No private key available");e&&"string"==typeof e||(e=this[w]);try{return l(e,t,r)}catch(t){return t}}:function(t,e){const r=this[v];if(null===r)return new Error("No private key available");e&&"string"==typeof e||(e=this[w]);const n=a(e);n.update(t);try{return n.sign(r)}catch(t){return t}},verify:"function"==typeof u?function(t,e,r){const n=this[I];if(null===n)return new Error("No public key available");r&&"string"==typeof r||(r=this[w]);try{return u(r,t,n,e)}catch(t){return t}}:function(t,e,r){const n=this[I];if(null===n)return new Error("No public key available");r&&"string"==typeof r||(r=this[w]);const i=c(r);i.update(t);try{return i.verify(n,e)}catch(t){return t}},isPrivateKey:function(){return null!==this[v]},getPrivatePEM:function(){return this[v]},getPublicPEM:function(){return this[I]},getPublicSSH:function(){return this[C]},equals:function(t){const e=tt(t);return!(e instanceof Error)&&this.type===e.type&&this[v]===e[v]&&this[I]===e[I]&&this[C]===e[C]}};function G(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[v]=r,this[I]=n,this[C]=i,this[w]=s,this[k]=o}G.prototype=K;{const it=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;function st(t,e,r){const n=[];if(t.length<8)return new Error("Malformed OpenSSH private key");if(S(t,0)!==S(t,4))return r?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");let i,s;for(t._pos=8,i=0;i<e;++i){let e,i,o,a;const c=y(t,t._pos,!0);if(void 0===c)return new Error("Malformed OpenSSH private key");switch(c){case"ssh-rsa":{const r=y(t,t._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=y(t,t._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");const s=y(t,t._pos);if(void 0===s)return new Error("Malformed OpenSSH private key");const c=y(t,t._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");const h=y(t,t._pos);if(void 0===h)return new Error("Malformed OpenSSH private key");const l=y(t,t._pos);if(void 0===l)return new Error("Malformed OpenSSH private key");o=L(r,n),a=P(r,n),i=x(r,n,s,c,h,l),e="sha1";break}case"ssh-dss":{const r=y(t,t._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=y(t,t._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");const s=y(t,t._pos);if(void 0===s)return new Error("Malformed OpenSSH private key");const c=y(t,t._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");const h=y(t,t._pos);if(void 0===h)return new Error("Malformed OpenSSH private key");o=U(r,n,s,c),a=D(r,n,s,c),i=H(r,n,s,c,h),e="sha1";break}case"ssh-ed25519":{if(!A)return new Error(`Unsupported OpenSSH private key type: ${c}`);const r=y(t,t._pos);if(void 0===r||32!==r.length)return new Error("Malformed OpenSSH private key");const n=y(t,t._pos);if(void 0===n||64!==n.length)return new Error("Malformed OpenSSH private key");o=F(r),a=M(r),i=Q(E(n,0,32)),e=null;break}case"ecdsa-sha2-nistp256":e="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===e&&(e="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===e&&(e="sha512",s="1.3.132.0.35"),!N(t,1))return new Error("Malformed OpenSSH private key");const r=y(t,t._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=y(t,t._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");o=$(s,r),a=W(s,r),i=j(s,r,n);break}default:return new Error(`Unsupported OpenSSH private key type: ${c}`)}const h=y(t,t._pos,!0);if(void 0===h)return new Error("Malformed OpenSSH private key");n.push(new G(c,h,i,o,a,e,r))}let o=0;for(i=t._pos;i<t.length;++i)if(t[i]!==++o%255)return new Error("Malformed OpenSSH private key");return n}G.parse=(t,e)=>{const r=it.exec(t);if(null===r)return null;let i;const s=Buffer.from(r[1],"base64");if(s.length<31)return new Error("Malformed OpenSSH private key");const o=s.utf8Slice(0,15);if("openssh-key-v1\0"!==o)return new Error(`Unsupported OpenSSH key magic: ${o}`);const a=y(s,15,!0);if(void 0===a)return new Error("Malformed OpenSSH private key");if("none"!==a&&-1===_.indexOf(a))return new Error(`Unsupported cipher for OpenSSH key: ${a}`);const c=y(s,s._pos,!0);if(void 0===c)return new Error("Malformed OpenSSH private key");if("none"!==c){if("none"===a)return new Error("Malformed OpenSSH private key");if("bcrypt"!==c)return new Error(`Unsupported kdf name for OpenSSH key: ${c}`);if(!e)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if("none"!==a)return new Error("Malformed OpenSSH private key");let h,l,u;"none"!==a&&(h=g[a]);const f=y(s,s._pos);if(void 0===f)return new Error("Malformed OpenSSH private key");if(f.length)switch(c){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":{const t=y(f,0);if(void 0===t||f._pos+4>f.length)return new Error("Malformed OpenSSH private key");const r=S(f,f._pos),n=Buffer.allocUnsafe(h.keyLen+h.ivLen);if(0!==p(e,e.length,t,t.length,n,n.length,r))return new Error("Failed to generate information to decrypt key");l=E(n,0,h.keyLen),u=E(n,h.keyLen,n.length);break}}else if("none"!==c)return new Error("Malformed OpenSSH private key");if(s._pos+3>=s.length)return new Error("Malformed OpenSSH private key");const d=S(s,s._pos);if(s._pos+=4,d>0){for(let t=0;t<d;++t){const t=y(s,s._pos);if(void 0===t)return new Error("Malformed OpenSSH private key");if(void 0===y(t,0,!0))return new Error("Malformed OpenSSH private key")}let t=y(s,s._pos);if(void 0===t)return new Error("Malformed OpenSSH private key");if(void 0!==l){if(t.length<h.blockLen||t.length%h.blockLen!=0)return new Error("Malformed OpenSSH private key");try{const e={authTagLength:h.authLen},r=n(h.sslName,l,u,e);if(r.setAutoPadding(!1),h.authLen>0){if(s.length-s._pos<h.authLen)return new Error("Malformed OpenSSH private key");r.setAuthTag(E(s,s._pos,s._pos+=h.authLen))}t=T(r.update(t),r.final())}catch(t){return t}}if(s._pos!==s.length)return new Error("Malformed OpenSSH private key");i=st(t,d,void 0!==l)}else i=[];return i instanceof Error?i:i[0]}}function q(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[v]=r,this[I]=n,this[C]=i,this[w]=s,this[k]=o}q.prototype=K;{const ot=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;q.parse=(t,e)=>{const r=ot.exec(t);if(null===r)return null;let o,a,c,h,l,u,p=Buffer.from(r[3],"base64"),g=r[2],A=!1;if(void 0!==g){g=g.split(/\r\n|\n/g);for(let t=0;t<g.length;++t){const r=g[t];let i=r.indexOf(":");if("DEK-Info"===r.slice(0,i)){const t=r.slice(i+2);if(i=t.indexOf(","),-1===i)continue;const o=t.slice(0,i).toLowerCase();if(-1===f.indexOf(o))return new Error(`Cipher (${o}) not supported for encrypted OpenSSH private key`);const a=R[o];if(!a)return new Error(`Cipher (${o}) not supported for encrypted OpenSSH private key`);const c=Buffer.from(t.slice(i+1),"hex");if(c.length!==a.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!e)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");const h=E(c,0,8);let l=s("md5").update(e).update(h).digest();for(;l.length<a.keyLen;)l=T(l,s("md5").update(l).update(e).update(h).digest());l.length>a.keyLen&&(l=E(l,0,a.keyLen));try{const t=n(o,l,c);t.setAutoPadding(!1),p=T(t.update(p),t.final()),A=!0}catch(t){return t}}}}let _="Malformed OpenSSH private key";switch(A&&(_+=". Bad passphrase?"),r[1]){case"RSA":o="ssh-rsa",a=O("RSA PRIVATE",p);try{u=new d.Reader(p),u.readSequence(),u.readInt();const t=u.readString(d.Integer,!0);if(null===t)return new Error(_);const e=u.readString(d.Integer,!0);if(null===e)return new Error(_);c=L(t,e),h=P(t,e)}catch{return new Error(_)}l="sha1";break;case"DSA":o="ssh-dss",a=O("DSA PRIVATE",p);try{u=new d.Reader(p),u.readSequence(),u.readInt();const t=u.readString(d.Integer,!0);if(null===t)return new Error(_);const e=u.readString(d.Integer,!0);if(null===e)return new Error(_);const r=u.readString(d.Integer,!0);if(null===r)return new Error(_);const n=u.readString(d.Integer,!0);if(null===n)return new Error(_);c=U(t,e,r,n),h=D(t,e,r,n)}catch{return new Error(_)}l="sha1";break;case"EC":{let t,e,r;try{u=new d.Reader(p),u.readSequence(),u.readInt(),e=u.readString(d.OctetString,!0),u.readByte();const n=u.readLength();if(null===n)return new Error(_);if(u._offset=n,r=u.readOID(),null===r)return new Error(_);switch(r){case"1.2.840.10045.3.1.7":t="prime256v1",o="ecdsa-sha2-nistp256",l="sha256";break;case"1.3.132.0.34":t="secp384r1",o="ecdsa-sha2-nistp384",l="sha384";break;case"1.3.132.0.35":t="secp521r1",o="ecdsa-sha2-nistp521",l="sha512";break;default:return new Error(`Unsupported private key EC OID: ${r}`)}}catch{return new Error(_)}a=O("EC PRIVATE",p);const n=function(t,e){const r=i(t);return r.setPrivateKey(e),r.getPublicKey()}(t,e);c=$(r,n),h=W(r,n);break}}return new q(o,"",a,c,h,l,A)}}function V(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[v]=r,this[I]=n,this[C]=i,this[w]=s,this[k]=o}V.prototype=K;{const at=Buffer.alloc(0),ct=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ht=Buffer.from([0,0,0,0]),lt=Buffer.from([0,0,0,1]),ut=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;V.parse=(t,e)=>{const r=ut.exec(t);if(null===r)return null;const i=r[2],a="none"!==i;if(a&&!e)return new Error("Encrypted PPK private key detected, but no passphrase given");let c=Buffer.from(r[5],"base64");if(a){const t=g[i];let r=T(s("sha1").update(ht).update(e).digest(),s("sha1").update(lt).update(e).digest());r.length>t.keyLen&&(r=E(r,0,t.keyLen));try{const e=n(t.sslName,r,ct);e.setAutoPadding(!1),c=T(e.update(c),e.final())}catch(t){return t}}const h=r[1],l=r[3],u=Buffer.from(r[4],"base64"),f=r[6],d=h.length,p=i.length,A=Buffer.byteLength(l),_=u.length,m=c.length,S=Buffer.allocUnsafe(4+d+4+p+4+A+4+_+4+m);let w,v,I,C=0;if(b(S,d,C),S.utf8Write(h,C+=4,d),b(S,p,C+=d),S.utf8Write(i,C+=4,p),b(S,A,C+=p),S.utf8Write(l,C+=4,A),b(S,_,C+=A),S.set(u,C+=4),b(S,m,C+=_),S.set(c,C+4),e||(e=at),o("sha1",s("sha1").update("putty-private-key-file-mac-key").update(e).digest()).update(S).digest("hex")!==f)return a?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");switch(u._pos=0,N(u,1),h){case"ssh-rsa":{const t=y(u,u._pos);if(void 0===t)return new Error("Malformed PPK public key");const e=y(u,u._pos);if(void 0===e)return new Error("Malformed PPK public key");const r=y(c,0);if(void 0===r)return new Error("Malformed PPK private key");const n=y(c,c._pos);if(void 0===n)return new Error("Malformed PPK private key");const i=y(c,c._pos);if(void 0===i)return new Error("Malformed PPK private key");const s=y(c,c._pos);if(void 0===s)return new Error("Malformed PPK private key");w=L(e,t),v=P(e,t),I=x(e,t,r,s,n,i);break}case"ssh-dss":{const t=y(u,u._pos);if(void 0===t)return new Error("Malformed PPK public key");const e=y(u,u._pos);if(void 0===e)return new Error("Malformed PPK public key");const r=y(u,u._pos);if(void 0===r)return new Error("Malformed PPK public key");const n=y(u,u._pos);if(void 0===n)return new Error("Malformed PPK public key");const i=y(c,0);if(void 0===i)return new Error("Malformed PPK private key");w=U(t,e,r,n),v=D(t,e,r,n),I=H(t,e,r,n,i);break}}return new V(h,l,I,w,v,"sha1",a)}}function z(t,e,r,n,i){this.type=t,this.comment=e,this[v]=null,this[I]=r,this[C]=n,this[w]=i,this[k]=!1}z.prototype=K;{let ft;ft=A?/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/:/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/,z.parse=t=>{const e=ft.exec(t);if(null===e)return null;const r=e[1],n=e[2],i=Buffer.from(e[3],"base64"),s=e[4]||"",o=y(i,i._pos,!0);return void 0===o||0!==o.indexOf(n)?new Error("Malformed OpenSSH public key"):X(i,n,s,r)}}function Y(t,e,r,n,i){this.type=t,this.comment=e,this[v]=null,this[I]=r,this[C]=n,this[w]=i,this[k]=!1}Y.prototype=K;{const dt=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/,pt=/^[A-Z0-9a-z/+=\r\n]+$/,gt=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm,At=/\\\r?\n/g;Y.parse=t=>{let e=dt.exec(t);if(null===e)return null;const r=e[1];let n=0,i="";for(;e=gt.exec(r);){const t=e[1],r=e[2].replace(At,"");if(r.length>1024)return gt.lastIndex=0,new Error("Malformed RFC4716 public key");n=gt.lastIndex,"comment"===t.toLowerCase()&&(i=r,i.length>1&&34===i.charCodeAt(0)&&34===i.charCodeAt(i.length-1)&&(i=i.slice(1,-1)))}let s=r.slice(n);if(!pt.test(s))return new Error("Malformed RFC4716 public key");s=Buffer.from(s,"base64");const o=y(s,0,!0);if(void 0===o)return new Error("Malformed RFC4716 public key");let a=null,c=null;switch(o){case"ssh-rsa":{const t=y(s,s._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");const e=y(s,s._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");a=L(e,t),c=P(e,t);break}case"ssh-dss":{const t=y(s,s._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");const e=y(s,s._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const r=y(s,s._pos);if(void 0===r)return new Error("Malformed RFC4716 public key");const n=y(s,s._pos);if(void 0===n)return new Error("Malformed RFC4716 public key");a=U(t,e,r,n),c=D(t,e,r,n);break}default:return new Error("Malformed RFC4716 public key")}return new Y(o,i,a,c,"sha1")}}function X(t,e,r,n){if(!J(e))return new Error(`Unsupported OpenSSH public key type: ${e}`);let i,s,o=null,a=null;switch(e){case"ssh-rsa":{const e=y(t,t._pos||0);if(void 0===e)return new Error("Malformed OpenSSH public key");const r=y(t,t._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");o=L(r,e),a=P(r,e),i="sha1";break}case"ssh-dss":{const e=y(t,t._pos||0);if(void 0===e)return new Error("Malformed OpenSSH public key");const r=y(t,t._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");const n=y(t,t._pos);if(void 0===n)return new Error("Malformed OpenSSH public key");const s=y(t,t._pos);if(void 0===s)return new Error("Malformed OpenSSH public key");o=U(e,r,n,s),a=D(e,r,n,s),i="sha1";break}case"ssh-ed25519":{const e=y(t,t._pos||0);if(void 0===e||32!==e.length)return new Error("Malformed OpenSSH public key");o=F(e),a=M(e),i=null;break}case"ecdsa-sha2-nistp256":i="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===i&&(i="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===i&&(i="sha512",s="1.3.132.0.35"),!N(t,1))return new Error("Malformed OpenSSH public key");const e=y(t,t._pos||0);if(void 0===e)return new Error("Malformed OpenSSH public key");o=$(s,e),a=W(s,e);break}default:return new Error(`Unsupported OpenSSH public key type: ${e}`)}return new z(n,r,o,a,i)}function J(t){switch(t){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!0;case"ssh-ed25519":if(A)return!0;default:return!1}}function Z(t){return!!t&&"boolean"==typeof t[k]}function tt(t,e){if(Z(t))return t;let r,n;if(Buffer.isBuffer(t))r=t,t=t.utf8Slice(0,t.length).trim();else{if("string"!=typeof t)return new Error("Key data must be a Buffer or string");t=t.trim()}if(null!=e)if("string"==typeof e)e=Buffer.from(e);else if(!Buffer.isBuffer(e))return new Error("Passphrase must be a string or Buffer when supplied");if(null!==(n=G.parse(t,e)))return n;if(null!==(n=q.parse(t,e)))return n;if(null!==(n=V.parse(t,e)))return n;if(null!==(n=z.parse(t)))return n;if(null!==(n=Y.parse(t)))return n;if(r){B.init(r,0);const e=B.readString(!0);void 0!==e&&void 0!==(t=B.readRaw())&&(n=X(t,e,"",e),n instanceof Error&&(n=null)),B.clear()}return n||new Error("Unsupported key format")}t.exports={isParsedKey:Z,isSupportedKeyType:J,parseDERKey:(t,e)=>X(t,e,"",e),parseKey:tt}},8977:(t,e,r)=>{"use strict";const n=r(2613),{inspect:i}=r(9023);function s(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function o(t,e){if(n("string"==typeof e,"`thing` has to be of type string"),Array.isArray(t)){const r=t.length;return n(r>0,"At least one expected value needs to be specified"),t=t.map((t=>String(t))),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:2===r?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}return`of ${e} ${String(t)}`}e.ERR_INTERNAL_ASSERTION=class t extends Error{constructor(e){super(),Error.captureStackTrace(this,t);const r="This is caused by either a bug in ssh2 or incorrect usage of ssh2 internals.\nPlease open an issue with this stack trace at https://github.com/mscdex/ssh2/issues\n";this.message=void 0===e?r:`${e}\n${r}`}};const a=2**32,c=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();e.ERR_OUT_OF_RANGE=class t extends RangeError{constructor(e,r,o,h){super(),Error.captureStackTrace(this,t),n(r,'Missing "range" argument');let l,u=h?e:`The value of "${e}" is out of range.`;Number.isInteger(o)&&Math.abs(o)>a?l=s(String(o)):"bigint"==typeof o?(l=String(o),(o>c||o<-c)&&(l=s(l)),l+="n"):l=i(o),u+=` It must be ${r}. Received ${l}`,this.message=u}};class h extends TypeError{constructor(t,e,r){let i,s;if(super(),Error.captureStackTrace(this,h),n("string"==typeof t,"'name' must be a string"),"string"==typeof e&&e.startsWith("not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",t.endsWith(" argument"))s=`The ${t} ${i} ${o(e,"type")}`;else{const r=t.includes(".")?"property":"argument";s=`The "${t}" ${r} ${i} ${o(e,"type")}`}s+=". Received type "+typeof r,this.message=s}}e.ERR_INVALID_ARG_TYPE=h,e.validateNumber=function(t,e){if("number"!=typeof t)throw new h(e,"number",t)}},5623:(t,e,r)=>{"use strict";const n=r(3100).Ber;let i;const s=Buffer[Symbol.species],o=Object.getPrototypeOf(Uint8Array.prototype).fill;function a(t,e){return 16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e]}function c(t,e,r,n,i){i||(i=0),n>t.length&&(n=t.length);let s=n-r;const o=e.length-i;return s>o&&(s=o),e.set(new Uint8Array(t.buffer,t.byteOffset+r,s),i),s}function h(t,e,r){return void 0===r&&(r=t.length),new s(t.buffer,t.byteOffset+e,r-e)}function l(){let t,e=0;const r={init:(r,n)=>{t=r,e="number"==typeof n?n:0},pos:()=>e,length:()=>t?t.length:0,avail:()=>t&&e<t.length?t.length-e:0,clear:()=>{t=void 0},readUInt32BE:()=>{if(t&&!(e+3>=t.length))return 16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e++]},readUInt64BE:r=>{if(t&&!(e+7>=t.length))switch(r){case"always":return BigInt(`0x${t.hexSlice(e,e+=8)}`);case"maybe":if(t[e]>31)return BigInt(`0x${t.hexSlice(e,e+=8)}`);default:return 72057594037927940*t[e++]+281474976710656*t[e++]+1099511627776*t[e++]+4294967296*t[e++]+16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e++]}},skip:r=>{t&&r>0&&(e+=r)},skipString:()=>{const n=r.readUInt32BE();if(void 0!==n)return e+=n,e<=t.length?n:void 0},readByte:()=>{if(t&&e<t.length)return t[e++]},readBool:()=>{if(t&&e<t.length)return!!t[e++]},readList:()=>{const t=r.readString(!0);if(void 0!==t)return t?t.split(","):[]},readString:(n,i)=>{"number"==typeof n&&(i=n,n=void 0);const s=r.readUInt32BE();if(void 0!==s&&!(t.length-e<s||"number"==typeof i&&s>i))return n?Buffer.isBuffer(n)?c(t,n,e,e+=s):t.utf8Slice(e,e+=s):h(t,e,e+=s)},readRaw:r=>{if(t)return"number"!=typeof r?h(t,e,e+=t.length-e):t.length-e>=r?h(t,e,e+=r):void 0}};return r}function u(t,e,r){const n=new Error(t);return"boolean"==typeof e?(r=e,n.level="protocol"):n.level=e||"protocol",n.fatal=!!r,n}function f(t,e,r){return t[r++]=e>>>24,t[r++]=e>>>16,t[r++]=e>>>8,t[r++]=e,r}function d(t){const e=128&t[0]?1:0;let r=0;for(let e=0;e<t.length-1&&0===t[e];e++)128&t[e+1]||r++;const n=Buffer.allocUnsafe(t.length+e-r);return t.copy(n,e,r,t.length),e&&(n[0]=0),n}const p=l();t.exports={bufferCopy:c,bufferSlice:h,FastBuffer:s,bufferFill:(t,e,r,n)=>o.call(t,e,r,n),makeError:u,doFatalError:(t,e,n,s)=>{let o;return void 0===i&&({DISCONNECT_REASON:i}=r(2535)),e instanceof Error?(o=e,s="number"!=typeof n?i.PROTOCOL_ERROR:n):o=u(e,n,!0),"number"!=typeof s&&(s=i.PROTOCOL_ERROR),t.disconnect(s),t._destruct(),t._onError(o),1/0},readUInt32BE:a,writeUInt32BE:f,writeUInt32LE:(t,e,r)=>(t[r++]=e,t[r++]=e>>>8,t[r++]=e>>>16,t[r++]=e>>>24,r),makeBufferParser:l,bufferParser:l(),readString:(t,e,r,n)=>{"number"==typeof r&&(n=r,r=void 0),void 0===e&&(e=0);const i=t.length-e;if(e<0||e>=t.length||i<4)return;const s=a(t,e);if(i<4+s||"number"==typeof n&&s>n)return;const o=(e+=4)+s;return t._pos=o,r?Buffer.isBuffer(r)?c(t,r,e,o):t.utf8Slice(e,o):h(t,e,o)},sigSSHToASN1:(t,e)=>{switch(e){case"ssh-dss":{if(t.length>40)return t;const e=new n.Writer;e.startSequence();let r=t.slice(0,20),i=t.slice(20);if(128&r[0]){const t=Buffer.allocUnsafe(21);t[0]=0,r.copy(t,1),r=t}else 0!==r[0]||128&r[1]||(r=r.slice(1));if(128&i[0]){const t=Buffer.allocUnsafe(21);t[0]=0,i.copy(t,1),i=t}else 0!==i[0]||128&i[1]||(i=i.slice(1));return e.writeBuffer(r,n.Integer),e.writeBuffer(i,n.Integer),e.endSequence(),e.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{p.init(t,0);const e=d(p.readString()),r=d(p.readString());if(p.clear(),void 0===e||void 0===r)return;const i=new n.Writer;return i.startSequence(),i.writeBuffer(e,n.Integer),i.writeBuffer(r,n.Integer),i.endSequence(),i.buffer}default:return t}},convertSignature:(t,e)=>{switch(e){case"ssh-dss":{if(t.length<=40)return t;const e=new n.Reader(t);e.readSequence();let r=e.readString(n.Integer,!0),i=e.readString(n.Integer,!0),s=0,o=0;if(r.length<20){const t=Buffer.allocUnsafe(20);t.set(r,1),r=t,r[0]=0}if(i.length<20){const t=Buffer.allocUnsafe(20);t.set(i,1),i=t,i[0]=0}r.length>20&&0===r[0]&&(s=1),i.length>20&&0===i[0]&&(o=1);const a=Buffer.allocUnsafe(r.length-s+(i.length-o));return c(r,a,s,r.length,0),c(i,a,o,i.length,r.length-s),a}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(0===t[0])return t;const e=new n.Reader(t);e.readSequence();const r=e.readString(n.Integer,!0),i=e.readString(n.Integer,!0);if(null===r||null===i)return;const s=Buffer.allocUnsafe(4+r.length+4+i.length);return f(s,r.length,0),s.set(r,4),f(s,i.length,4+r.length),s.set(i,8+r.length),s}}return t},sendPacket:(t,e,r)=>r||void 0===t._kexinit?(t._cipher.encrypt(e),!0):(void 0===t._queue&&(t._queue=[]),t._queue.push(e),t._debug&&t._debug("Outbound: ... packet queued"),!1),convertToMpint:d}},3129:(t,e,r)=>{"use strict";const{kMaxLength:n}=r(181),{createInflate:i,constants:{DEFLATE:s,INFLATE:o,Z_DEFAULT_CHUNK:a,Z_DEFAULT_COMPRESSION:c,Z_DEFAULT_MEMLEVEL:h,Z_DEFAULT_STRATEGY:l,Z_DEFAULT_WINDOWBITS:u,Z_PARTIAL_FLUSH:f}}=r(3106),d=i()._handle.constructor;function p(){throw new Error("Should not get here")}function g(t,e,r){const n=this._owner,i=new Error(t);i.errno=e,i.code=r,n._err=i}function A(t){t._handle&&(t._handle.close(),t._handle=null)}class _{constructor(t){const e=u,r=c,i=h,s=l;this._err=void 0,this._writeState=new Uint32Array(2),this._chunkSize=a,this._maxOutputLength=n,this._outBuffer=Buffer.allocUnsafe(this._chunkSize),this._outOffset=0,this._handle=new d(t),this._handle._owner=this,this._handle.onerror=g,this._handle.init(e,r,i,s,this._writeState,p,void 0)}writeSync(t,e){const r=this._handle;if(!r)throw new Error("Invalid Zlib instance");let n,i,s,o=t.length,a=this._chunkSize-this._outOffset,c=0,h=0;const l=this._writeState;let u=this._outBuffer,d=this._outOffset;const p=this._chunkSize;for(;;){if(r.writeSync(f,t,c,o,u,d,a),this._err)throw this._err;n=l[0],i=l[1];const e=o-i,g=a-n;if(g>0){const t=0===d&&g===u.length?u:u.slice(d,d+g);if(d+=g,s?void 0===s.push?s=[s,t]:s.push(t):s=t,h+=t.byteLength,h>this._maxOutputLength)throw A(this),new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}else if(0!==g)throw new Error("have should not go down");if((0===n||d>=p)&&(a=p,d=0,u=Buffer.allocUnsafe(p)),0!==n)break;c+=e,o=i}if(this._outBuffer=u,this._outOffset=d,0===h&&(s=Buffer.alloc(0)),e)return s.totalLen=h,s;if(void 0===s.push)return s;const g=Buffer.allocUnsafe(h);for(let t=0,e=0;t<s.length;++t){const r=s[t];g.set(r,e),e+=r.length}return g}}t.exports={PacketReader:class{cleanup(){}read(t){return t}},PacketWriter:class{constructor(t){this.allocStart=5,this.allocStartKEX=5,this._protocol=t}cleanup(){}alloc(t,e){return void 0===this._protocol._kexinit||e?this._protocol._cipher.allocPacket(t):Buffer.allocUnsafe(t)}finalize(t,e){return t}},ZlibPacketReader:class{constructor(){this._zlib=new _(o)}cleanup(){this._zlib&&A(this._zlib)}read(t){return this._zlib.writeSync(t,!1)}},ZlibPacketWriter:class{constructor(t){this.allocStart=0,this.allocStartKEX=0,this._protocol=t,this._zlib=new _(s)}cleanup(){this._zlib&&A(this._zlib)}alloc(t,e){return Buffer.allocUnsafe(t)}finalize(t,e){if(void 0===this._protocol._kexinit||e){const e=this._zlib.writeSync(t,!0),r=this._protocol._cipher.allocPacket(e.totalLen);if(void 0===e.push)r.set(e,5);else for(let t=0,n=5;t<e.length;++t){const i=e[t];r.set(i,n),n+=i.length}return r}return t}}}},734:(t,e,r)=>{"use strict";const{Server:n}=r(9278),i=r(4434),{listenerCount:s}=i,{CHANNEL_OPEN_FAILURE:o,DEFAULT_CIPHER:a,DEFAULT_COMPRESSION:c,DEFAULT_KEX:h,DEFAULT_MAC:l,DEFAULT_SERVER_HOST_KEY:u,DISCONNECT_REASON:f,DISCONNECT_REASON_BY_VALUE:d,SUPPORTED_CIPHER:p,SUPPORTED_COMPRESSION:g,SUPPORTED_KEX:A,SUPPORTED_MAC:_,SUPPORTED_SERVER_HOST_KEY:E}=r(2535),{init:m}=r(7785),{KexInit:y}=r(8818),{parseKey:S}=r(8946),b=r(6008),{SFTP:w}=r(4261),{writeUInt32BE:v}=r(5623),{Channel:I,MAX_WINDOW:C,PACKET_SIZE:k,windowAdjust:R,WINDOW_THRESHOLD:B}=r(7838),{ChannelManager:O,generateAlgorithmList:T,isWritable:N,onChannelOpenFailure:L,onCHANNEL_CLOSE:P}=r(9100);class x extends i{constructor(t,e,r,n,i){super(),this.username=this.user=e,this.service=r,this.method=n,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=(t,e,r)=>{this._finalResponse||(this._finalResponse=!0,i(this,t,e,r))},this._protocol=t}accept(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)}reject(t,e){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,t,e)}}class U extends x{constructor(t,e,r,n,i,s){super(t,e,r,n,s),this._multistep=!0,this._cb=void 0,this._onInfoResponse=t=>{const e=this._cb;e&&(this._cb=void 0,e(t))},this.submethods=i,this.on("abort",(()=>{this._cb&&this._cb(new Error("Authentication request aborted"))}))}prompt(t,e,r,n){Array.isArray(t)||(t=[t]),"function"==typeof e?(n=e,e=r=void 0):"function"==typeof r?(n=r,r=void 0):"function"!=typeof n&&(n=void 0);for(let e=0;e<t.length;++e)"string"==typeof t[e]&&(t[e]={prompt:t[e],echo:!0});this._cb=n,this._initialResponse=!0,this._protocol.authInfoReq(e,r,t)}}class D extends x{constructor(t,e,r,n,i,s){super(t,e,r,n,s),this.key={algo:i.keyAlgo,data:i.key},this.hashAlgo=i.hashAlgo,this.signature=i.signature,this.blob=i.blob}accept(){this.signature?x.prototype.accept.call(this):(this._initialResponse=!0,this._protocol.authPKOK(this.key.algo,this.key.data))}}class H extends x{constructor(t,e,r,n,i,s){super(t,e,r,n,s),this.key={algo:i.keyAlgo,data:i.key},this.hashAlgo=i.hashAlgo,this.signature=i.signature,this.blob=i.blob,this.localHostname=i.localHostname,this.localUsername=i.localUsername}}class F extends x{constructor(t,e,r,n,i,s){super(t,e,r,n,s),this.password=i,this._changeCb=void 0}requestChange(t,e){if(this._changeCb)throw new Error("Change request already in progress");if("string"!=typeof t)throw new Error("prompt argument must be a string");if("function"!=typeof e)throw new Error("Callback argument must be a function");this._changeCb=e,this._protocol.authPasswdChg(t)}}class M extends i{constructor(t,e,r){super(),this.type="session",this.subtype=void 0,this.server=!0,this._ending=!1,this._channel=void 0,this._chanInfo={type:"session",incoming:{id:r,window:C,packetSize:k,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}}}}class Q extends i{constructor(t,e){if(super(),"object"!=typeof t||null===t)throw new Error("Missing configuration object");const r=Object.create(null),i=[],s=t.hostKeys;if(!Array.isArray(s))throw new Error("hostKeys must be an array");const o="object"==typeof t.algorithms&&null!==t.algorithms?t.algorithms:{},f=T(o.serverHostKey,u,E);for(let t=0;t<s.length;++t){let e;if(e=Buffer.isBuffer(s[t])||"string"==typeof s[t]?S(s[t]):S(s[t].key,s[t].passphrase),e instanceof Error)throw new Error(`Cannot parse privateKey: ${e.message}`);if(Array.isArray(e)&&(e=e[0]),null===e.getPrivatePEM())throw new Error("privateKey value contains an invalid private key");if(!i.includes(e.type))if("ssh-rsa"===e.type){let t=f.indexOf("ssh-rsa");const n=f.indexOf("rsa-sha2-256"),s=f.indexOf("rsa-sha2-512");-1===t&&(t=1/0),[t,n,s].sort(j).forEach((o=>{if(-1===o)return;let a;switch(o){case t:a="ssh-rsa";break;case n:a="rsa-sha2-256";break;case s:a="rsa-sha2-512";break;default:return}r[a]=e,i.push(a)}))}else r[e.type]=e,i.push(e.type)}const d={kex:T(o.kex,h,A),serverHostKey:i,cs:{cipher:T(o.cipher,a,p),mac:T(o.hmac,l,_),compress:T(o.compress,c,g),lang:[]},sc:void 0};d.sc=d.cs,"function"==typeof e&&this.on("connection",e);const m="function"==typeof t.debug?t.debug:void 0,b=t.ident?Buffer.from(t.ident):void 0,w=new y(d);this._srv=new n((e=>{if(this._connections>=this.maxConnections)return void e.destroy();let n;if(++this._connections,e.once("close",(()=>{--this._connections})),m){const t=`[${process.hrtime().join(".")}] `;n=e=>{m(`${t}${e}`)}}new $(e,r,b,w,n,this,t)})).on("error",(t=>{this.emit("error",t)})).on("listening",(()=>{this.emit("listening")})).on("close",(()=>{this.emit("close")})),this._connections=0,this.maxConnections=1/0}injectSocket(t){this._srv.emit("connection",t)}listen(...t){return this._srv.listen(...t),this}address(){return this._srv.address()}getConnections(t){return this._srv.getConnections(t),this}close(t){return this._srv.close(t),this}ref(){return this._srv.ref(),this}unref(){return this._srv.unref(),this}}Q.KEEPALIVE_CLIENT_INTERVAL=15e3,Q.KEEPALIVE_CLIENT_COUNT_MAX=3;class $ extends i{constructor(t,e,r,n,i,a,c){super();let h,l,u,p=0,g=!1,A=[];const _=[];function E(t){}this._sock=t,this._chanMgr=new O(this),this._debug=i,this.noMoreSessions=!1,this.authenticated=!1,this.on("error",E);const y=i?(t,e,r)=>{i(`Debug output from client: ${JSON.stringify(r)}`)}:void 0,S="number"==typeof c.keepaliveInterval&&isFinite(c.keepaliveInterval)&&c.keepaliveInterval>0?c.keepaliveInterval:"number"==typeof Q.KEEPALIVE_CLIENT_INTERVAL&&isFinite(Q.KEEPALIVE_CLIENT_INTERVAL)&&Q.KEEPALIVE_CLIENT_INTERVAL>0?Q.KEEPALIVE_CLIENT_INTERVAL:-1,T="number"==typeof c.keepaliveCountMax&&isFinite(c.keepaliveCountMax)&&c.keepaliveCountMax>=0?c.keepaliveCountMax:"number"==typeof Q.KEEPALIVE_CLIENT_COUNT_MAX&&isFinite(Q.KEEPALIVE_CLIENT_COUNT_MAX)&&Q.KEEPALIVE_CLIENT_COUNT_MAX>=0?Q.KEEPALIVE_CLIENT_COUNT_MAX:-1;let $=0;-1!==S&&-1!==T&&(this.once("ready",(()=>{const t=()=>{clearInterval(l)};this.on("close",t).on("end",t),l=setInterval((()=>{if(++$>T){clearInterval(l);const t=new Error("Keepalive timeout");t.level="client-timeout",this.emit("error",t),this.end()}else W.ping()}),S)})),u=()=>{l&&l.refresh(),$=0});const W=this._protocol=new b({server:!0,hostKeys:e,ident:r,offer:n,onPacket:u,greeting:c.greeting,banner:c.banner,onWrite:e=>{N(t)&&t.write(e)},onError:e=>{W._destruct||t.removeAllListeners("data"),this.emit("error",e);try{t.end()}catch{}},onHeader:e=>{this.removeListener("error",E);const r={ip:t.remoteAddress,family:t.remoteFamily,port:t.remotePort,header:e};if(!a.emit("connection",this,r))return W.disconnect(f.BY_APPLICATION),void t.end();e.greeting&&this.emit("greeting",e.greeting)},onHandshakeComplete:t=>{++p>1&&this.emit("rekey"),this.emit("handshake",t)},debug:i,messageHandlers:{DEBUG:y,DISCONNECT:(e,r,n)=>{if(r!==f.BY_APPLICATION){n||void 0===(n=d[r])&&(n=`Unexpected disconnection reason: ${r}`);const t=new Error(n);t.code=r,this.emit("error",t)}t.end()},CHANNEL_OPEN:(t,e)=>{if("session"===e.type&&this.noMoreSessions||!this.authenticated){const t=o.ADMINISTRATIVELY_PROHIBITED;return W.channelOpenFail(e.sender,t)}let r,n,a=-1,c=!1;const h=()=>{c||(c=!0,void 0===r&&(r=-1===a?o.RESOURCE_SHORTAGE:o.CONNECT_FAILED),-1!==a&&this._chanMgr.remove(a),W.channelOpenFail(e.sender,r,""))},l=()=>(a=this._chanMgr.add(),-1===a&&(r=o.RESOURCE_SHORTAGE,i&&i("Automatic rejection of incoming channel open: no channels available")),-1!==a),u=e.data;switch(e.type){case"session":if(s(this,"session")&&l())return n=()=>{if(c)return;c=!0;const t=new M(this,e,a);return this._chanMgr.update(a,t),W.channelOpenConfirm(e.sender,a,C,k),t},void this.emit("session",n,h);break;case"direct-tcpip":if(s(this,"tcpip")&&l())return n=()=>{if(c)return;c=!0;const t={type:void 0,incoming:{id:a,window:C,packetSize:k,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},r=new I(this,t,{server:!0});return this._chanMgr.update(a,r),W.channelOpenConfirm(e.sender,a,C,k),r},void this.emit("tcpip",n,h,u);break;case"direct-streamlocal@openssh.com":if(s(this,"openssh.streamlocal")&&l())return n=()=>{if(c)return;c=!0;const t={type:void 0,incoming:{id:a,window:C,packetSize:k,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},r=new I(this,t,{server:!0});return this._chanMgr.update(a,r),W.channelOpenConfirm(e.sender,a,C,k),r},void this.emit("openssh.streamlocal",n,h,u);break;default:r=o.UNKNOWN_CHANNEL_TYPE,i&&i(`Automatic rejection of unsupported incoming channel open type: ${e.type}`)}void 0===r&&(r=o.ADMINISTRATIVELY_PROHIBITED,i&&i(`Automatic rejection of unexpected incoming channel open for: ${e.type}`)),h()},CHANNEL_OPEN_CONFIRMATION:(t,e)=>{const r=this._chanMgr.get(e.recipient);if("function"!=typeof r)return;const n={type:r.type,incoming:{id:e.recipient,window:C,packetSize:k,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},i=new I(this,n,{server:!0});this._chanMgr.update(e.recipient,i),r(void 0,i)},CHANNEL_OPEN_FAILURE:(t,e,r,n)=>{const i=this._chanMgr.get(e);"function"==typeof i&&L(this,e,{reason:r,description:n},i)},CHANNEL_DATA:(t,e,r)=>{let n=this._chanMgr.get(e);"object"==typeof n&&null!==n&&(n.constructor!==M||(n=n._channel,n))&&0!==n.incoming.window&&(n.incoming.window-=r.length,!1!==n.push(r)?n.incoming.window<=B&&R(n):n._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(t,e,r,n)=>{},CHANNEL_WINDOW_ADJUST:(t,e,r)=>{let n=this._chanMgr.get(e);"object"==typeof n&&null!==n&&(n.constructor!==M||(n=n._channel,n))&&(n.outgoing.window+=r,n._waitWindow&&(n._waitWindow=!1,n._chunk?n._write(n._chunk,null,n._chunkcb):n._chunkcb?n._chunkcb():n._chunkErr?n.stderr._write(n._chunkErr,null,n._chunkcbErr):n._chunkcbErr&&n._chunkcbErr()))},CHANNEL_SUCCESS:(t,e)=>{let r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&(r.constructor!==M||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!1)},CHANNEL_FAILURE:(t,e)=>{let r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&(r.constructor!==M||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!0)},CHANNEL_REQUEST:(t,e,r,n,o)=>{const a=this._chanMgr.get(e);if("object"!=typeof a||null===a)return;let c,h,l=!1;if(a.constructor===M)if(n&&("shell"!==r&&"exec"!==r&&"subsystem"!==r&&(c=()=>{l||a._ending||a._channel||(l=!0,W.channelSuccess(a._chanInfo.outgoing.id))}),h=()=>{l||a._ending||a._channel||(l=!0,W.channelFailure(a._chanInfo.outgoing.id))}),a._ending)h&&h();else{switch(r){case"env":if(s(a,"env"))return void a.emit("env",c,h,{key:o.name,val:o.value});break;case"pty-req":if(s(a,"pty"))return void a.emit("pty",c,h,o);break;case"window-change":s(a,"window-change")?a.emit("window-change",c,h,o):h&&h();break;case"x11-req":if(s(a,"x11"))return void a.emit("x11",c,h,o);break;case"signal":if(s(a,"signal"))return void a.emit("signal",c,h,{name:o});break;case"auth-agent-req@openssh.com":if(s(a,"auth-agent"))return void a.emit("auth-agent",c,h);break;case"shell":if(s(a,"shell"))return c=()=>{if(l||a._ending||a._channel)return;l=!0,n&&W.channelSuccess(a._chanInfo.outgoing.id);const t=new I(this,a._chanInfo,{server:!0});return t.subtype=a.subtype=r,a._channel=t,t},void a.emit("shell",c,h);break;case"exec":if(s(a,"exec"))return c=()=>{if(l||a._ending||a._channel)return;l=!0,n&&W.channelSuccess(a._chanInfo.outgoing.id);const t=new I(this,a._chanInfo,{server:!0});return t.subtype=a.subtype=r,a._channel=t,t},void a.emit("exec",c,h,{command:o});break;case"subsystem":{let t="sftp"===o;if(c=()=>{if(l||a._ending||a._channel)return;let e;return l=!0,n&&W.channelSuccess(a._chanInfo.outgoing.id),t?e=new w(this,a._chanInfo,{server:!0,debug:i}):(e=new I(this,a._chanInfo,{server:!0}),e.subtype=a.subtype=`${r}:${o}`),a._channel=e,e},"sftp"===o){if(s(a,"sftp"))return void a.emit("sftp",c,h);t=!1}if(s(a,"subsystem"))return void a.emit("subsystem",c,h,{name:o});break}}i&&i(`Automatic rejection of incoming channel request: ${r}`),h&&h()}else n&&W.channelFailure(a.outgoing.id)},CHANNEL_EOF:(t,e)=>{let r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&(r.constructor!==M||(r._ending||(r._ending=!0,r.emit("eof"),r.emit("end")),r=r._channel,r))&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null))},CHANNEL_CLOSE:(t,e)=>{let r=this._chanMgr.get(e);"object"==typeof r&&null!==r&&(r.constructor!==M||(r._ending=!0,r.emit("close"),r=r._channel,r))&&P(this,e,r)},SERVICE_REQUEST:(e,r)=>{if(0===p||g||this.authenticated||"ssh-userauth"!==r)return W.disconnect(f.SERVICE_NOT_AVAILABLE),void t.end();g=!0,W.serviceAccept(r)},USERAUTH_REQUEST:(e,r,n,i,o)=>{if(0===p||this.authenticated||h&&(h.username!==r||h.service!==n)||"password"!==i&&"publickey"!==i&&"hostbased"!==i&&"keyboard-interactive"!==i&&"none"!==i||10===A.length)return W.disconnect(f.PROTOCOL_ERROR),void t.end();if("ssh-connection"!==n)return W.disconnect(f.SERVICE_NOT_AVAILABLE),void t.end();let a;switch(i){case"keyboard-interactive":a=new U(W,r,n,i,o,j);break;case"publickey":a=new D(W,r,n,i,o,j);break;case"hostbased":a=new H(W,r,n,i,o,j);break;case"password":if(h&&h instanceof F&&h._changeCb){const t=h._changeCb;return h._changeCb=void 0,void t(o.newPassword)}a=new F(W,r,n,i,o,j);break;case"none":a=new x(W,r,n,i,j)}if(h){if(!h._initialResponse)return A.push(a);h._multistep&&!h._finalResponse&&(h._cleanup&&h._cleanup(),h.emit("abort"))}h=a,s(this,"authentication")?this.emit("authentication",h):h.reject()},USERAUTH_INFO_RESPONSE:(t,e)=>{h&&h instanceof U&&h._onInfoResponse(e)},GLOBAL_REQUEST:(t,e,r,n)=>{const i={type:null,buf:null};function o(t,e){i.type=t,i.buf=e,function(){for(;_.length>0&&_[0].type;){const t=_.shift();"SUCCESS"===t.type&&W.requestSuccess(t.buf),"FAILURE"===t.type&&W.requestFailure()}}()}if(r&&_.push(i),("tcpip-forward"===e||"cancel-tcpip-forward"===e||"no-more-sessions@openssh.com"===e||"streamlocal-forward@openssh.com"===e||"cancel-streamlocal-forward@openssh.com"===e)&&s(this,"request")&&this.authenticated){let t,i;if(r){let r=!1;t=t=>{if(r)return;let i;r=!0,"tcpip-forward"===e&&0===n.bindPort&&"number"==typeof t&&(i=Buffer.allocUnsafe(4),v(i,t,0)),o("SUCCESS",i)},i=()=>{r||(r=!0,o("FAILURE"))}}if("no-more-sessions@openssh.com"===e)return this.noMoreSessions=!0,void(t&&t());this.emit("request",t,i,e,n)}else r&&o("FAILURE")}}});t.pause(),m.then((()=>{W.start(),t.on("data",(e=>{try{W.parse(e,0,e.length)}catch(e){this.emit("error",e);try{N(t)&&t.end()}catch{}}})),t.resume()})).catch((e=>{this.emit("error",e);try{N(t)&&t.end()}catch{}})),t.on("error",(t=>{t.level="socket",this.emit("error",t)})).once("end",(()=>{i&&i("Socket ended"),W.cleanup(),this.emit("end")})).once("close",(()=>{i&&i("Socket closed"),W.cleanup(),this.emit("close");const t=new Error("No response from server");this._chanMgr.cleanup(t)}));const j=(t,e,r,n)=>{h!==t||this.authenticated||(e?(h=void 0,this.authenticated=!0,W.authSuccess(),A=[],this.emit("ready")):(W.authFailure(r,n),A.length&&(h=A.pop(),s(this,"authentication")?this.emit("authentication",h):h.reject())))}}end(){return this._sock&&N(this._sock)&&(this._protocol.disconnect(f.BY_APPLICATION),this._sock.end()),this}x11(t,e,r){return W(this,"x11",{originAddr:t,originPort:e},r),this}forwardOut(t,e,r,n,i){return W(this,"forwarded-tcpip",{boundAddr:t,boundPort:e,remoteAddr:r,remotePort:n},i),this}openssh_forwardOutStreamLocal(t,e){return W(this,"forwarded-streamlocal@openssh.com",{socketPath:t},e),this}rekey(t){let e;try{this._protocol.rekey()}catch(t){e=t}"function"==typeof t&&(e?process.nextTick(t,e):this.once("rekey",t))}setNoDelay(t){return this._sock&&"function"==typeof this._sock.setNoDelay&&this._sock.setNoDelay(t),this}}function W(t,e,r,n){const i=C,s=k;"function"==typeof r&&(n=r,r={});const o=(t,e)=>{n(t,e)};o.type=e;const a=t._chanMgr.add(o);if(-1!==a)switch(e){case"forwarded-tcpip":t._protocol.forwardedTcpip(a,i,s,r);break;case"x11":t._protocol.x11(a,i,s,r);break;case"forwarded-streamlocal@openssh.com":t._protocol.openssh_forwardedStreamLocal(a,i,s,r);break;default:throw new Error(`Unsupported channel type: ${e}`)}else n(new Error("No free channels available"))}function j(t,e){return t-e}t.exports=Q,t.exports.IncomingClient=$},9100:(t,e,r)=>{"use strict";const{SFTP:n}=r(4261),i=2**32-1;function s(t,e,r,n){if(t._chanMgr.remove(e),"function"!=typeof n)return;let i;r instanceof Error?i=r:"object"==typeof r&&null!==r?(i=new Error(`(SSH) Channel open failure: ${r.description}`),i.reason=r.reason):(i=new Error("(SSH) Channel open failure: server closed channel unexpectedly"),i.reason=""),n(i)}function o(t,e,r,i,o){if("function"==typeof r)return void s(t,e,i,r);if("object"!=typeof r||null===r)return;if(r.incoming&&"closed"===r.incoming.state)return;if(t._chanMgr.remove(e),r.server&&"Session"===r.constructor.name)return;r.incoming.state="closed",r.readable&&r.push(null),r.server?r.stderr.writable&&r.stderr.end():r.stderr.readable&&r.stderr.push(null),r.constructor===n||"open"!==r.outgoing.state&&"eof"!==r.outgoing.state||o||r.close(),"closing"===r.outgoing.state&&(r.outgoing.state="closed");const a=r._readableState,c=r._writableState;!c||c.ending||c.finished||o||r.end();const h=r._callbacks;r._callbacks=[];for(let t=0;t<h.length;++t)h[t](!0);if(r.server)!r.readable||r.destroyed||a&&a.endEmitted?r.emit("close"):r.once("end",(()=>r.emit("close")));else{let t;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":t=()=>r.emit("close");break;default:{const e=r._exit;t=()=>{null===e.code?r.emit("close",e.code,e.signal,e.dump,e.desc):r.emit("close",e.code)}}}!r.readable||r.destroyed||a&&a.endEmitted?t():r.once("end",t);const e=r.stderr._readableState;!r.stderr.readable||r.stderr.destroyed||e&&e.endEmitted?r.stderr.emit("close"):r.stderr.once("end",(()=>r.stderr.emit("close")))}}const a=(()=>{const t=Object.prototype.toString;return e=>"[object RegExp]"===t.call(e)})();t.exports={ChannelManager:class{constructor(t){this._client=t,this._channels={},this._cur=-1,this._count=0}add(t){let e;if(this._cur<i)e=++this._cur;else if(0===this._count)this._cur=0,e=0;else{const t=this._channels;for(let r=0;r<i;++r)if(void 0===t[r]){e=r;break}}return void 0===e?-1:(this._channels[e]=t||!0,++this._count,e)}update(t,e){if("number"!=typeof t||t<0||t>=i||!isFinite(t))throw new Error(`Invalid channel id: ${t}`);e&&this._channels[t]&&(this._channels[t]=e)}get(t){if("number"!=typeof t||t<0||t>=i||!isFinite(t))throw new Error(`Invalid channel id: ${t}`);return this._channels[t]}remove(t){if("number"!=typeof t||t<0||t>=i||!isFinite(t))throw new Error(`Invalid channel id: ${t}`);this._channels[t]&&(delete this._channels[t],this._count&&--this._count)}cleanup(t){const e=this._channels;this._channels={},this._cur=-1,this._count=0;const r=Object.keys(e),n=this._client;for(let i=0;i<r.length;++i){const s=+r[i],a=e[s];o(n,s,a._channel||a,t,!0)}}},generateAlgorithmList:function(t,e,r){if(Array.isArray(t)&&t.length>0){for(let e=0;e<t.length;++e)if(-1===r.indexOf(t[e]))throw new Error(`Unsupported algorithm: ${t[e]}`);return t}if("object"==typeof t&&null!==t){const n=Object.keys(t);let i=e;for(let s=0;s<n.length;++s){const o=n[s];let c=t[o];switch(o){case"append":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let t=0;t<c.length;++t){const n=c[t];if("string"==typeof n){if(!n||-1!==i.indexOf(n))continue;if(-1===r.indexOf(n))throw new Error(`Unsupported algorithm: ${n}`);i===e&&(i=i.slice()),i.push(n)}else if(a(n))for(let t=0;t<r.length;++t){const s=r[t];if(n.test(s)){if(-1!==i.indexOf(s))continue;i===e&&(i=i.slice()),i.push(s)}}}break;case"prepend":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let t=c.length;t>=0;--t){const n=c[t];if("string"==typeof n){if(!n||-1!==i.indexOf(n))continue;if(-1===r.indexOf(n))throw new Error(`Unsupported algorithm: ${n}`);i===e&&(i=i.slice()),i.unshift(n)}else if(a(n))for(let t=r.length;t>=0;--t){const s=r[t];if(n.test(s)){if(-1!==i.indexOf(s))continue;i===e&&(i=i.slice()),i.unshift(s)}}}break;case"remove":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let t=0;t<c.length;++t){const r=c[t];if("string"==typeof r){if(!r)continue;const t=i.indexOf(r);if(-1===t)continue;i===e&&(i=i.slice()),i.splice(t,1)}else if(a(r))for(let t=0;t<i.length;++t)r.test(i[t])&&(i===e&&(i=i.slice()),i.splice(t,1),--t)}}}return i}return e},onChannelOpenFailure:s,onCHANNEL_CLOSE:o,isWritable:t=>t&&t.writable&&t._readableState&&!1===t._readableState.ended}},6623:t=>{function e(t){if(!(this instanceof e))return new e(t);this.value=t}function r(t,e,r){var i=[],s=[],o=!0;return function t(a){var c=r?n(a):a,h={},l={node:c,node_:a,path:[].concat(i),parent:s.slice(-1)[0],key:i.slice(-1)[0],isRoot:0===i.length,level:i.length,circular:null,update:function(t){l.isRoot||(l.parent.node[l.key]=t),l.node=t},delete:function(){delete l.parent.node[l.key]},remove:function(){Array.isArray(l.parent.node)?l.parent.node.splice(l.key,1):delete l.parent.node[l.key]},before:function(t){h.before=t},after:function(t){h.after=t},pre:function(t){h.pre=t},post:function(t){h.post=t},stop:function(){o=!1}};if(!o)return l;if("object"==typeof c&&null!==c){l.isLeaf=0==Object.keys(c).length;for(var u=0;u<s.length;u++)if(s[u].node_===a){l.circular=s[u];break}}else l.isLeaf=!0;l.notLeaf=!l.isLeaf,l.notRoot=!l.isRoot;var f=e.call(l,l.node);if(void 0!==f&&l.update&&l.update(f),h.before&&h.before.call(l,l.node),"object"==typeof l.node&&null!==l.node&&!l.circular){s.push(l);var d=Object.keys(l.node);d.forEach((function(e,n){i.push(e),h.pre&&h.pre.call(l,l.node[e],e);var s=t(l.node[e]);r&&Object.hasOwnProperty.call(l.node,e)&&(l.node[e]=s.node),s.isLast=n==d.length-1,s.isFirst=0==n,h.post&&h.post.call(l,s),i.pop()})),s.pop()}return h.after&&h.after.call(l,l.node),l}(t).node}function n(t){var e;return"object"==typeof t&&null!==t?(e=Array.isArray(t)?[]:t instanceof Date?new Date(t):t instanceof Boolean?new Boolean(t):t instanceof Number?new Number(t):t instanceof String?new String(t):Object.create(Object.getPrototypeOf(t)),Object.keys(t).forEach((function(r){e[r]=t[r]})),e):t}t.exports=e,e.prototype.get=function(t){for(var e=this.value,r=0;r<t.length;r++){var n=t[r];if(!Object.hasOwnProperty.call(e,n)){e=void 0;break}e=e[n]}return e},e.prototype.set=function(t,e){for(var r=this.value,n=0;n<t.length-1;n++){var i=t[n];Object.hasOwnProperty.call(r,i)||(r[i]={}),r=r[i]}return r[t[n]]=e,e},e.prototype.map=function(t){return r(this.value,t,!0)},e.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},e.prototype.reduce=function(t,e){var r=1===arguments.length,n=r?this.value:e;return this.forEach((function(e){this.isRoot&&r||(n=t.call(this,n,e))})),n},e.prototype.deepEqual=function(t){if(1!==arguments.length)throw new Error("deepEqual requires exactly one object to compare against");var r=!0,n=t;return this.forEach((function(i){var s=function(){r=!1}.bind(this);if(!this.isRoot){if("object"!=typeof n)return s();n=n[this.key]}var o=n;this.post((function(){n=o}));var a=function(t){return Object.prototype.toString.call(t)};if(this.circular)e(t).get(this.circular.path)!==o&&s();else if(typeof o!=typeof i)s();else if(null===o||null===i||void 0===o||void 0===i)o!==i&&s();else if(o.__proto__!==i.__proto__)s();else if(o===i);else if("function"==typeof o)o instanceof RegExp?o.toString()!=i.toString()&&s():o!==i&&s();else if("object"==typeof o)if("[object Arguments]"===a(i)||"[object Arguments]"===a(o))a(o)!==a(i)&&s();else if(o instanceof Date||i instanceof Date)o instanceof Date&&i instanceof Date&&o.getTime()===i.getTime()||s();else{var c=Object.keys(o),h=Object.keys(i);if(c.length!==h.length)return s();for(var l=0;l<c.length;l++){var u=c[l];Object.hasOwnProperty.call(i,u)||s()}}})),r},e.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},e.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},e.prototype.clone=function(){var t=[],e=[];return function r(i){for(var s=0;s<t.length;s++)if(t[s]===i)return e[s];if("object"==typeof i&&null!==i){var o=n(i);return t.push(i),e.push(o),Object.keys(i).forEach((function(t){o[t]=r(i[t])})),t.pop(),e.pop(),o}return i}(this.value)},Object.keys(e.prototype).forEach((function(t){e[t]=function(r){var n=[].slice.call(arguments,1),i=e(r);return i[t].apply(i,n)}}))},8947:(t,e,r)=>{!function(t){"use strict";var e=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=e(),a=e([1]),c=e([56129,1]),h=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function g(t,e,r,n,i){var s,o=0;for(s=0;s<i;s++)o|=t[e+s]^r[n+s];return(1&o-1>>>8)-1}function A(t,e,r,n){return g(t,e,r,n,16)}function _(t,e,r,n){return g(t,e,r,n,32)}function E(t,e,r,n){!function(t,e,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,h=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,d=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,A=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,_=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,E=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,m=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,y=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=s,b=o,w=a,v=c,I=h,C=l,k=u,R=f,B=d,O=p,T=g,N=A,L=_,P=E,x=m,U=y,D=0;D<20;D+=2)S^=(i=(L^=(i=(B^=(i=(I^=(i=S+L|0)<<7|i>>>25)+S|0)<<9|i>>>23)+I|0)<<13|i>>>19)+B|0)<<18|i>>>14,C^=(i=(b^=(i=(P^=(i=(O^=(i=C+b|0)<<7|i>>>25)+C|0)<<9|i>>>23)+O|0)<<13|i>>>19)+P|0)<<18|i>>>14,T^=(i=(k^=(i=(w^=(i=(x^=(i=T+k|0)<<7|i>>>25)+T|0)<<9|i>>>23)+x|0)<<13|i>>>19)+w|0)<<18|i>>>14,U^=(i=(N^=(i=(R^=(i=(v^=(i=U+N|0)<<7|i>>>25)+U|0)<<9|i>>>23)+v|0)<<13|i>>>19)+R|0)<<18|i>>>14,S^=(i=(v^=(i=(w^=(i=(b^=(i=S+v|0)<<7|i>>>25)+S|0)<<9|i>>>23)+b|0)<<13|i>>>19)+w|0)<<18|i>>>14,C^=(i=(I^=(i=(R^=(i=(k^=(i=C+I|0)<<7|i>>>25)+C|0)<<9|i>>>23)+k|0)<<13|i>>>19)+R|0)<<18|i>>>14,T^=(i=(O^=(i=(B^=(i=(N^=(i=T+O|0)<<7|i>>>25)+T|0)<<9|i>>>23)+N|0)<<13|i>>>19)+B|0)<<18|i>>>14,U^=(i=(x^=(i=(P^=(i=(L^=(i=U+x|0)<<7|i>>>25)+U|0)<<9|i>>>23)+L|0)<<13|i>>>19)+P|0)<<18|i>>>14;S=S+s|0,b=b+o|0,w=w+a|0,v=v+c|0,I=I+h|0,C=C+l|0,k=k+u|0,R=R+f|0,B=B+d|0,O=O+p|0,T=T+g|0,N=N+A|0,L=L+_|0,P=P+E|0,x=x+m|0,U=U+y|0,t[0]=S>>>0&255,t[1]=S>>>8&255,t[2]=S>>>16&255,t[3]=S>>>24&255,t[4]=b>>>0&255,t[5]=b>>>8&255,t[6]=b>>>16&255,t[7]=b>>>24&255,t[8]=w>>>0&255,t[9]=w>>>8&255,t[10]=w>>>16&255,t[11]=w>>>24&255,t[12]=v>>>0&255,t[13]=v>>>8&255,t[14]=v>>>16&255,t[15]=v>>>24&255,t[16]=I>>>0&255,t[17]=I>>>8&255,t[18]=I>>>16&255,t[19]=I>>>24&255,t[20]=C>>>0&255,t[21]=C>>>8&255,t[22]=C>>>16&255,t[23]=C>>>24&255,t[24]=k>>>0&255,t[25]=k>>>8&255,t[26]=k>>>16&255,t[27]=k>>>24&255,t[28]=R>>>0&255,t[29]=R>>>8&255,t[30]=R>>>16&255,t[31]=R>>>24&255,t[32]=B>>>0&255,t[33]=B>>>8&255,t[34]=B>>>16&255,t[35]=B>>>24&255,t[36]=O>>>0&255,t[37]=O>>>8&255,t[38]=O>>>16&255,t[39]=O>>>24&255,t[40]=T>>>0&255,t[41]=T>>>8&255,t[42]=T>>>16&255,t[43]=T>>>24&255,t[44]=N>>>0&255,t[45]=N>>>8&255,t[46]=N>>>16&255,t[47]=N>>>24&255,t[48]=L>>>0&255,t[49]=L>>>8&255,t[50]=L>>>16&255,t[51]=L>>>24&255,t[52]=P>>>0&255,t[53]=P>>>8&255,t[54]=P>>>16&255,t[55]=P>>>24&255,t[56]=x>>>0&255,t[57]=x>>>8&255,t[58]=x>>>16&255,t[59]=x>>>24&255,t[60]=U>>>0&255,t[61]=U>>>8&255,t[62]=U>>>16&255,t[63]=U>>>24&255}(t,e,r,n)}function m(t,e,r,n){!function(t,e,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,h=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,d=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,A=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,_=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,E=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,m=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,y=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=0;S<20;S+=2)s^=(i=(_^=(i=(d^=(i=(h^=(i=s+_|0)<<7|i>>>25)+s|0)<<9|i>>>23)+h|0)<<13|i>>>19)+d|0)<<18|i>>>14,l^=(i=(o^=(i=(E^=(i=(p^=(i=l+o|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+E|0)<<18|i>>>14,g^=(i=(u^=(i=(a^=(i=(m^=(i=g+u|0)<<7|i>>>25)+g|0)<<9|i>>>23)+m|0)<<13|i>>>19)+a|0)<<18|i>>>14,y^=(i=(A^=(i=(f^=(i=(c^=(i=y+A|0)<<7|i>>>25)+y|0)<<9|i>>>23)+c|0)<<13|i>>>19)+f|0)<<18|i>>>14,s^=(i=(c^=(i=(a^=(i=(o^=(i=s+c|0)<<7|i>>>25)+s|0)<<9|i>>>23)+o|0)<<13|i>>>19)+a|0)<<18|i>>>14,l^=(i=(h^=(i=(f^=(i=(u^=(i=l+h|0)<<7|i>>>25)+l|0)<<9|i>>>23)+u|0)<<13|i>>>19)+f|0)<<18|i>>>14,g^=(i=(p^=(i=(d^=(i=(A^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+A|0)<<13|i>>>19)+d|0)<<18|i>>>14,y^=(i=(m^=(i=(E^=(i=(_^=(i=y+m|0)<<7|i>>>25)+y|0)<<9|i>>>23)+_|0)<<13|i>>>19)+E|0)<<18|i>>>14;t[0]=s>>>0&255,t[1]=s>>>8&255,t[2]=s>>>16&255,t[3]=s>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=g>>>0&255,t[9]=g>>>8&255,t[10]=g>>>16&255,t[11]=g>>>24&255,t[12]=y>>>0&255,t[13]=y>>>8&255,t[14]=y>>>16&255,t[15]=y>>>24&255,t[16]=u>>>0&255,t[17]=u>>>8&255,t[18]=u>>>16&255,t[19]=u>>>24&255,t[20]=f>>>0&255,t[21]=f>>>8&255,t[22]=f>>>16&255,t[23]=f>>>24&255,t[24]=d>>>0&255,t[25]=d>>>8&255,t[26]=d>>>16&255,t[27]=d>>>24&255,t[28]=p>>>0&255,t[29]=p>>>8&255,t[30]=p>>>16&255,t[31]=p>>>24&255}(t,e,r,n)}var y=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(t,e,r,n,i,s,o){var a,c,h=new Uint8Array(16),l=new Uint8Array(64);for(c=0;c<16;c++)h[c]=0;for(c=0;c<8;c++)h[c]=s[c];for(;i>=64;){for(E(l,h,o,y),c=0;c<64;c++)t[e+c]=r[n+c]^l[c];for(a=1,c=8;c<16;c++)a=a+(255&h[c])|0,h[c]=255&a,a>>>=8;i-=64,e+=64,n+=64}if(i>0)for(E(l,h,o,y),c=0;c<i;c++)t[e+c]=r[n+c]^l[c];return 0}function b(t,e,r,n,i){var s,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(E(c,a,i,y),o=0;o<64;o++)t[e+o]=c[o];for(s=1,o=8;o<16;o++)s=s+(255&a[o])|0,a[o]=255&s,s>>>=8;r-=64,e+=64}if(r>0)for(E(c,a,i,y),o=0;o<r;o++)t[e+o]=c[o];return 0}function w(t,e,r,n,i){var s=new Uint8Array(32);m(s,n,i,y);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return b(t,e,r,o,s)}function v(t,e,r,n,i,s,o){var a=new Uint8Array(32);m(a,s,o,y);for(var c=new Uint8Array(8),h=0;h<8;h++)c[h]=s[h+16];return S(t,e,r,n,i,c,a)}var I=function(t){var e,r,n,i,s,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|i<<9),s=255&t[8]|(255&t[9])<<8,this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,o=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(s>>>14|o<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(o>>>11|a<<5),c=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function C(t,e,r,n,i,s){var o=new I(s);return o.update(r,n,i),o.finish(t,e),0}function k(t,e,r,n,i,s){var o=new Uint8Array(16);return C(o,0,r,n,i,s),A(t,e,o,0)}function R(t,e,r,n,i){var s;if(r<32)return-1;for(v(t,0,e,0,r,n,i),C(t,16,t,32,r-32,t),s=0;s<16;s++)t[s]=0;return 0}function B(t,e,r,n,i){var s,o=new Uint8Array(32);if(r<32)return-1;if(w(o,0,32,n,i),0!==k(e,16,e,32,r-32,o))return-1;for(v(t,0,e,0,r,n,i),s=0;s<32;s++)t[s]=0;return 0}function O(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function T(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function N(t,e,r){for(var n,i=~(r-1),s=0;s<16;s++)n=i&(t[s]^e[s]),t[s]^=n,e[s]^=n}function L(t,r){var n,i,s,o=e(),a=e();for(n=0;n<16;n++)a[n]=r[n];for(T(a),T(a),T(a),i=0;i<2;i++){for(o[0]=a[0]-65517,n=1;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,N(a,o,1-s)}for(n=0;n<16;n++)t[2*n]=255&a[n],t[2*n+1]=a[n]>>8}function P(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return L(r,t),L(n,e),_(r,0,n,0)}function x(t){var e=new Uint8Array(32);return L(e,t),1&e[0]}function U(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function D(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function H(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function F(t,e,r){var n,i,s=0,o=0,a=0,c=0,h=0,l=0,u=0,f=0,d=0,p=0,g=0,A=0,_=0,E=0,m=0,y=0,S=0,b=0,w=0,v=0,I=0,C=0,k=0,R=0,B=0,O=0,T=0,N=0,L=0,P=0,x=0,U=r[0],D=r[1],H=r[2],F=r[3],M=r[4],Q=r[5],$=r[6],W=r[7],j=r[8],K=r[9],G=r[10],q=r[11],V=r[12],z=r[13],Y=r[14],X=r[15];s+=(n=e[0])*U,o+=n*D,a+=n*H,c+=n*F,h+=n*M,l+=n*Q,u+=n*$,f+=n*W,d+=n*j,p+=n*K,g+=n*G,A+=n*q,_+=n*V,E+=n*z,m+=n*Y,y+=n*X,o+=(n=e[1])*U,a+=n*D,c+=n*H,h+=n*F,l+=n*M,u+=n*Q,f+=n*$,d+=n*W,p+=n*j,g+=n*K,A+=n*G,_+=n*q,E+=n*V,m+=n*z,y+=n*Y,S+=n*X,a+=(n=e[2])*U,c+=n*D,h+=n*H,l+=n*F,u+=n*M,f+=n*Q,d+=n*$,p+=n*W,g+=n*j,A+=n*K,_+=n*G,E+=n*q,m+=n*V,y+=n*z,S+=n*Y,b+=n*X,c+=(n=e[3])*U,h+=n*D,l+=n*H,u+=n*F,f+=n*M,d+=n*Q,p+=n*$,g+=n*W,A+=n*j,_+=n*K,E+=n*G,m+=n*q,y+=n*V,S+=n*z,b+=n*Y,w+=n*X,h+=(n=e[4])*U,l+=n*D,u+=n*H,f+=n*F,d+=n*M,p+=n*Q,g+=n*$,A+=n*W,_+=n*j,E+=n*K,m+=n*G,y+=n*q,S+=n*V,b+=n*z,w+=n*Y,v+=n*X,l+=(n=e[5])*U,u+=n*D,f+=n*H,d+=n*F,p+=n*M,g+=n*Q,A+=n*$,_+=n*W,E+=n*j,m+=n*K,y+=n*G,S+=n*q,b+=n*V,w+=n*z,v+=n*Y,I+=n*X,u+=(n=e[6])*U,f+=n*D,d+=n*H,p+=n*F,g+=n*M,A+=n*Q,_+=n*$,E+=n*W,m+=n*j,y+=n*K,S+=n*G,b+=n*q,w+=n*V,v+=n*z,I+=n*Y,C+=n*X,f+=(n=e[7])*U,d+=n*D,p+=n*H,g+=n*F,A+=n*M,_+=n*Q,E+=n*$,m+=n*W,y+=n*j,S+=n*K,b+=n*G,w+=n*q,v+=n*V,I+=n*z,C+=n*Y,k+=n*X,d+=(n=e[8])*U,p+=n*D,g+=n*H,A+=n*F,_+=n*M,E+=n*Q,m+=n*$,y+=n*W,S+=n*j,b+=n*K,w+=n*G,v+=n*q,I+=n*V,C+=n*z,k+=n*Y,R+=n*X,p+=(n=e[9])*U,g+=n*D,A+=n*H,_+=n*F,E+=n*M,m+=n*Q,y+=n*$,S+=n*W,b+=n*j,w+=n*K,v+=n*G,I+=n*q,C+=n*V,k+=n*z,R+=n*Y,B+=n*X,g+=(n=e[10])*U,A+=n*D,_+=n*H,E+=n*F,m+=n*M,y+=n*Q,S+=n*$,b+=n*W,w+=n*j,v+=n*K,I+=n*G,C+=n*q,k+=n*V,R+=n*z,B+=n*Y,O+=n*X,A+=(n=e[11])*U,_+=n*D,E+=n*H,m+=n*F,y+=n*M,S+=n*Q,b+=n*$,w+=n*W,v+=n*j,I+=n*K,C+=n*G,k+=n*q,R+=n*V,B+=n*z,O+=n*Y,T+=n*X,_+=(n=e[12])*U,E+=n*D,m+=n*H,y+=n*F,S+=n*M,b+=n*Q,w+=n*$,v+=n*W,I+=n*j,C+=n*K,k+=n*G,R+=n*q,B+=n*V,O+=n*z,T+=n*Y,N+=n*X,E+=(n=e[13])*U,m+=n*D,y+=n*H,S+=n*F,b+=n*M,w+=n*Q,v+=n*$,I+=n*W,C+=n*j,k+=n*K,R+=n*G,B+=n*q,O+=n*V,T+=n*z,N+=n*Y,L+=n*X,m+=(n=e[14])*U,y+=n*D,S+=n*H,b+=n*F,w+=n*M,v+=n*Q,I+=n*$,C+=n*W,k+=n*j,R+=n*K,B+=n*G,O+=n*q,T+=n*V,N+=n*z,L+=n*Y,P+=n*X,y+=(n=e[15])*U,o+=38*(b+=n*H),a+=38*(w+=n*F),c+=38*(v+=n*M),h+=38*(I+=n*Q),l+=38*(C+=n*$),u+=38*(k+=n*W),f+=38*(R+=n*j),d+=38*(B+=n*K),p+=38*(O+=n*G),g+=38*(T+=n*q),A+=38*(N+=n*V),_+=38*(L+=n*z),E+=38*(P+=n*Y),m+=38*(x+=n*X),s=(n=(s+=38*(S+=n*D))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),A=(n=A+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),A=(n=A+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=h,t[5]=l,t[6]=u,t[7]=f,t[8]=d,t[9]=p,t[10]=g,t[11]=A,t[12]=_,t[13]=E,t[14]=m,t[15]=y}function M(t,e){F(t,e,e)}function Q(t,r){var n,i=e();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)M(i,i),2!==n&&4!==n&&F(i,i,r);for(n=0;n<16;n++)t[n]=i[n]}function $(t,r,n){var i,s,o=new Uint8Array(32),a=new Float64Array(80),h=e(),l=e(),u=e(),f=e(),d=e(),p=e();for(s=0;s<31;s++)o[s]=r[s];for(o[31]=127&r[31]|64,o[0]&=248,U(a,n),s=0;s<16;s++)l[s]=a[s],f[s]=h[s]=u[s]=0;for(h[0]=f[0]=1,s=254;s>=0;--s)N(h,l,i=o[s>>>3]>>>(7&s)&1),N(u,f,i),D(d,h,u),H(h,h,u),D(u,l,f),H(l,l,f),M(f,d),M(p,h),F(h,u,h),F(u,l,d),D(d,h,u),H(h,h,u),M(l,h),H(u,f,p),F(h,u,c),D(h,h,f),F(u,u,h),F(h,f,p),F(f,l,a),M(l,d),N(h,l,i),N(u,f,i);for(s=0;s<16;s++)a[s+16]=h[s],a[s+32]=u[s],a[s+48]=l[s],a[s+64]=f[s];var g=a.subarray(32),A=a.subarray(16);return Q(g,g),F(A,A,g),L(t,A),0}function W(t,e){return $(t,e,s)}function j(t,e){return n(e,32),W(t,e)}function K(t,e,r){var n=new Uint8Array(32);return $(n,r,e),m(t,i,n,y)}I.prototype.blocks=function(t,e,r){for(var n,i,s,o,a,c,h,l,u,f,d,p,g,A,_,E,m,y,S,b=this.fin?0:2048,w=this.h[0],v=this.h[1],I=this.h[2],C=this.h[3],k=this.h[4],R=this.h[5],B=this.h[6],O=this.h[7],T=this.h[8],N=this.h[9],L=this.r[0],P=this.r[1],x=this.r[2],U=this.r[3],D=this.r[4],H=this.r[5],F=this.r[6],M=this.r[7],Q=this.r[8],$=this.r[9];r>=16;)f=u=0,f+=(w+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*L,f+=(v+=8191&(n>>>13|(i=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*$),f+=(I+=8191&(i>>>10|(s=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*Q),f+=(C+=8191&(s>>>7|(o=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*M),u=(f+=(k+=8191&(o>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*F))>>>13,f&=8191,f+=(R+=a>>>1&8191)*(5*H),f+=(B+=8191&(a>>>14|(c=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*D),f+=(O+=8191&(c>>>11|(h=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*U),f+=(T+=8191&(h>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*x),d=u+=(f+=(N+=l>>>5|b)*(5*P))>>>13,d+=w*P,d+=v*L,d+=I*(5*$),d+=C*(5*Q),u=(d+=k*(5*M))>>>13,d&=8191,d+=R*(5*F),d+=B*(5*H),d+=O*(5*D),d+=T*(5*U),u+=(d+=N*(5*x))>>>13,d&=8191,p=u,p+=w*x,p+=v*P,p+=I*L,p+=C*(5*$),u=(p+=k*(5*Q))>>>13,p&=8191,p+=R*(5*M),p+=B*(5*F),p+=O*(5*H),p+=T*(5*D),g=u+=(p+=N*(5*U))>>>13,g+=w*U,g+=v*x,g+=I*P,g+=C*L,u=(g+=k*(5*$))>>>13,g&=8191,g+=R*(5*Q),g+=B*(5*M),g+=O*(5*F),g+=T*(5*H),A=u+=(g+=N*(5*D))>>>13,A+=w*D,A+=v*U,A+=I*x,A+=C*P,u=(A+=k*L)>>>13,A&=8191,A+=R*(5*$),A+=B*(5*Q),A+=O*(5*M),A+=T*(5*F),_=u+=(A+=N*(5*H))>>>13,_+=w*H,_+=v*D,_+=I*U,_+=C*x,u=(_+=k*P)>>>13,_&=8191,_+=R*L,_+=B*(5*$),_+=O*(5*Q),_+=T*(5*M),E=u+=(_+=N*(5*F))>>>13,E+=w*F,E+=v*H,E+=I*D,E+=C*U,u=(E+=k*x)>>>13,E&=8191,E+=R*P,E+=B*L,E+=O*(5*$),E+=T*(5*Q),m=u+=(E+=N*(5*M))>>>13,m+=w*M,m+=v*F,m+=I*H,m+=C*D,u=(m+=k*U)>>>13,m&=8191,m+=R*x,m+=B*P,m+=O*L,m+=T*(5*$),y=u+=(m+=N*(5*Q))>>>13,y+=w*Q,y+=v*M,y+=I*F,y+=C*H,u=(y+=k*D)>>>13,y&=8191,y+=R*U,y+=B*x,y+=O*P,y+=T*L,S=u+=(y+=N*(5*$))>>>13,S+=w*$,S+=v*Q,S+=I*M,S+=C*F,u=(S+=k*H)>>>13,S&=8191,S+=R*D,S+=B*U,S+=O*x,S+=T*P,w=f=8191&(u=(u=((u+=(S+=N*L)>>>13)<<2)+u|0)+(f&=8191)|0),v=d+=u>>>=13,I=p&=8191,C=g&=8191,k=A&=8191,R=_&=8191,B=E&=8191,O=m&=8191,T=y&=8191,N=S&=8191,e+=16,r-=16;this.h[0]=w,this.h[1]=v,this.h[2]=I,this.h[3]=C,this.h[4]=k,this.h[5]=R,this.h[6]=B,this.h[7]=O,this.h[8]=T,this.h[9]=N},I.prototype.finish=function(t,e){var r,n,i,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this.h[s]=this.h[s]&n|o[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,s=1;s<8;s++)i=(this.h[s]+this.pad[s]|0)+(i>>>16)|0,this.h[s]=65535&i;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},I.prototype.update=function(t,e,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=i,e+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(t,e,i),e+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var G=R,q=B,V=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function z(t,e,r,n){for(var i,s,o,a,c,h,l,u,f,d,p,g,A,_,E,m,y,S,b,w,v,I,C,k,R,B,O=new Int32Array(16),T=new Int32Array(16),N=t[0],L=t[1],P=t[2],x=t[3],U=t[4],D=t[5],H=t[6],F=t[7],M=e[0],Q=e[1],$=e[2],W=e[3],j=e[4],K=e[5],G=e[6],q=e[7],z=0;n>=128;){for(b=0;b<16;b++)w=8*b+z,O[b]=r[w+0]<<24|r[w+1]<<16|r[w+2]<<8|r[w+3],T[b]=r[w+4]<<24|r[w+5]<<16|r[w+6]<<8|r[w+7];for(b=0;b<80;b++)if(i=N,s=L,o=P,a=x,c=U,h=D,l=H,f=M,d=Q,p=$,g=W,A=j,_=K,E=G,C=65535&(I=q),k=I>>>16,R=65535&(v=F),B=v>>>16,C+=65535&(I=(j>>>14|U<<18)^(j>>>18|U<<14)^(U>>>9|j<<23)),k+=I>>>16,R+=65535&(v=(U>>>14|j<<18)^(U>>>18|j<<14)^(j>>>9|U<<23)),B+=v>>>16,C+=65535&(I=j&K^~j&G),k+=I>>>16,R+=65535&(v=U&D^~U&H),B+=v>>>16,v=V[2*b],C+=65535&(I=V[2*b+1]),k+=I>>>16,R+=65535&v,B+=v>>>16,v=O[b%16],k+=(I=T[b%16])>>>16,R+=65535&v,B+=v>>>16,R+=(k+=(C+=65535&I)>>>16)>>>16,C=65535&(I=S=65535&C|k<<16),k=I>>>16,R=65535&(v=y=65535&R|(B+=R>>>16)<<16),B=v>>>16,C+=65535&(I=(M>>>28|N<<4)^(N>>>2|M<<30)^(N>>>7|M<<25)),k+=I>>>16,R+=65535&(v=(N>>>28|M<<4)^(M>>>2|N<<30)^(M>>>7|N<<25)),B+=v>>>16,k+=(I=M&Q^M&$^Q&$)>>>16,R+=65535&(v=N&L^N&P^L&P),B+=v>>>16,u=65535&(R+=(k+=(C+=65535&I)>>>16)>>>16)|(B+=R>>>16)<<16,m=65535&C|k<<16,C=65535&(I=g),k=I>>>16,R=65535&(v=a),B=v>>>16,k+=(I=S)>>>16,R+=65535&(v=y),B+=v>>>16,L=i,P=s,x=o,U=a=65535&(R+=(k+=(C+=65535&I)>>>16)>>>16)|(B+=R>>>16)<<16,D=c,H=h,F=l,N=u,Q=f,$=d,W=p,j=g=65535&C|k<<16,K=A,G=_,q=E,M=m,b%16==15)for(w=0;w<16;w++)v=O[w],C=65535&(I=T[w]),k=I>>>16,R=65535&v,B=v>>>16,v=O[(w+9)%16],C+=65535&(I=T[(w+9)%16]),k+=I>>>16,R+=65535&v,B+=v>>>16,y=O[(w+1)%16],C+=65535&(I=((S=T[(w+1)%16])>>>1|y<<31)^(S>>>8|y<<24)^(S>>>7|y<<25)),k+=I>>>16,R+=65535&(v=(y>>>1|S<<31)^(y>>>8|S<<24)^y>>>7),B+=v>>>16,y=O[(w+14)%16],k+=(I=((S=T[(w+14)%16])>>>19|y<<13)^(y>>>29|S<<3)^(S>>>6|y<<26))>>>16,R+=65535&(v=(y>>>19|S<<13)^(S>>>29|y<<3)^y>>>6),B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,O[w]=65535&R|B<<16,T[w]=65535&C|k<<16;C=65535&(I=M),k=I>>>16,R=65535&(v=N),B=v>>>16,v=t[0],k+=(I=e[0])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[0]=N=65535&R|B<<16,e[0]=M=65535&C|k<<16,C=65535&(I=Q),k=I>>>16,R=65535&(v=L),B=v>>>16,v=t[1],k+=(I=e[1])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[1]=L=65535&R|B<<16,e[1]=Q=65535&C|k<<16,C=65535&(I=$),k=I>>>16,R=65535&(v=P),B=v>>>16,v=t[2],k+=(I=e[2])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[2]=P=65535&R|B<<16,e[2]=$=65535&C|k<<16,C=65535&(I=W),k=I>>>16,R=65535&(v=x),B=v>>>16,v=t[3],k+=(I=e[3])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[3]=x=65535&R|B<<16,e[3]=W=65535&C|k<<16,C=65535&(I=j),k=I>>>16,R=65535&(v=U),B=v>>>16,v=t[4],k+=(I=e[4])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[4]=U=65535&R|B<<16,e[4]=j=65535&C|k<<16,C=65535&(I=K),k=I>>>16,R=65535&(v=D),B=v>>>16,v=t[5],k+=(I=e[5])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[5]=D=65535&R|B<<16,e[5]=K=65535&C|k<<16,C=65535&(I=G),k=I>>>16,R=65535&(v=H),B=v>>>16,v=t[6],k+=(I=e[6])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[6]=H=65535&R|B<<16,e[6]=G=65535&C|k<<16,C=65535&(I=q),k=I>>>16,R=65535&(v=F),B=v>>>16,v=t[7],k+=(I=e[7])>>>16,R+=65535&v,B+=v>>>16,B+=(R+=(k+=(C+=65535&I)>>>16)>>>16)>>>16,t[7]=F=65535&R|B<<16,e[7]=q=65535&C|k<<16,z+=128,n-=128}return n}function Y(t,e,r){var n,i=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,z(i,s,e,r),r%=128,n=0;n<r;n++)o[n]=e[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,p(o,r-8,a/536870912|0,a<<3),z(i,s,o,r),n=0;n<8;n++)p(t,8*n,i[n],s[n]);return 0}function X(t,r){var n=e(),i=e(),s=e(),o=e(),a=e(),c=e(),h=e(),u=e(),f=e();H(n,t[1],t[0]),H(f,r[1],r[0]),F(n,n,f),D(i,t[0],t[1]),D(f,r[0],r[1]),F(i,i,f),F(s,t[3],r[3]),F(s,s,l),F(o,t[2],r[2]),D(o,o,o),H(a,i,n),H(c,o,s),D(h,o,s),D(u,i,n),F(t[0],a,c),F(t[1],u,h),F(t[2],h,c),F(t[3],a,u)}function J(t,e,r){var n;for(n=0;n<4;n++)N(t[n],e[n],r)}function Z(t,r){var n=e(),i=e(),s=e();Q(s,r[2]),F(n,r[0],s),F(i,r[1],s),L(t,i),t[31]^=x(n)<<7}function tt(t,e,r){var n,i;for(O(t[0],o),O(t[1],a),O(t[2],a),O(t[3],o),i=255;i>=0;--i)J(t,e,n=r[i/8|0]>>(7&i)&1),X(e,t),X(t,t),J(t,e,n)}function et(t,r){var n=[e(),e(),e(),e()];O(n[0],u),O(n[1],f),O(n[2],a),F(n[3],u,f),tt(t,n,r)}function rt(t,r,i){var s,o=new Uint8Array(64),a=[e(),e(),e(),e()];for(i||n(r,32),Y(o,r,32),o[0]&=248,o[31]&=127,o[31]|=64,et(a,o),Z(t,a),s=0;s<32;s++)r[s+32]=t[s];return 0}var nt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function it(t,e){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*nt[i-(n-32)],r=e[i]+128>>8,e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*nt[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*nt[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function st(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;it(t,r)}function ot(t,r,n,i){var s,o,a=new Uint8Array(64),c=new Uint8Array(64),h=new Uint8Array(64),l=new Float64Array(64),u=[e(),e(),e(),e()];Y(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(s=0;s<n;s++)t[64+s]=r[s];for(s=0;s<32;s++)t[32+s]=a[32+s];for(Y(h,t.subarray(32),n+32),st(h),et(u,h),Z(t,u),s=32;s<64;s++)t[s]=i[s];for(Y(c,t,n+64),st(c),s=0;s<64;s++)l[s]=0;for(s=0;s<32;s++)l[s]=h[s];for(s=0;s<32;s++)for(o=0;o<32;o++)l[s+o]+=c[s]*a[o];return it(t.subarray(32),l),f}function at(t,r,n,i){var s,c=new Uint8Array(32),l=new Uint8Array(64),u=[e(),e(),e(),e()],f=[e(),e(),e(),e()];if(n<64)return-1;if(function(t,r){var n=e(),i=e(),s=e(),c=e(),l=e(),u=e(),f=e();return O(t[2],a),U(t[1],r),M(s,t[1]),F(c,s,h),H(s,s,t[2]),D(c,t[2],c),M(l,c),M(u,l),F(f,u,l),F(n,f,s),F(n,n,c),function(t,r){var n,i=e();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)M(i,i),1!==n&&F(i,i,r);for(n=0;n<16;n++)t[n]=i[n]}(n,n),F(n,n,s),F(n,n,c),F(n,n,c),F(t[0],n,c),M(i,t[0]),F(i,i,c),P(i,s)&&F(t[0],t[0],d),M(i,t[0]),F(i,i,c),P(i,s)?-1:(x(t[0])===r[31]>>7&&H(t[0],o,t[0]),F(t[3],t[0],t[1]),0)}(f,i))return-1;for(s=0;s<n;s++)t[s]=r[s];for(s=0;s<32;s++)t[s+32]=i[s];if(Y(l,t,n),st(l),tt(u,f,l),et(f,r.subarray(32)),X(u,f),Z(c,u),n-=64,_(r,0,c,0)){for(s=0;s<n;s++)t[s]=0;return-1}for(s=0;s<n;s++)t[s]=r[s+64];return n}var ct,ht=64,lt=32,ut=64;function ft(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function dt(){var t,e;for(e=0;e<arguments.length;e++)if("[object Uint8Array]"!==(t=Object.prototype.toString.call(arguments[e])))throw new TypeError("unexpected type "+t+", use Uint8Array")}function pt(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:m,crypto_stream_xor:v,crypto_stream:w,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:b,crypto_onetimeauth:C,crypto_onetimeauth_verify:k,crypto_verify_16:A,crypto_verify_32:_,crypto_secretbox:R,crypto_secretbox_open:B,crypto_scalarmult:$,crypto_scalarmult_base:W,crypto_box_beforenm:K,crypto_box_afternm:G,crypto_box:function(t,e,r,n,i,s){var o=new Uint8Array(32);return K(o,i,s),G(t,e,r,n,o)},crypto_box_open:function(t,e,r,n,i,s){var o=new Uint8Array(32);return K(o,i,s),q(t,e,r,n,o)},crypto_box_keypair:j,crypto_hash:Y,crypto_sign:ot,crypto_sign_keypair:rt,crypto_sign_open:at,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ht,crypto_sign_PUBLICKEYBYTES:lt,crypto_sign_SECRETKEYBYTES:ut,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},t.util||(t.util={},t.util.decodeUTF8=t.util.encodeUTF8=t.util.encodeBase64=t.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),t.randomBytes=function(t){var e=new Uint8Array(t);return n(e,t),e},t.secretbox=function(t,e,r){dt(t,e,r),ft(r,e);for(var n=new Uint8Array(32+t.length),i=new Uint8Array(n.length),s=0;s<t.length;s++)n[s+32]=t[s];return R(i,n,n.length,e,r),i.subarray(16)},t.secretbox.open=function(t,e,r){dt(t,e,r),ft(r,e);for(var n=new Uint8Array(16+t.length),i=new Uint8Array(n.length),s=0;s<t.length;s++)n[s+16]=t[s];return!(n.length<32)&&0===B(i,n,n.length,e,r)&&i.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(dt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var r=new Uint8Array(32);return $(r,t,e),r},t.scalarMult.base=function(t){if(dt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return W(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,i){var s=t.box.before(n,i);return t.secretbox(e,r,s)},t.box.before=function(t,e){dt(t,e),function(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return K(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,i){var s=t.box.before(n,i);return t.secretbox.open(e,r,s)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return j(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(dt(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return W(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(dt(t,e),e.length!==ut)throw new Error("bad secret key size");var r=new Uint8Array(ht+t.length);return ot(r,t,t.length,e),r},t.sign.open=function(t,e){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(dt(t,e),e.length!==lt)throw new Error("bad public key size");var r=new Uint8Array(t.length),n=at(r,t,t.length,e);if(n<0)return null;for(var i=new Uint8Array(n),s=0;s<i.length;s++)i[s]=r[s];return i},t.sign.detached=function(e,r){for(var n=t.sign(e,r),i=new Uint8Array(ht),s=0;s<i.length;s++)i[s]=n[s];return i},t.sign.detached.verify=function(t,e,r){if(dt(t,e,r),e.length!==ht)throw new Error("bad signature size");if(r.length!==lt)throw new Error("bad public key size");var n,i=new Uint8Array(ht+t.length),s=new Uint8Array(ht+t.length);for(n=0;n<ht;n++)i[n]=e[n];for(n=0;n<t.length;n++)i[n+ht]=t[n];return at(s,i,i.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(lt),e=new Uint8Array(ut);return rt(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(dt(t),t.length!==ut)throw new Error("bad secret key size");for(var e=new Uint8Array(lt),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(dt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(lt),r=new Uint8Array(ut),n=0;n<32;n++)r[n]=t[n];return rt(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=lt,t.sign.secretKeyLength=ut,t.sign.seedLength=32,t.sign.signatureLength=ht,t.hash=function(t){dt(t);var e=new Uint8Array(64);return Y(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return dt(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===g(t,0,e,0,t.length)},t.setPRNG=function(t){n=t},(ct="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&ct.getRandomValues?t.setPRNG((function(t,e){var r,n=new Uint8Array(e);for(r=0;r<e;r+=65536)ct.getRandomValues(n.subarray(r,r+Math.min(e-r,65536)));for(r=0;r<e;r++)t[r]=n[r];pt(n)})):(ct=r(6982))&&ct.randomBytes&&t.setPRNG((function(t,e){var r,n=ct.randomBytes(e);for(r=0;r<e;r++)t[r]=n[r];pt(n)}))}(t.exports?t.exports:self.nacl=self.nacl||{})},9481:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteSSHResolver=e.REMOTE_SSH_AUTHORITY=void 0,e.getRemoteAuthority=function(t){return`${e.REMOTE_SSH_AUTHORITY}+${t}`};const c=o(r(5317)),h=o(r(9896)),l=o(r(9278)),u=o(r(2203)),f=r(5861),d=o(r(1398)),p=o(r(7649)),g=a(r(5624)),A=a(r(6514)),_=a(r(1968)),E=r(337),m=r(5456),y=r(943),S=r(7721),b=r(5873),w=r(92),v=o(r(857));e.REMOTE_SSH_AUTHORITY="ssh-remote";class I{constructor(t,e,r){this.localPort=t,this.remotePortOrSocketPath=e,this.disposables=r}dispose(){(0,S.disposeAll)(this.disposables)}}e.RemoteSSHResolver=class{constructor(t,e){this.context=t,this.logger=e,this.proxyConnections=[],this.tunnels=[]}resolve(t,r){const[n,i]=t.split("+");if(n!==e.REMOTE_SSH_AUTHORITY)throw new Error(`Invalid authority type for SSH resolver: ${n}`);this.logger.info(`Resolving ssh remote authority '${t}' (attemp #${r.resolveAttempt})`);const s=g.default.parseEncoded(i),o=d.workspace.getConfiguration("remote.SSH"),a=o.get("enableDynamicForwarding",!0),h=o.get("enableAgentForwarding",!0),l=o.get("serverDownloadUrlTemplate"),f=o.get("defaultExtensions",[]),S=o.get("remotePlatform",{}),I=o.get("remoteServerListenOnSocket",!1),C=o.get("connectTimeout",60);return d.window.withProgress({title:`Setting up SSH Host ${s.hostname}`,location:d.ProgressLocation.Notification,cancellable:!1},(async()=>{try{const t=await _.default.loadFromFS(),r=t.getHostConfiguration(s.hostname),n=r.HostName?r.HostName.replace("%h",s.hostname):s.hostname,i=r.User||s.user||v.userInfo().username||"",o=r.Port?parseInt(r.Port,10):s.port||22;this.sshAgentSock=r.IdentityAgent||process.env.SSH_AUTH_SOCK||(w.isWindows?"\\\\.\\pipe\\openssh-ssh-agent":void 0),this.sshAgentSock=this.sshAgentSock?(0,m.untildify)(this.sshAgentSock):void 0;const k=h&&"yes"===(r.ForwardAgent||"no").toLowerCase(),R=k&&this.sshAgentSock?new p.OpenSSHAgent(this.sshAgentSock):void 0,B=r.PreferredAuthentications?r.PreferredAuthentications.split(",").map((t=>t.trim())):["publickey","password","keyboard-interactive"],O=r.IdentityFile||[],T="yes"===(r.IdentitiesOnly||"no").toLowerCase(),N=await(0,E.gatherIdentityFiles)(O,this.sshAgentSock,T,this.logger);let L;if(r.ProxyJump){const e=r.ProxyJump.split(",").filter((t=>!!t.trim())).map((e=>{const r=g.default.parse(e);return[r,t.getHostConfiguration(r.hostname)]}));for(let t=0;t<e.length;t++){const[r,s]=e[t],a=s.HostName||r.hostname,c=s.User||r.user||i,l=s.Port?parseInt(s.Port,10):r.port||o,u=h&&"yes"===(s.ForwardAgent||"no").toLowerCase(),f=u&&this.sshAgentSock?new p.OpenSSHAgent(this.sshAgentSock):void 0,d=s.IdentityFile||[],g="yes"===(s.IdentitiesOnly||"no").toLowerCase(),_=await(0,E.gatherIdentityFiles)(d,this.sshAgentSock,g,this.logger),m=this.getSSHAuthHandler(c,a,_,B),y=new A.default({host:L?void 0:a,port:L?void 0:l,sock:L,username:c,readyTimeout:1e3*C,strictVendor:!1,agentForward:u,agent:f,authHandler:(t,e,r)=>{m(t,e,r)}});this.proxyConnections.push(y);const S=t<e.length-1?e[t+1]:void 0,b=S?S[1].HostName||S[0].hostname:n,w=S?S[1].Port&&parseInt(S[1].Port,10)||S[0].port||22:o;L=await y.forwardOut("127.0.0.1",0,b,w)}}else if(r.ProxyCommand){let t=r.ProxyCommand.map((t=>t.replace("%h",n).replace("%n",s.hostname).replace("%p",o.toString()).replace("%r",i))),e=t.shift(),a={};w.isWindows&&/\.(bat|cmd)$/.test(e)&&(e=`"${e}"`,t=t.map((t=>t.includes(" ")?`"${t}"`:t)),a={shell:!0,windowsHide:!0,windowsVerbatimArguments:!0}),this.logger.trace(`Spawning ProxyCommand: ${e} ${t.join(" ")}`);const h=c.spawn(e,t,a);L=u.Duplex.from({readable:h.stdout,writable:h.stdin}),this.proxyCommandProcess=h}const P=this.getSSHAuthHandler(i,n,N,B);this.sshConnection=new A.default({host:L?void 0:n,port:L?void 0:o,sock:L,username:i,readyTimeout:1e3*C,strictVendor:!1,agentForward:k,agent:R,authHandler:(t,e,r)=>{P(t,e,r)}}),await this.sshConnection.connect();const x={};k&&(x.SSH_AUTH_SOCK=null);const U=await(0,b.installCodeServer)(this.sshConnection,l,f,Object.keys(x),S[s.hostname],I,this.logger);for(const t of Object.keys(x))void 0!==U[t]&&(x[t]=U[t]);this.context.environmentVariableCollection.persistent=!1;for(const[t,e]of Object.entries(x))e&&this.context.environmentVariableCollection.replace(t,e);if(a){const t=await(0,y.findRandomPort)();this.socksTunnel=await this.sshConnection.addTunnel({name:`ssh_tunnel_socks_${t}`,localPort:t,socks:!0})}const D=await this.openTunnel(0,U.listeningOn);this.tunnels.push(D),d.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),this.labelFormatterDisposable?.dispose(),this.labelFormatterDisposable=d.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:`${e.REMOTE_SSH_AUTHORITY}+*`,formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:`SSH: ${s.hostname}`+(s.port&&22!==s.port?`:${s.port}`:"")}});const H=new d.ResolvedAuthority("127.0.0.1",D.localPort,U.connectionToken);return H.extensionHostEnv=x,H}catch(t){if(this.logger.error("Error resolving authority",t),1===r.resolveAttempt){this.logger.show();const t="Close Remote",e="Retry",r=await d.window.showErrorMessage(`Could not establish connection to "${s.hostname}"`,{modal:!0},t,e);r===t?await d.commands.executeCommand("workbench.action.remote.close"):r===e&&await d.commands.executeCommand("workbench.action.reloadWindow")}throw t instanceof b.ServerInstallError||!(t instanceof Error)?d.RemoteAuthorityResolverError.NotAvailable(t instanceof Error?t.message:String(t)):d.RemoteAuthorityResolverError.TemporarilyNotAvailable(t.message)}}))}async openTunnel(t,e){t=t>0?t:await(0,y.findRandomPort)();const r=[],n="number"==typeof e?e:void 0,i="string"==typeof e?e:void 0;if(this.socksTunnel&&n){const e=await new Promise(((e,r)=>{this.logger.trace(`Creating forwarding server ${t}(local) => ${this.socksTunnel.localPort}(socks) => ${n}(remote)`);const i={proxy:{host:"127.0.0.1",port:this.socksTunnel.localPort,type:5},command:"connect",destination:{host:"127.0.0.1",port:n}},s=l.createServer().on("error",r).on("connection",(async t=>{try{const e=await f.SocksClient.createConnection(i);t.pipe(e.socket),e.socket.pipe(t)}catch(t){this.logger.error("Error while creating SOCKS connection",t)}})).on("listening",(()=>e(s))).listen(t)}));r.push({dispose:()=>e.close((()=>{this.logger.trace("SOCKS forwading server closed")}))})}else{this.logger.trace(`Opening tunnel ${t}(local) => ${e}(remote)`);const s=await this.sshConnection.addTunnel({name:`ssh_tunnel_${t}_${e}`,remoteAddr:"127.0.0.1",remotePort:n,remoteSocketPath:i,localPort:t});r.push({dispose:()=>{this.sshConnection?.closeTunnel(s.name),this.logger.trace(`Tunnel ${s.name} closed`)}})}return new I(t,e,r)}getSSHAuthHandler(t,e,r,n){let i=3,s=3;return r=r.slice(),async(o,a,c)=>{if(null===o)return this.logger.info("Trying no-auth authentication"),c({type:"none",username:t});if(o.includes("publickey")&&r.length&&n.includes("publickey")){const e=r.shift();if(this.logger.info(`Trying publickey authentication: ${e.filename} ${e.parsedKey.type} SHA256:${e.fingerprint}`),e.agentSupport)return c({type:"agent",username:t,agent:new class extends p.OpenSSHAgent{getIdentities(t){t(void 0,[e.parsedKey])}}(this.sshAgentSock)});if(e.isPrivate)return c({type:"publickey",username:t,key:e.parsedKey});if(!await(0,m.exists)(e.filename))return c(null);const n=await h.promises.readFile(e.filename);let i=p.utils.parseKey(n);if(i instanceof Error&&"Encrypted private OpenSSH key detected, but no passphrase given"===i.message){let t=3;for(;i instanceof Error&&t>0;){const r=await d.window.showInputBox({title:`Enter passphrase for ${e.filename}`,password:!0,ignoreFocusOut:!0});if(!r)break;i=p.utils.parseKey(n,r),t--}}if(!i||i instanceof Error)return c(null);const s=Array.isArray(i)?i[0]:i;return c({type:"publickey",username:t,key:s})}if(o.includes("password")&&i>0&&n.includes("password")){3===i&&this.logger.info("Trying password authentication");const r=await d.window.showInputBox({title:`Enter password for ${t}@${e}`,password:!0,ignoreFocusOut:!0});return i--,c(!!r&&{type:"password",username:t,password:r})}if(o.includes("keyboard-interactive")&&s>0&&n.includes("keyboard-interactive"))return 3===s&&this.logger.info("Trying keyboard-interactive authentication"),c({type:"keyboard-interactive",username:t,prompt:async(r,n,i,o,a)=>{const c=[];for(const r of o){const n=await d.window.showInputBox({title:`(${t}@${e}) ${r.prompt}`,password:!r.echo,ignoreFocusOut:!0});if(void 0===n){s=0;break}c.push(n)}s--,a(c)}});c(!1)}}dispose(){(0,S.disposeAll)(this.tunnels),this.proxyConnections.length?this.proxyConnections[0].close():this.sshConnection?.close(),this.proxyCommandProcess?.kill(),this.labelFormatterDisposable?.dispose()}}},4459:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.promptOpenRemoteSSHWindow=async function(t){const e=await c.window.showInputBox({title:"Enter [user@]hostname[:port]"});e&&p(new d.default(e).toEncodedString(),t)},e.openRemoteSSHWindow=p,e.openRemoteSSHLocationWindow=function(t,e,r){c.commands.executeCommand("vscode.openFolder",c.Uri.from({scheme:"vscode-remote",authority:(0,l.getRemoteAuthority)(t),path:e}),{forceNewWindow:!r})},e.addNewHost=async function(){const t=(0,u.getSSHConfigPath)();await(0,f.exists)(t)||await h.promises.appendFile(t,""),await c.commands.executeCommand("vscode.open",c.Uri.file(t),{preview:!1});const e=c.window.activeTextEditor;if(e?.document.uri.fsPath!==t)return;const r=e.document,n=r.lineAt(r.lineCount-1);n.isEmptyOrWhitespace||await e.edit((t=>{t.insert(n.range.end,"\n")})),await e.insertSnippet(new c.SnippetString("\nHost ${1:dev}\n\tHostName ${2:dev.example.com}\n\tUser ${3:john}"),new c.Position(r.lineCount,0))},e.openSSHConfigFile=async function(){const t=(0,u.getSSHConfigPath)();await(0,f.exists)(t)||await h.promises.appendFile(t,""),c.commands.executeCommand("vscode.open",c.Uri.file(t))};const c=o(r(1398)),h=o(r(9896)),l=r(9481),u=r(1968),f=r(5456),d=a(r(5624));function p(t,e){c.commands.executeCommand("vscode.newWindow",{remoteAuthority:(0,l.getRemoteAuthority)(t),reuseWindow:e})}},7721:(t,e)=>{"use strict";function r(t){for(;t.length;){const e=t.pop();e&&e.dispose()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,e.disposeAll=r,e.Disposable=class{constructor(){this._isDisposed=!1,this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,r(this._disposables))}_register(t){return this._isDisposed?t.dispose():this._disposables.push(t),t}get isDisposed(){return this._isDisposed}}},5456:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.exists=async function(t){try{return await a.promises.access(t),!0}catch{return!1}},e.untildify=function(t){return t.replace(/^~(?=$|\/|\\)/,c)},e.normalizeToSlash=function(t){return t.replace(/\\/g,"/")};const a=o(r(9896)),c=o(r(857)).homedir()},4947:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0});const a=o(r(1398));function c(t,e,r=" "){return r.repeat(Math.max(0,e-t.length))+t}e.default=class{constructor(t){this.output=a.window.createOutputChannel(t)}data2String(t){return t instanceof Error?t.stack||t.message:!1===t.success&&t.message?t.message:t.toString()}trace(t,e){this.logLevel("Trace",t,e)}info(t,e){this.logLevel("Info",t,e)}error(t,e){this.logLevel("Error",t,e)}logLevel(t,e,r){this.output.appendLine(`[${t}  - ${this.now()}] ${e}`),r&&this.output.appendLine(this.data2String(r))}now(){const t=new Date;return c(t.getUTCHours()+"",2,"0")+":"+c(t.getMinutes()+"",2,"0")+":"+c(t.getUTCSeconds()+"",2,"0")+"."+t.getMilliseconds()}show(){this.output.show()}dispose(){this.output.dispose()}}},92:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLinux=e.isMacintosh=e.isWindows=void 0,e.isWindows="win32"===process.platform,e.isMacintosh="darwin"===process.platform,e.isLinux="linux"===process.platform},943:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.findRandomPort=function(){return new Promise(((t,e)=>{const r=a.createServer({pauseOnConnect:!0});r.on("error",e),r.on("listening",(()=>{const e=r.address().port;r.close((()=>t(e)))})),r.listen(0,"127.0.0.1")}))},e.findFreePort=function(t,e,r,n=1){let i=!1;return new Promise((s=>{const o=setTimeout((()=>{if(!i)return i=!0,s(0)}),r);c(t,e,n,(t=>{if(!i)return i=!0,clearTimeout(o),s(t)}))}))},e.findFreePortFaster=function(t,e,r){let n,i=!1,s=1;const o=a.createServer({pauseOnConnect:!0});function c(t,e){i||(i=!0,o.removeAllListeners(),o.close(),n&&clearTimeout(n),e(t))}return new Promise((i=>{n=setTimeout((()=>{c(0,i)}),r),o.on("listening",(()=>{c(t,i)})),o.on("error",(r=>{r&&("EADDRINUSE"===r.code||"EACCES"===r.code)&&s<e?(t++,s++,o.listen(t,"127.0.0.1")):c(0,i)})),o.on("close",(()=>{c(0,i)})),o.listen(t,"127.0.0.1")}))};const a=o(r(9278));function c(t,e,r,n){if(0===e)return n(0);const i=new a.Socket;i.once("connect",(()=>(h(i),c(t+r,e-1,r,n)))),i.once("data",(()=>{})),i.once("error",(s=>(h(i),"ECONNREFUSED"!==s.code?c(t+r,e-1,r,n):n(t)))),i.connect(t,"127.0.0.1")}function h(t){try{t.removeAllListeners("connect"),t.removeAllListeners("error"),t.end(),t.destroy(),t.unref()}catch(t){console.error(t)}}},5256:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.activate=async function(t){const e=new h.default("Remote - SSH");t.subscriptions.push(e);const r=new l.RemoteSSHResolver(t,e);t.subscriptions.push(c.workspace.registerRemoteAuthorityResolver(l.REMOTE_SSH_AUTHORITY,r)),t.subscriptions.push(r);const n=new d.RemoteLocationHistory(t),i=(0,d.getRemoteWorkspaceLocationData)();i&&await n.addLocation(i[0],i[1]);const s=new f.HostTreeDataProvider(n);t.subscriptions.push(c.window.createTreeView("sshHosts",{treeDataProvider:s})),t.subscriptions.push(s),t.subscriptions.push(c.commands.registerCommand("openremotessh.openEmptyWindow",(()=>(0,u.promptOpenRemoteSSHWindow)(!1)))),t.subscriptions.push(c.commands.registerCommand("openremotessh.openEmptyWindowInCurrentWindow",(()=>(0,u.promptOpenRemoteSSHWindow)(!0)))),t.subscriptions.push(c.commands.registerCommand("openremotessh.openConfigFile",(()=>(0,u.openSSHConfigFile)()))),t.subscriptions.push(c.commands.registerCommand("openremotessh.showLog",(()=>e.show())))},e.deactivate=function(){};const c=o(r(1398)),h=a(r(4947)),l=r(9481),u=r(4459),f=r(1074),d=r(4786)},1074:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HostTreeDataProvider=void 0;const c=o(r(1398)),h=o(r(6928)),l=o(r(1968)),u=r(7721),f=r(4459),d=a(r(5624));class p{constructor(t,e){this.hostname=t,this.locations=e}}class g{constructor(t,e){this.path=t,this.hostname=e}}class A extends u.Disposable{constructor(t){super(),this.locationHistory=t,this._onDidChangeTreeData=this._register(new c.EventEmitter),this.onDidChangeTreeData=this._onDidChangeTreeData.event,this._register(c.commands.registerCommand("openremotessh.explorer.add",(()=>(0,f.addNewHost)()))),this._register(c.commands.registerCommand("openremotessh.explorer.configure",(()=>(0,f.openSSHConfigFile)()))),this._register(c.commands.registerCommand("openremotessh.explorer.refresh",(()=>this.refresh()))),this._register(c.commands.registerCommand("openremotessh.explorer.emptyWindowInNewWindow",(t=>this.openRemoteSSHWindow(t,!1)))),this._register(c.commands.registerCommand("openremotessh.explorer.emptyWindowInCurrentWindow",(t=>this.openRemoteSSHWindow(t,!0)))),this._register(c.commands.registerCommand("openremotessh.explorer.reopenFolderInNewWindow",(t=>this.openRemoteSSHLocationWindow(t,!1)))),this._register(c.commands.registerCommand("openremotessh.explorer.reopenFolderInCurrentWindow",(t=>this.openRemoteSSHLocationWindow(t,!0)))),this._register(c.commands.registerCommand("openremotessh.explorer.deleteFolderHistoryItem",(t=>this.deleteHostLocation(t)))),this._register(c.workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration("remote.SSH.configFile")&&this.refresh()}))),this._register(c.workspace.onDidSaveTextDocument((t=>{t.uri.fsPath===(0,l.getSSHConfigPath)()&&this.refresh()})))}getTreeItem(t){if(t instanceof g){const e=h.posix.basename(t.path).replace(/\.code-workspace$/," (Workspace)"),r=new c.TreeItem(e);return r.description=h.posix.dirname(t.path),r.iconPath=new c.ThemeIcon("folder"),r.contextValue="openremotessh.explorer.folder",r}const e=new c.TreeItem(t.hostname);return e.collapsibleState=t.locations.length?c.TreeItemCollapsibleState.Collapsed:c.TreeItemCollapsibleState.None,e.iconPath=new c.ThemeIcon("vm"),e.contextValue="openremotessh.explorer.host",e}async getChildren(t){return t?t instanceof p?t.locations.map((e=>new g(e,t.hostname))):[]:(await l.default.loadFromFS()).getAllConfiguredHosts().map((t=>new p(t,this.locationHistory.getHistory(t))))}refresh(){this._onDidChangeTreeData.fire()}async deleteHostLocation(t){await this.locationHistory.removeLocation(t.hostname,t.path),this.refresh()}async openRemoteSSHWindow(t,e){const r=new d.default(t.hostname);(0,f.openRemoteSSHWindow)(r.toEncodedString(),e)}async openRemoteSSHLocationWindow(t,e){const r=new d.default(t.hostname);(0,f.openRemoteSSHLocationWindow)(r.toEncodedString(),t.path,e)}}e.HostTreeDataProvider=A},4786:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteLocationHistory=void 0,e.getRemoteWorkspaceLocationData=function(){let t=c.workspace.workspaceFile;if(t&&"vscode-remote"===t.scheme&&t.authority.startsWith(h.REMOTE_SSH_AUTHORITY)&&t.path.endsWith(".code-workspace")){const[,e]=t.authority.split("+");return[l.default.parseEncoded(e).hostname,t.path]}if(t=c.workspace.workspaceFolders?.[0].uri,t&&"vscode-remote"===t.scheme&&t.authority.startsWith(h.REMOTE_SSH_AUTHORITY)){const[,e]=t.authority.split("+");return[l.default.parseEncoded(e).hostname,t.path]}};const c=o(r(1398)),h=r(9481),l=a(r(5624));class u{constructor(t){this.context=t,this.remoteLocationHistory={},this.remoteLocationHistory=t.globalState.get(u.STORAGE_KEY)||{}}getHistory(t){return this.remoteLocationHistory[t]||[]}async addLocation(t,e){const r=this.remoteLocationHistory[t]||[];r.includes(e)||(r.unshift(e),this.remoteLocationHistory[t]=r,await this.context.globalState.update(u.STORAGE_KEY,this.remoteLocationHistory))}async removeLocation(t,e){let r=this.remoteLocationHistory[t]||[];r=r.filter((t=>t!==e)),this.remoteLocationHistory[t]=r,await this.context.globalState.update(u.STORAGE_KEY,this.remoteLocationHistory)}}e.RemoteLocationHistory=u,u.STORAGE_KEY="remoteLocationHistory_v0"},215:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.getVSCodeServerConfig=async function(){const t=await async function(){if(!l){const t=await c.promises.readFile(h.join(a.env.appRoot,"product.json"),"utf8");l=JSON.parse(t)}return l}(),e=a.workspace.getConfiguration("remote.SSH.experimental").get("serverBinaryName","");return{version:a.version.replace("-insider",""),commit:t.commit,quality:t.quality,release:t.release,serverApplicationName:e||t.serverApplicationName,serverDataFolderName:t.serverDataFolderName,serverDownloadUrlTemplate:t.serverDownloadUrlTemplate}};const a=o(r(1398)),c=o(r(9896)),h=o(r(6928));let l},5873:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.ServerInstallError=void 0,e.installCodeServer=async function(t,e,r,n,i,s,o){let u="powershell";if(!i||"windows"===i){const e=await t.exec("uname -s");e.stdout?e.stdout.includes("windows32")?i="windows":e.stdout.includes("MINGW64")&&(i="windows",u="bash"):e.stderr&&(e.stderr.includes("FullyQualifiedErrorId : CommandNotFoundException")&&(i="windows"),e.stderr.includes("is not recognized as an internal or external command")&&(i="windows",u="cmd")),i&&o.trace(`Detected platform: ${i}, ${u}`)}const f=a.randomBytes(12).toString("hex"),d=await(0,c.getVSCodeServerConfig)(),p={id:f,version:d.version,commit:d.commit,quality:d.quality,release:d.release,extensionIds:r,envVariables:n,useSocketPath:s,serverApplicationName:d.serverApplicationName,serverDataFolderName:d.serverDataFolderName,serverDownloadUrlTemplate:e??d.serverDownloadUrlTemplate??l};let g;if("windows"===i){const e=function({id:t,quality:e,version:r,commit:n,release:i,extensionIds:s,envVariables:o,useSocketPath:c,serverApplicationName:h,serverDataFolderName:l,serverDownloadUrlTemplate:u}){const f=s.map((t=>"--install-extension "+t)).join(" "),d=u.replace(/\$\{quality\}/g,e).replace(/\$\{version\}/g,r).replace(/\$\{commit\}/g,n).replace(/\$\{os\}/g,"win32").replace(/\$\{arch\}/g,"x64").replace(/\$\{release\}/g,i??"");return`\n# Server installation script\n\n$TMP_DIR="$env:TEMP\\$([System.IO.Path]::GetRandomFileName())"\n$ProgressPreference = "SilentlyContinue"\n\n$DISTRO_VERSION="${r}"\n$DISTRO_COMMIT="${n}"\n$DISTRO_QUALITY="${e}"\n$DISTRO_BLACKBOX_RELEASE="${i??""}"\n\n$SERVER_APP_NAME="${h}"\n$SERVER_INITIAL_EXTENSIONS="${f}"\n$SERVER_LISTEN_FLAG="${c?`--socket-path="$TMP_DIR/vscode-server-sock-${a.randomUUID()}"`:"--port=0"}"\n$SERVER_DATA_DIR="$(Resolve-Path ~)\\${l}"\n$SERVER_DIR="$SERVER_DATA_DIR\\bin\\$DISTRO_COMMIT"\n$SERVER_SCRIPT="$SERVER_DIR\\bin\\$SERVER_APP_NAME.cmd"\n$SERVER_LOGFILE="$SERVER_DATA_DIR\\.$DISTRO_COMMIT.log"\n$SERVER_PIDFILE="$SERVER_DATA_DIR\\.$DISTRO_COMMIT.pid"\n$SERVER_TOKENFILE="$SERVER_DATA_DIR\\.$DISTRO_COMMIT.token"\n$SERVER_ARCH=\n$SERVER_CONNECTION_TOKEN=\n$SERVER_DOWNLOAD_URL=\n\n$LISTENING_ON=\n$OS_RELEASE_ID=\n$ARCH=\n$PLATFORM="win32"\n\nfunction printInstallResults($code) {\n    "${t}: start"\n    "exitCode==$code=="\n    "listeningOn==$LISTENING_ON=="\n    "connectionToken==$SERVER_CONNECTION_TOKEN=="\n    "logFile==$SERVER_LOGFILE=="\n    "osReleaseId==$OS_RELEASE_ID=="\n    "arch==$ARCH=="\n    "platform==$PLATFORM=="\n    "tmpDir==$TMP_DIR=="\n    ${o.map((t=>`"${t}==$${t}=="`)).join("\n")}\n    "${t}: end"\n}\n\n# Check machine architecture\n$ARCH=$env:PROCESSOR_ARCHITECTURE\n# Use x64 version for ARM64, as it's not yet available.\nif(($ARCH -eq "AMD64") -or ($ARCH -eq "IA64") -or ($ARCH -eq "ARM64")) {\n    $SERVER_ARCH="x64"\n}\nelse {\n    "Error architecture not supported: $ARCH"\n    printInstallResults 1\n    exit 0\n}\n\n# Create installation folder\nif(!(Test-Path $SERVER_DIR)) {\n    try {\n        ni -it d $SERVER_DIR -f -ea si\n    } catch {\n        "Error creating server install directory - $($_.ToString())"\n        exit 1\n    }\n\n    if(!(Test-Path $SERVER_DIR)) {\n        "Error creating server install directory"\n        exit 1\n    }\n}\n\ncd $SERVER_DIR\n\n# Check if server script is already installed\nif(!(Test-Path $SERVER_SCRIPT)) {\n    del vscode-server.tar.gz\n\n    $REQUEST_ARGUMENTS = @{\n        Uri="${d}"\n        TimeoutSec=20\n        OutFile="vscode-server.tar.gz"\n        UseBasicParsing=$True\n    }\n\n    [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n\n    Invoke-RestMethod @REQUEST_ARGUMENTS\n\n    if(Test-Path "vscode-server.tar.gz") {\n        tar -xf vscode-server.tar.gz --strip-components 1\n\n        del vscode-server.tar.gz\n    }\n\n    if(!(Test-Path $SERVER_SCRIPT)) {\n        "Error while installing the server binary"\n        exit 1\n    }\n}\nelse {\n    "Server script already installed in $SERVER_SCRIPT"\n}\n\n# Try to find if server is already running\nif(Get-Process node -ErrorAction SilentlyContinue | Where-Object Path -Like "$SERVER_DIR\\*") {\n    echo "Server script is already running $SERVER_SCRIPT"\n}\nelse {\n    if(Test-Path $SERVER_LOGFILE) {\n        del $SERVER_LOGFILE\n    }\n    if(Test-Path $SERVER_PIDFILE) {\n        del $SERVER_PIDFILE\n    }\n    if(Test-Path $SERVER_TOKENFILE) {\n        del $SERVER_TOKENFILE\n    }\n\n    $SERVER_CONNECTION_TOKEN="${a.randomUUID()}"\n    [System.IO.File]::WriteAllLines($SERVER_TOKENFILE, $SERVER_CONNECTION_TOKEN)\n\n    $SCRIPT_ARGUMENTS="--start-server --host=127.0.0.1 $SERVER_LISTEN_FLAG $SERVER_INITIAL_EXTENSIONS --connection-token-file $SERVER_TOKENFILE --telemetry-level off --enable-remote-auto-shutdown --accept-server-license-terms *> '$SERVER_LOGFILE'"\n\n    $START_ARGUMENTS = @{\n        FilePath = "powershell.exe"\n        WindowStyle = "hidden"\n        ArgumentList = @(\n            "-ExecutionPolicy", "Unrestricted", "-NoLogo", "-NoProfile", "-NonInteractive", "-c", "$SERVER_SCRIPT $SCRIPT_ARGUMENTS"\n        )\n        PassThru = $True\n    }\n\n    $SERVER_ID = (start @START_ARGUMENTS).ID\n\n    if($SERVER_ID) {\n        [System.IO.File]::WriteAllLines($SERVER_PIDFILE, $SERVER_ID)\n    }\n}\n\nif(Test-Path $SERVER_TOKENFILE) {\n    $SERVER_CONNECTION_TOKEN="$(cat $SERVER_TOKENFILE)"\n}\nelse {\n    "Error server token file not found $SERVER_TOKENFILE"\n    printInstallResults 1\n    exit 0\n}\n\nsleep -Milliseconds 500\n\n$SELECT_ARGUMENTS = @{\n    Path = $SERVER_LOGFILE\n    Pattern = "Extension host agent listening on (\\d+)"\n}\n\nfor($I = 1; $I -le 5; $I++) {\n    if(Test-Path $SERVER_LOGFILE) {\n        $GROUPS = (Select-String @SELECT_ARGUMENTS).Matches.Groups\n\n        if($GROUPS) {\n            $LISTENING_ON = $GROUPS[1].Value\n            break\n        }\n    }\n\n    sleep -Milliseconds 500\n}\n\nif(!(Test-Path $SERVER_LOGFILE)) {\n    "Error server log file not found $SERVER_LOGFILE"\n    printInstallResults 1\n    exit 0\n}\n\n# Finish server setup\nprintInstallResults 0\n\nif($SERVER_ID) {\n    while($True) {\n        if(!(gps -Id $SERVER_ID)) {\n            "server died, exit"\n            exit 0\n        }\n\n        sleep 30\n    }\n}\n`}(p);o.trace("Server install command:",e);const r=`$HOME\\${d.serverDataFolderName}\\install`,n=`${r}\\${d.commit}.ps1`,i=new RegExp(`${f}: end`);let s="";if("powershell"===u)s=`md -Force ${r}; echo @'\n${e}\n'@ | Set-Content ${n}; powershell -ExecutionPolicy ByPass -File "${n}"`;else if("bash"===u)s=`mkdir -p ${r.replace(/\\/g,"/")} && echo '\n${e.replace(/'/g,"'\"'\"'")}\n' > ${n.replace(/\\/g,"/")} && powershell -ExecutionPolicy ByPass -File "${n}"`;else{if("cmd"!==u)throw new h(`Not supported shell: ${u}`);if(s=`powershell "md -Force ${r}" && powershell "echo '${e.trim().replace(/^#.*$/gm,"").replace(/\n{2,}/gm,"\n").replace(/^\s*/gm,"").replace(/"/g,'"""').replace(/'/g,"''").replace(/>/g,"^>").replace(/\n/g,"'`n'")}'" > ${n.replace("$HOME","%USERPROFILE%")} && powershell -ExecutionPolicy ByPass -File "${n.replace("$HOME","%USERPROFILE%")}"`,o.trace("Command length (8191 max):",s.length),s.length>8191)throw new h("Command line too long")}g=await t.execPartial(s,(t=>i.test(t)))}else{const e=function({id:t,quality:e,version:r,commit:n,release:i,extensionIds:s,envVariables:o,useSocketPath:c,serverApplicationName:h,serverDataFolderName:l,serverDownloadUrlTemplate:u}){const f=s.map((t=>"--install-extension "+t)).join(" ");return`\n# Server installation script\n\nTMP_DIR="\${XDG_RUNTIME_DIR:-"/tmp"}"\n\nDISTRO_VERSION="${r}"\nDISTRO_COMMIT="${n}"\nDISTRO_QUALITY="${e}"\nDISTRO_BLACKBOX_RELEASE="${i??""}"\n\nSERVER_APP_NAME="${h}"\nSERVER_INITIAL_EXTENSIONS="${f}"\nSERVER_LISTEN_FLAG="${c?`--socket-path="$TMP_DIR/vscode-server-sock-${a.randomUUID()}"`:"--port=0"}"\nSERVER_DATA_DIR="$HOME/${l}"\nSERVER_DIR="$SERVER_DATA_DIR/bin/$DISTRO_COMMIT"\nSERVER_SCRIPT="$SERVER_DIR/bin/$SERVER_APP_NAME"\nSERVER_LOGFILE="$SERVER_DATA_DIR/.$DISTRO_COMMIT.log"\nSERVER_PIDFILE="$SERVER_DATA_DIR/.$DISTRO_COMMIT.pid"\nSERVER_TOKENFILE="$SERVER_DATA_DIR/.$DISTRO_COMMIT.token"\nSERVER_ARCH=\nSERVER_CONNECTION_TOKEN=\nSERVER_DOWNLOAD_URL=\n\nLISTENING_ON=\nOS_RELEASE_ID=\nARCH=\nPLATFORM=\n\n# Mimic output from logs of remote-ssh extension\nprint_install_results_and_exit() {\n    echo "${t}: start"\n    echo "exitCode==$1=="\n    echo "listeningOn==$LISTENING_ON=="\n    echo "connectionToken==$SERVER_CONNECTION_TOKEN=="\n    echo "logFile==$SERVER_LOGFILE=="\n    echo "osReleaseId==$OS_RELEASE_ID=="\n    echo "arch==$ARCH=="\n    echo "platform==$PLATFORM=="\n    echo "tmpDir==$TMP_DIR=="\n    ${o.map((t=>`echo "${t}==$${t}=="`)).join("\n")}\n    echo "${t}: end"\n    exit 0\n}\n\n# Check if platform is supported\nKERNEL="$(uname -s)"\ncase $KERNEL in\n    Darwin)\n        PLATFORM="darwin"\n        ;;\n    Linux)\n        PLATFORM="linux"\n        ;;\n    FreeBSD)\n        PLATFORM="freebsd"\n        ;;\n    DragonFly)\n        PLATFORM="dragonfly"\n        ;;\n    *)\n        echo "Error platform not supported: $KERNEL"\n        print_install_results_and_exit 1\n        ;;\nesac\n\n# Check machine architecture\nARCH="$(uname -m)"\ncase $ARCH in\n    x86_64 | amd64)\n        SERVER_ARCH="x64"\n        ;;\n    armv7l | armv8l)\n        SERVER_ARCH="armhf"\n        ;;\n    arm64 | aarch64)\n        SERVER_ARCH="arm64"\n        ;;\n    ppc64le)\n        SERVER_ARCH="ppc64le"\n        ;;\n    riscv64)\n        SERVER_ARCH="riscv64"\n        ;;\n    loongarch64)\n        SERVER_ARCH="loong64"\n        ;;\n    s390x)\n        SERVER_ARCH="s390x"\n        ;;\n    *)\n        echo "Error architecture not supported: $ARCH"\n        print_install_results_and_exit 1\n        ;;\nesac\n\n# https://www.freedesktop.org/software/systemd/man/os-release.html\nOS_RELEASE_ID="$(grep -i '^ID=' /etc/os-release 2>/dev/null | sed 's/^ID=//gi' | sed 's/"//g')"\nif [[ -z $OS_RELEASE_ID ]]; then\n    OS_RELEASE_ID="$(grep -i '^ID=' /usr/lib/os-release 2>/dev/null | sed 's/^ID=//gi' | sed 's/"//g')"\n    if [[ -z $OS_RELEASE_ID ]]; then\n        OS_RELEASE_ID="unknown"\n    fi\nfi\n\n# Create installation folder\nif [[ ! -d $SERVER_DIR ]]; then\n    mkdir -p $SERVER_DIR\n    if (( $? > 0 )); then\n        echo "Error creating server install directory"\n        print_install_results_and_exit 1\n    fi\nfi\n\n# adjust platform for void download, if needed\nif [[ $OS_RELEASE_ID = alpine ]]; then\n    PLATFORM=$OS_RELEASE_ID\nfi\n\nSERVER_DOWNLOAD_URL="$(echo "${u.replace(/\$\{/g,"\\${")}" | sed "s/\\\${quality}/$DISTRO_QUALITY/g" | sed "s/\\\${version}/$DISTRO_VERSION/g" | sed "s/\\\${commit}/$DISTRO_COMMIT/g" | sed "s/\\\${os}/$PLATFORM/g" | sed "s/\\\${arch}/$SERVER_ARCH/g" | sed "s/\\\${release}/$DISTRO_BLACKBOX_RELEASE/g")"\n\n# Check if server script is already installed\nif [[ ! -f $SERVER_SCRIPT ]]; then\n    case "$PLATFORM" in\n        darwin | linux | alpine )\n            ;;\n        *)\n            echo "Error '$PLATFORM' needs manual installation of remote extension host"\n            print_install_results_and_exit 1\n            ;;\n    esac\n\n    pushd $SERVER_DIR > /dev/null\n\n    if [[ ! -z $(which wget) ]]; then\n        wget --tries=3 --timeout=10 --continue --no-verbose -O vscode-server.tar.gz $SERVER_DOWNLOAD_URL\n    elif [[ ! -z $(which curl) ]]; then\n        curl --retry 3 --connect-timeout 10 --location --show-error --silent --output vscode-server.tar.gz $SERVER_DOWNLOAD_URL\n    else\n        echo "Error no tool to download server binary"\n        print_install_results_and_exit 1\n    fi\n\n    if (( $? > 0 )); then\n        echo "Error downloading server from $SERVER_DOWNLOAD_URL"\n        print_install_results_and_exit 1\n    fi\n\n    tar -xf vscode-server.tar.gz --strip-components 1\n    if (( $? > 0 )); then\n        echo "Error while extracting server contents"\n        print_install_results_and_exit 1\n    fi\n\n    if [[ ! -f $SERVER_SCRIPT ]]; then\n        echo "Error server contents are corrupted"\n        print_install_results_and_exit 1\n    fi\n\n    rm -f vscode-server.tar.gz\n\n    popd > /dev/null\nelse\n    echo "Server script already installed in $SERVER_SCRIPT"\nfi\n\n# Try to find if server is already running\nif [[ -f $SERVER_PIDFILE ]]; then\n    SERVER_PID="$(cat $SERVER_PIDFILE)"\n    SERVER_RUNNING_PROCESS="$(ps -o pid,args -p $SERVER_PID | grep $SERVER_SCRIPT)"\nelse\n    SERVER_RUNNING_PROCESS="$(ps -o pid,args -A | grep $SERVER_SCRIPT | grep -v grep)"\nfi\n\nif [[ -z $SERVER_RUNNING_PROCESS ]]; then\n    if [[ -f $SERVER_LOGFILE ]]; then\n        rm $SERVER_LOGFILE\n    fi\n    if [[ -f $SERVER_TOKENFILE ]]; then\n        rm $SERVER_TOKENFILE\n    fi\n\n    touch $SERVER_TOKENFILE\n    chmod 600 $SERVER_TOKENFILE\n    SERVER_CONNECTION_TOKEN="${a.randomUUID()}"\n    echo $SERVER_CONNECTION_TOKEN > $SERVER_TOKENFILE\n\n    $SERVER_SCRIPT --start-server --host=127.0.0.1 $SERVER_LISTEN_FLAG $SERVER_INITIAL_EXTENSIONS --connection-token-file $SERVER_TOKENFILE --telemetry-level off --enable-remote-auto-shutdown --accept-server-license-terms &> $SERVER_LOGFILE &\n    echo $! > $SERVER_PIDFILE\nelse\n    echo "Server script is already running $SERVER_SCRIPT"\nfi\n\nif [[ -f $SERVER_TOKENFILE ]]; then\n    SERVER_CONNECTION_TOKEN="$(cat $SERVER_TOKENFILE)"\nelse\n    echo "Error server token file not found $SERVER_TOKENFILE"\n    print_install_results_and_exit 1\nfi\n\nif [[ -f $SERVER_LOGFILE ]]; then\n    for i in {1..5}; do\n        LISTENING_ON="$(cat $SERVER_LOGFILE | grep -E 'Extension host agent listening on .+' | sed 's/Extension host agent listening on //')"\n        if [[ -n $LISTENING_ON ]]; then\n            break\n        fi\n        sleep 0.5\n    done\n\n    if [[ -z $LISTENING_ON ]]; then\n        echo "Error server did not start successfully"\n        print_install_results_and_exit 1\n    fi\nelse\n    echo "Error server log file not found $SERVER_LOGFILE"\n    print_install_results_and_exit 1\nfi\n\n# Finish server setup\nprint_install_results_and_exit 0\n`}(p);o.trace("Server install command:",e),g=await t.exec(`bash -c '${e.replace(/'/g,"'\\''")}'`)}g.stderr&&o.trace("Server install command stderr:",g.stderr),o.trace("Server install command stdout:",g.stdout);const A=function(t,e){const r=`${e}: start`,n=`${e}: end`,i=t.indexOf(r);if(i<0)return;const s=t.indexOf(n,i+r.length);if(s<0)return;const o={},a=t.substring(i+r.length,s).split(/\r?\n/);for(const t of a){const[e,r]=t.split("==");o[e]=r}return o}(g.stdout,f);if(!A)throw new h("Failed parsing install script output");const _=parseInt(A.exitCode,10);if(0!==_)throw new h("Couldn't install vscode server on remote server, install script returned non-zero exit status");const E=A.listeningOn.match(/^\d+$/)?parseInt(A.listeningOn,10):A.listeningOn,m=Object.fromEntries(Object.entries(A).filter((([t])=>n.includes(t))));return{exitCode:_,listeningOn:E,connectionToken:A.connectionToken,logFile:A.logFile,osReleaseId:A.osReleaseId,arch:A.arch,platform:A.platform,tmpDir:A.tmpDir,...m}};const a=o(r(6982)),c=r(215);class h extends Error{constructor(t){super(t)}}e.ServerInstallError=h;const l="https://github.com/blackboxeditor/blackbox-updates-server/releases/download/test/blackbox-server-${os}-${arch}.tar.gz"},337:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.gatherIdentityFiles=async function(t,e,r,n){t=t.map(f.untildify).map((t=>t.replace(/\.pub$/,""))),0===t.length&&t.push(...m);const i=(await Promise.allSettled(t.map((async t=>(t=await(0,f.exists)(t+".pub")?t+".pub":t,a.promises.readFile(t)))))).map(((e,r)=>{if("rejected"===e.status)return;const i=u.utils.parseKey(e.value);if(i instanceof Error||!i)return void n.error(`Error while parsing SSH public key ${t[r]}:`,i);const s=Array.isArray(i)?i[0]:i,o=l.createHash("sha256").update(s.getPublicSSH()).digest("base64");return{filename:t[r],parsedKey:s,fingerprint:o}})).filter((t=>!!t));let s=[];try{if(!e)throw new Error("SSH_AUTH_SOCK environment variable not defined");s=await new Promise(((t,r)=>{new u.OpenSSHAgent(e).getIdentities(((e,n)=>{e?r(e):t(n||[])}))}))}catch(t){n.error("Couldn't get identities from OpenSSH agent",t)}const o=s.map((t=>{const e=l.createHash("sha256").update(t.getPublicSSH()).digest("base64");return{filename:t.comment,parsedKey:t,fingerprint:e,agentSupport:!0}})),c=[],h=[];for(const t of o){const e=i.findIndex((e=>t.parsedKey.type===e.parsedKey.type&&t.fingerprint===e.fingerprint));e>=0?(h.push({...i[e],agentSupport:!0}),i.splice(e,1)):r||c.push(t)}return h.push(...c),h.push(...i),n.trace("Identity keys:",h.length?h.map((t=>`${t.filename} ${t.parsedKey.type} SHA256:${t.fingerprint}`)).join("\n"):"None"),h};const a=o(r(9896)),c=o(r(857)),h=o(r(6928)),l=o(r(6982)),u=o(r(7649)),f=r(5456),d=c.homedir(),p=h.join(d,".ssh","/id_dsa"),g=h.join(d,".ssh","/id_ecdsa"),A=h.join(d,".ssh","/id_rsa"),_=h.join(d,".ssh","/id_ed25519"),E=h.join(d,".ssh","/id_xmss"),m=[A,g,h.join(d,".ssh","/id_ecdsa_sk"),_,h.join(d,".ssh","/id_ed25519_sk"),E,p]},1968:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSSHConfigPath=E;const c=o(r(857)),h=o(r(9896)),l=o(r(6928)),u=a(r(4009)),f=o(r(1398)),d=r(5456),p=r(92),g=r(592),A=p.isWindows?l.resolve(process.env.ALLUSERSPROFILE||"C:\\ProgramData","ssh\\ssh_config"):"/etc/ssh/ssh_config",_=l.resolve(c.homedir(),".ssh/config");function E(){const t=f.workspace.getConfiguration("remote.SSH").get("configFile");return t?(0,d.untildify)(t):_}function m(t){return t.type===u.default.DIRECTIVE}function y(t){return m(t)&&"Host"===t.param&&!!t.value&&!!t.config}function S(t){return m(t)&&"Include"===t.param&&!!t.value}const b={host:"Host",hostname:"HostName",user:"User",port:"Port",identityagent:"IdentityAgent",identitiesonly:"IdentitiesOnly",identityfile:"IdentityFile",forwardagent:"ForwardAgent",preferredauthentications:"PreferredAuthentications",proxyjump:"ProxyJump",proxycommand:"ProxyCommand",include:"Include"};function w(t){for(const r of t)m(r)&&((e=r).param=b[e.param.toLowerCase()]||e.param),y(r)&&w(r.config);var e;return t}async function v(t,e){let r="";await(0,d.exists)(t)&&(r=(await h.promises.readFile(t,"utf8")).trim());const n=w(u.default.parse(r)),i=[];for(let t=0;t<n.length;t++){const r=n[t];if(S(r)){const n=r.value.split(",").map((t=>t.trim())),s=[];for(const t of n){const r=await(0,g.glob)((0,d.normalizeToSlash)((0,d.untildify)(t)),{absolute:!0,cwd:(0,d.normalizeToSlash)(l.dirname(e?_:A))});for(const t of r)s.push(await v(t,e))}i.push([t,s])}}for(const[t,e]of i.reverse())n.splice(t,1,...e.flat());return n}class I{static async loadFromFS(){const t=await v(E(),!0);return t.push(...await v(A,!1)),new I(t)}constructor(t){this.sshConfig=t}getAllConfiguredHosts(){const t=new Set;for(const e of this.sshConfig)if(y(e)){const r=Array.isArray(e.value)?e.value[0]:e.value;/^!/.test(r)||/[?*]/.test(r)||t.add(r)}return[...t.keys()]}getHostConfiguration(t){return this.sshConfig.compute(t)}}e.default=I},6514:function(t,e,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||(n=function(t){return n=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},n(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=n(t),o=0;o<r.length;o++)"default"!==r[o]&&i(e,t,r[o]);return s(e,t),e});Object.defineProperty(e,"__esModule",{value:!0});const a=r(4434),c=o(r(9278)),h=o(r(9896)),l=r(7649),u=r(9758),f={reconnect:!1,port:22,reconnectTries:3,reconnectDelay:5e3},d="ssh",p="tunnel",g="beforeconnect",A="connect",_="beforedisconnect",E="disconnect";class m extends a.EventEmitter{constructor(t){super(),this.activeTunnels={},this.__$connectPromise=null,this.__retries=0,this.__err=null,this.sshConnection=null,this.config=Object.assign({},f,t),this.config.uniqueId=this.config.uniqueId||`${this.config.username}@${this.config.host}`}emit(t,e,r){return super.emit(t,e,this,r),super.emit(`${t}:${e}`,this,r)}shell(t={}){return this.connect().then((()=>new Promise(((e,r)=>{this.sshConnection.shell(t,((t,n)=>t?r(t):e(n)))}))))}exec(t,e,r={}){return t+=Array.isArray(e)?" "+e.join(" "):"",this.connect().then((()=>new Promise(((e,n)=>{this.sshConnection.exec(t,r,((t,r)=>{if(t)return n(t);let i="",s="";r.on("close",(function(){return e({stdout:i,stderr:s})})).on("data",(function(t){i+=t.toString()})).stderr.on("data",(function(t){s+=t.toString()}))}))}))))}execPartial(t,e,r,n={}){return t+=Array.isArray(r)?" "+r.join(" "):"",this.connect().then((()=>new Promise(((r,i)=>{this.sshConnection.exec(t,n,((t,n)=>{if(t)return i(t);let s="",o="",a=!1;n.on("close",(function(){if(!a)return r({stdout:s,stderr:o})})).on("data",(function(t){if(s+=t.toString(),e(s,o))return a=!0,r({stdout:s,stderr:o})})).stderr.on("data",(function(t){if(o+=t.toString(),e(s,o))return a=!0,r({stdout:s,stderr:o})}))}))}))))}forwardOut(t,e,r,n){return this.connect().then((()=>new Promise(((i,s)=>{this.sshConnection.forwardOut(t,e,r,n,((t,e)=>{if(t)return s(t);i(e)}))}))))}getSocksPort(t){return this.addTunnel({name:"__socksServer",socks:!0,localPort:t}).then((t=>t.localPort))}close(){return this.emit(d,_),this.closeTunnel().then((()=>{this.sshConnection&&(this.sshConnection.end(),this.emit(d,E))}))}connect(t){return this.config=Object.assign(this.config,t),++this.__retries,this.__$connectPromise||(this.__$connectPromise=new Promise(((t,e)=>{if(this.emit(d,g),!this.config||"function"==typeof this.config||!this.config.host&&!this.config.sock||!this.config.username)return e("Invalid SSH connection configuration host/username can't be empty"),void(this.__$connectPromise=null);this.config.identity&&(h.existsSync(this.config.identity)&&(this.config.privateKey=h.readFileSync(this.config.identity)),delete this.config.identity),this.sshConnection=new l.Client,this.sshConnection.on("ready",(r=>{if(r)return this.emit(d,E,{err:r}),this.__$connectPromise=null,e(r);this.emit(d,A),this.__retries=0,this.__err=null,t(this)})).on("error",(t=>{this.emit(d,E,{err:t}),this.__err=t})).on("close",(()=>{this.emit(d,E,{err:this.__err}),this.config.reconnect&&this.__retries<=this.config.reconnectTries&&this.__err&&"client-authentication"!==this.__err.level&&"ENOTFOUND"!==this.__err.code?setTimeout((()=>{this.__$connectPromise=null,t(this.connect())}),this.config.reconnectDelay):e(this.__err)})).connect(this.config)}))),this.__$connectPromise}getTunnel(t){return this.activeTunnels[t]}addTunnel(t){return t.name=t.name||`${t.remoteAddr}@${t.remotePort||t.remoteSocketPath}`,this.emit(p,g,{SSHTunnelConfig:t}),this.getTunnel(t.name)?(this.emit(p,A,{SSHTunnelConfig:t}),Promise.resolve(this.getTunnel(t.name))):new Promise(((e,r)=>{let n;n=t.socks?(0,u.createServer)({connectionFilter:(e,r,n)=>{this.connect().then((()=>{this.sshConnection.forwardOut(r.address,r.port,e.address,e.port,((e,r)=>e?(this.emit(p,E,{SSHTunnelConfig:t,err:e}),n(e)):n(null,r)))}))}}).on("proxyError",(e=>{this.emit(p,E,{SSHTunnelConfig:t,err:e})})):c.createServer().on("connection",(e=>{this.connect().then((()=>{t.remotePort?this.sshConnection.forwardOut("127.0.0.1",0,t.remoteAddr,t.remotePort,((r,n)=>{r?this.emit(p,E,{SSHTunnelConfig:t,err:r}):(n.pipe(e),e.pipe(n))})):this.sshConnection.openssh_forwardOutStreamLocal(t.remoteSocketPath,((r,n)=>{r?this.emit(p,E,{SSHTunnelConfig:t,err:r}):(n.pipe(e),e.pipe(n))}))}))})),t.localPort=t.localPort||0,n.on("listening",(()=>{t.localPort=n.address().port,this.activeTunnels[t.name]=Object.assign({},{server:n},t),this.emit(p,A,{SSHTunnelConfig:t}),e(this.activeTunnels[t.name])})).on("error",(e=>{this.emit(p,E,{SSHTunnelConfig:t,err:e}),n.close(),r(e),delete this.activeTunnels[t.name]})).listen(t.localPort)}))}closeTunnel(t){if(t&&this.activeTunnels[t])return new Promise((e=>{const r=this.activeTunnels[t];this.emit(p,_,{SSHTunnelConfig:r}),r.server.close((()=>{this.emit(p,E,{SSHTunnelConfig:this.activeTunnels[t]}),delete this.activeTunnels[t],e()}))}));if(!t){const t=Object.keys(this.activeTunnels).map((t=>this.closeTunnel(t)));return Promise.all(t).then((()=>{}))}return Promise.resolve()}}e.default=m},5624:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,r){this.hostname=t,this.user=e,this.port=r}static parse(t){let e;const n=t.lastIndexOf("@");let i;-1!==n&&(e=t.substring(0,n));const s=t.lastIndexOf(":");-1!==s&&(i=parseInt(t.substring(s+1),10));const o=-1!==n?n+1:0,a=-1!==s?s:t.length,c=t.substring(o,a);return new r(c,e,i)}toString(){let t=this.hostname;return this.user&&(t=`${this.user}@`+t),this.port&&(t+=`:${this.port}`),t}static parseEncoded(t){try{const e=JSON.parse(Buffer.from(t,"hex").toString());return new r(e.hostName,e.user,e.port)}catch{}return r.parse(t.replace(/\\x([0-9a-f]{2})/g,((t,e)=>String.fromCharCode(parseInt(e,16)))))}toEncodedString(){return this.toString().replace(/[A-Z]/g,(t=>`\\x${t.charCodeAt(0).toString(16).toLowerCase()}`))}}e.default=r},1398:t=>{"use strict";t.exports=require("vscode")},2613:t=>{"use strict";t.exports=require("assert")},181:t=>{"use strict";t.exports=require("buffer")},5317:t=>{"use strict";t.exports=require("child_process")},6982:t=>{"use strict";t.exports=require("crypto")},2250:t=>{"use strict";t.exports=require("dns")},3167:t=>{"use strict";t.exports=require("domain")},4434:t=>{"use strict";t.exports=require("events")},9896:t=>{"use strict";t.exports=require("fs")},8611:t=>{"use strict";t.exports=require("http")},5692:t=>{"use strict";t.exports=require("https")},9278:t=>{"use strict";t.exports=require("net")},857:t=>{"use strict";t.exports=require("os")},6928:t=>{"use strict";t.exports=require("path")},2203:t=>{"use strict";t.exports=require("stream")},4756:t=>{"use strict";t.exports=require("tls")},9023:t=>{"use strict";t.exports=require("util")},3106:t=>{"use strict";t.exports=require("zlib")},6226:(t,e,r)=>{t.exports=r(4525)},4007:(t,e,r)=>{t.exports=r(5471)},3363:(t,e,r)=>{t.exports=r(9528)},8979:(t,e,r)=>{t.exports=r(6686)},385:(t,e,r)=>{t.exports=r(26)},7189:(t,e,r)=>{t.exports=r(9270)},271:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},3563:(t,e,r)=>{var n=r(591),i=r(4704);function s(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),n(t,i(s.key),s)}}t.exports=function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),n(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},5946:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},6973:(t,e,r)=>{var n=r(8130),i=r(1234).default;t.exports=function(t,e){if("object"!=i(t)||!t)return t;var r=t[n];if(void 0!==r){var s=r.call(t,e||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4704:(t,e,r)=>{var n=r(1234).default,i=r(6973);t.exports=function(t){var e=i(t,"string");return"symbol"==n(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},1234:(t,e,r)=>{var n=r(3071),i=r(4473);function s(e){return t.exports=s="function"==typeof n&&"symbol"==typeof i?function(t){return typeof t}:function(t){return t&&"function"==typeof n&&t.constructor===n&&t!==n.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},6040:(t,e,r)=>{"use strict";var n=r(8251);t.exports=n},7264:(t,e,r)=>{"use strict";var n=r(4139);r(768),r(8549),r(7152),r(1372),t.exports=n},9692:(t,e,r)=>{"use strict";var n=r(7045);t.exports=n},5663:(t,e,r)=>{"use strict";var n=r(70);t.exports=n},2092:(t,e,r)=>{"use strict";r(5650);var n=r(1747);t.exports=n("Array","forEach")},3309:(t,e,r)=>{"use strict";r(6391);var n=r(1747);t.exports=n("Array","indexOf")},6693:(t,e,r)=>{"use strict";r(6339);var n=r(1747);t.exports=n("Array","reduce")},5265:(t,e,r)=>{"use strict";r(2099);var n=r(1747);t.exports=n("Array","slice")},4923:(t,e,r)=>{"use strict";r(5953);var n=r(1747);t.exports=n("Array","splice")},4507:(t,e,r)=>{"use strict";var n=r(8280),i=r(3309),s=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===s||n(s,t)&&e===s.indexOf?i:e}},8823:(t,e,r)=>{"use strict";var n=r(8280),i=r(6693),s=Array.prototype;t.exports=function(t){var e=t.reduce;return t===s||n(s,t)&&e===s.reduce?i:e}},303:(t,e,r)=>{"use strict";var n=r(8280),i=r(5265),s=Array.prototype;t.exports=function(t){var e=t.slice;return t===s||n(s,t)&&e===s.slice?i:e}},5029:(t,e,r)=>{"use strict";var n=r(8280),i=r(4923),s=Array.prototype;t.exports=function(t){var e=t.splice;return t===s||n(s,t)&&e===s.splice?i:e}},1926:(t,e,r)=>{"use strict";r(6750);var n=r(2046).Object,i=t.exports=function(t,e,r){return n.defineProperty(t,e,r)};n.defineProperty.sham&&(i.sham=!0)},3842:(t,e,r)=>{"use strict";r(8545),r(3643),r(4452),r(3997),r(5084),r(2596),r(5721),r(4954),r(4123),r(3377),r(2230),r(5344),r(1660),r(4610),r(3669),r(4810),r(3325),r(7024),r(8172),r(5205);var n=r(2046);t.exports=n.Symbol},1730:(t,e,r)=>{"use strict";r(9363),r(3643),r(7057),r(4954);var n=r(560);t.exports=n.f("iterator")},1661:(t,e,r)=>{"use strict";r(8537),r(3669);var n=r(560);t.exports=n.f("toPrimitive")},591:(t,e,r)=>{"use strict";t.exports=r(4997)},3071:(t,e,r)=>{"use strict";t.exports=r(2321)},4473:(t,e,r)=>{"use strict";t.exports=r(2231)},8130:(t,e,r)=>{"use strict";t.exports=r(9280)},4997:(t,e,r)=>{"use strict";var n=r(6040);t.exports=n},2321:(t,e,r)=>{"use strict";var n=r(7264);r(3939),r(1785),r(1697),r(4664),r(3422),r(36),r(8703),r(6878),r(9671),r(359),t.exports=n},2231:(t,e,r)=>{"use strict";var n=r(9692);t.exports=n},9280:(t,e,r)=>{"use strict";var n=r(5663);t.exports=n},2159:(t,e,r)=>{"use strict";var n=r(9869),i=r(4640),s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not a function")}},43:(t,e,r)=>{"use strict";var n=r(4018),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s("Can't set "+i(t)+" as a prototype")}},2156:t=>{"use strict";t.exports=function(){}},6624:(t,e,r)=>{"use strict";var n=r(6285),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not an object")}},2914:(t,e,r)=>{"use strict";var n=r(726).forEach,i=r(7623)("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4436:(t,e,r)=>{"use strict";var n=r(7374),i=r(4849),s=r(575),o=function(t){return function(e,r,o){var a=n(e),c=s(a);if(0===c)return!t&&-1;var h,l=i(o,c);if(t&&r!=r){for(;c>l;)if((h=a[l++])!=h)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},726:(t,e,r)=>{"use strict";var n=r(8311),i=r(1907),s=r(6946),o=r(9298),a=r(575),c=r(6968),h=i([].push),l=function(t){var e=1===t,r=2===t,i=3===t,l=4===t,u=6===t,f=7===t,d=5===t||u;return function(p,g,A,_){for(var E,m,y=o(p),S=s(y),b=a(S),w=n(g,A),v=0,I=_||c,C=e?I(p,b):r||f?I(p,0):void 0;b>v;v++)if((d||v in S)&&(m=w(E=S[v],v,y),t))if(e)C[v]=m;else if(m)switch(t){case 3:return!0;case 5:return E;case 6:return v;case 2:h(C,E)}else switch(t){case 4:return!1;case 7:h(C,E)}return u?-1:i||l?l:C}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},7171:(t,e,r)=>{"use strict";var n=r(8828),i=r(6264),s=r(798),o=i("species");t.exports=function(t){return s>=51||!n((function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},7623:(t,e,r)=>{"use strict";var n=r(8828);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},5043:(t,e,r)=>{"use strict";var n=r(2159),i=r(9298),s=r(6946),o=r(575),a=TypeError,c="Reduce of empty array with no initial value",h=function(t){return function(e,r,h,l){var u=i(e),f=s(u),d=o(u);if(n(r),0===d&&h<2)throw new a(c);var p=t?d-1:0,g=t?-1:1;if(h<2)for(;;){if(p in f){l=f[p],p+=g;break}if(p+=g,t?p<0:d<=p)throw new a(c)}for(;t?p>=0:d>p;p+=g)p in f&&(l=r(l,f[p],p,u));return l}};t.exports={left:h(!1),right:h(!0)}},3130:(t,e,r)=>{"use strict";var n=r(9447),i=r(1793),s=TypeError,o=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},3427:(t,e,r)=>{"use strict";var n=r(1907);t.exports=n([].slice)},4010:(t,e,r)=>{"use strict";var n=r(1793),i=r(5468),s=r(6285),o=r(6264)("species"),a=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(i(e)&&(e===a||n(e.prototype))||s(e)&&null===(e=e[o]))&&(e=void 0)),void 0===e?a:e}},6968:(t,e,r)=>{"use strict";var n=r(4010);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},5807:(t,e,r)=>{"use strict";var n=r(1907),i=n({}.toString),s=n("".slice);t.exports=function(t){return s(i(t),8,-1)}},3948:(t,e,r)=>{"use strict";var n=r(2623),i=r(9869),s=r(5807),o=r(6264)("toStringTag"),a=Object,c="Arguments"===s(function(){return arguments}());t.exports=n?s:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=a(t),o))?r:c?s(e):"Object"===(n=s(e))&&i(e.callee)?"Arguments":n}},7382:(t,e,r)=>{"use strict";var n=r(8828);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9550:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},1626:(t,e,r)=>{"use strict";var n=r(9447),i=r(4284),s=r(5817);t.exports=n?function(t,e,r){return i.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t}},5817:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5543:(t,e,r)=>{"use strict";var n=r(9447),i=r(4284),s=r(5817);t.exports=function(t,e,r){n?i.f(t,e,s(0,r)):t[e]=r}},9251:(t,e,r)=>{"use strict";var n=r(4284);t.exports=function(t,e,r){return n.f(t,e,r)}},8055:(t,e,r)=>{"use strict";var n=r(1626);t.exports=function(t,e,r,i){return i&&i.enumerable?t[e]=r:n(t,e,r),t}},2532:(t,e,r)=>{"use strict";var n=r(5951),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},4535:(t,e,r)=>{"use strict";var n=r(4640),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw new i("Cannot delete property "+n(e)+" of "+n(t))}},9447:(t,e,r)=>{"use strict";var n=r(8828);t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9552:(t,e,r)=>{"use strict";var n=r(5951),i=r(6285),s=n.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},8024:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},9287:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},376:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1829:(t,e,r)=>{"use strict";var n=r(6794);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},7586:(t,e,r)=>{"use strict";var n=r(2832);t.exports="NODE"===n},6794:(t,e,r)=>{"use strict";var n=r(5951).navigator,i=n&&n.userAgent;t.exports=i?String(i):""},798:(t,e,r)=>{"use strict";var n,i,s=r(5951),o=r(6794),a=s.process,c=s.Deno,h=a&&a.versions||c&&c.version,l=h&&h.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(i=+n[1]),t.exports=i},2832:(t,e,r)=>{"use strict";var n=r(5951),i=r(6794),s=r(5807),o=function(t){return i.slice(0,t.length)===t};t.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},1091:(t,e,r)=>{"use strict";var n=r(5951),i=r(6024),s=r(2361),o=r(9869),a=r(3846).f,c=r(7463),h=r(2046),l=r(8311),u=r(1626),f=r(9724);r(6128);var d=function(t){var e=function(r,n,s){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,n)}return new t(r,n,s)}return i(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,i,p,g,A,_,E,m,y,S=t.target,b=t.global,w=t.stat,v=t.proto,I=b?n:w?n[S]:n[S]&&n[S].prototype,C=b?h:h[S]||u(h,S,{})[S],k=C.prototype;for(g in e)i=!(r=c(b?g:S+(w?".":"#")+g,t.forced))&&I&&f(I,g),_=C[g],i&&(E=t.dontCallGetSet?(y=a(I,g))&&y.value:I[g]),A=i&&E?E:e[g],(r||v||typeof _!=typeof A)&&(m=t.bind&&i?l(A,n):t.wrap&&i?d(A):v&&o(A)?s(A):A,(t.sham||A&&A.sham||_&&_.sham)&&u(m,"sham",!0),u(C,g,m),v&&(f(h,p=S+"Prototype")||u(h,p,{}),u(h[p],g,A),t.real&&k&&(r||!k[g])&&u(k,g,A)))}},8828:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},6024:(t,e,r)=>{"use strict";var n=r(1505),i=Function.prototype,s=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(s):function(){return o.apply(s,arguments)})},8311:(t,e,r)=>{"use strict";var n=r(2361),i=r(2159),s=r(1505),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},1505:(t,e,r)=>{"use strict";var n=r(8828);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},3930:(t,e,r)=>{"use strict";var n=r(1505),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6833:(t,e,r)=>{"use strict";var n=r(9447),i=r(9724),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,h=a&&(!n||n&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:h}},1871:(t,e,r)=>{"use strict";var n=r(1907),i=r(2159);t.exports=function(t,e,r){try{return n(i(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},2361:(t,e,r)=>{"use strict";var n=r(5807),i=r(1907);t.exports=function(t){if("Function"===n(t))return i(t)}},1907:(t,e,r)=>{"use strict";var n=r(1505),i=Function.prototype,s=i.call,o=n&&i.bind.bind(s,s);t.exports=n?o:function(t){return function(){return s.apply(t,arguments)}}},1747:(t,e,r)=>{"use strict";var n=r(5951),i=r(2046);t.exports=function(t,e){var r=i[t+"Prototype"],s=r&&r[e];if(s)return s;var o=n[t],a=o&&o.prototype;return a&&a[e]}},5582:(t,e,r)=>{"use strict";var n=r(2046),i=r(5951),s=r(9869),o=function(t){return s(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t])||o(i[t]):n[t]&&n[t][e]||i[t]&&i[t][e]}},6656:(t,e,r)=>{"use strict";var n=r(1907),i=r(1793),s=r(9869),o=r(5807),a=r(160),c=n([].push);t.exports=function(t){if(s(t))return t;if(i(t)){for(var e=t.length,r=[],n=0;n<e;n++){var h=t[n];"string"==typeof h?c(r,h):"number"!=typeof h&&"Number"!==o(h)&&"String"!==o(h)||c(r,a(h))}var l=r.length,u=!0;return function(t,e){if(u)return u=!1,e;if(i(this))return e;for(var n=0;n<l;n++)if(r[n]===t)return e}}}},9367:(t,e,r)=>{"use strict";var n=r(2159),i=r(7136);t.exports=function(t,e){var r=t[e];return i(r)?void 0:n(r)}},5951:function(t){"use strict";var e=function(t){return t&&t.Math===Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||e("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:(t,e,r)=>{"use strict";var n=r(1907),i=r(9298),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},8530:t=>{"use strict";t.exports={}},2416:(t,e,r)=>{"use strict";var n=r(5582);t.exports=n("document","documentElement")},3648:(t,e,r)=>{"use strict";var n=r(9447),i=r(8828),s=r(9552);t.exports=!n&&!i((function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},6946:(t,e,r)=>{"use strict";var n=r(1907),i=r(8828),s=r(5807),o=Object,a=n("".split);t.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===s(t)?a(t,""):o(t)}:o},2647:(t,e,r)=>{"use strict";var n=r(1907),i=r(9869),s=r(6128),o=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},4932:(t,e,r)=>{"use strict";var n,i,s,o=r(551),a=r(5951),c=r(6285),h=r(1626),l=r(9724),u=r(6128),f=r(2522),d=r(8530),p="Object already initialized",g=a.TypeError,A=a.WeakMap;if(o||u.state){var _=u.state||(u.state=new A);_.get=_.get,_.has=_.has,_.set=_.set,n=function(t,e){if(_.has(t))throw new g(p);return e.facade=t,_.set(t,e),e},i=function(t){return _.get(t)||{}},s=function(t){return _.has(t)}}else{var E=f("state");d[E]=!0,n=function(t,e){if(l(t,E))throw new g(p);return e.facade=t,h(t,E,e),e},i=function(t){return l(t,E)?t[E]:{}},s=function(t){return l(t,E)}}t.exports={set:n,get:i,has:s,enforce:function(t){return s(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=i(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return r}}}},1793:(t,e,r)=>{"use strict";var n=r(5807);t.exports=Array.isArray||function(t){return"Array"===n(t)}},9869:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},5468:(t,e,r)=>{"use strict";var n=r(1907),i=r(8828),s=r(9869),o=r(3948),a=r(5582),c=r(2647),h=function(){},l=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,f=n(u.exec),d=!u.test(h),p=function(t){if(!s(t))return!1;try{return l(h,[],t),!0}catch(t){return!1}},g=function(t){if(!s(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!f(u,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!l||i((function(){var t;return p(p.call)||!p(Object)||!p((function(){t=!0}))||t}))?g:p},7463:(t,e,r)=>{"use strict";var n=r(8828),i=r(9869),s=/#|\.prototype\./,o=function(t,e){var r=c[a(t)];return r===l||r!==h&&(i(e)?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},h=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},7136:t=>{"use strict";t.exports=function(t){return null==t}},6285:(t,e,r)=>{"use strict";var n=r(9869);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},4018:(t,e,r)=>{"use strict";var n=r(6285);t.exports=function(t){return n(t)||null===t}},7376:t=>{"use strict";t.exports=!0},5594:(t,e,r)=>{"use strict";var n=r(5582),i=r(9869),s=r(8280),o=r(1175),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&s(e.prototype,a(t))}},7181:(t,e,r)=>{"use strict";var n=r(5116).IteratorPrototype,i=r(8075),s=r(5817),o=r(4840),a=r(3742),c=function(){return this};t.exports=function(t,e,r,h){var l=e+" Iterator";return t.prototype=i(n,{next:s(+!h,r)}),o(t,l,!1,!0),a[l]=c,t}},183:(t,e,r)=>{"use strict";var n=r(1091),i=r(3930),s=r(7376),o=r(6833),a=r(9869),c=r(7181),h=r(5972),l=r(9192),u=r(4840),f=r(1626),d=r(8055),p=r(6264),g=r(3742),A=r(5116),_=o.PROPER,E=o.CONFIGURABLE,m=A.IteratorPrototype,y=A.BUGGY_SAFARI_ITERATORS,S=p("iterator"),b="keys",w="values",v="entries",I=function(){return this};t.exports=function(t,e,r,o,p,A,C){c(r,e,o);var k,R,B,O=function(t){if(t===p&&x)return x;if(!y&&t&&t in L)return L[t];switch(t){case b:case w:case v:return function(){return new r(this,t)}}return function(){return new r(this)}},T=e+" Iterator",N=!1,L=t.prototype,P=L[S]||L["@@iterator"]||p&&L[p],x=!y&&P||O(p),U="Array"===e&&L.entries||P;if(U&&(k=h(U.call(new t)))!==Object.prototype&&k.next&&(s||h(k)===m||(l?l(k,m):a(k[S])||d(k,S,I)),u(k,T,!0,!0),s&&(g[T]=I)),_&&p===w&&P&&P.name!==w&&(!s&&E?f(L,"name",w):(N=!0,x=function(){return i(P,this)})),p)if(R={values:O(w),keys:A?x:O(b),entries:O(v)},C)for(B in R)(y||N||!(B in L))&&d(L,B,R[B]);else n({target:e,proto:!0,forced:y||N},R);return s&&!C||L[S]===x||d(L,S,x,{name:p}),g[e]=x,R}},5116:(t,e,r)=>{"use strict";var n,i,s,o=r(8828),a=r(9869),c=r(6285),h=r(8075),l=r(5972),u=r(8055),f=r(6264),d=r(7376),p=f("iterator"),g=!1;[].keys&&("next"in(s=[].keys())?(i=l(l(s)))!==Object.prototype&&(n=i):g=!0),!c(n)||o((function(){var t={};return n[p].call(t)!==t}))?n={}:d&&(n=h(n)),a(n[p])||u(n,p,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},3742:t=>{"use strict";t.exports={}},575:(t,e,r)=>{"use strict";var n=r(3121);t.exports=function(t){return n(t.length)}},1176:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},8075:(t,e,r)=>{"use strict";var n,i=r(6624),s=r(2220),o=r(376),a=r(8530),c=r(2416),h=r(9552),l=r(2522),u="prototype",f="script",d=l("IE_PROTO"),p=function(){},g=function(t){return"<"+f+">"+t+"</"+f+">"},A=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;_="undefined"!=typeof document?document.domain&&n?A(n):(e=h("iframe"),r="java"+f+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):A(n);for(var i=o.length;i--;)delete _[u][o[i]];return _()};a[d]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(p[u]=i(t),r=new p,p[u]=null,r[d]=t):r=_(),void 0===e?r:s.f(r,e)}},2220:(t,e,r)=>{"use strict";var n=r(9447),i=r(8661),s=r(4284),o=r(6624),a=r(7374),c=r(2875);e.f=n&&!i?Object.defineProperties:function(t,e){o(t);for(var r,n=a(e),i=c(e),h=i.length,l=0;h>l;)s.f(t,r=i[l++],n[r]);return t}},4284:(t,e,r)=>{"use strict";var n=r(9447),i=r(3648),s=r(8661),o=r(6624),a=r(470),c=TypeError,h=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u="enumerable",f="configurable",d="writable";e.f=n?s?function(t,e,r){if(o(t),e=a(e),o(r),"function"==typeof t&&"prototype"===e&&"value"in r&&d in r&&!r[d]){var n=l(t,e);n&&n[d]&&(t[e]=r.value,r={configurable:f in r?r[f]:n[f],enumerable:u in r?r[u]:n[u],writable:!1})}return h(t,e,r)}:h:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return h(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},3846:(t,e,r)=>{"use strict";var n=r(9447),i=r(3930),s=r(2574),o=r(5817),a=r(7374),c=r(470),h=r(9724),l=r(3648),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=a(t),e=c(e),l)try{return u(t,e)}catch(t){}if(h(t,e))return o(!i(s.f,t,e),t[e])}},5407:(t,e,r)=>{"use strict";var n=r(5807),i=r(7374),s=r(4443).f,o=r(3427),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"===n(t)?function(t){try{return s(t)}catch(t){return o(a)}}(t):s(i(t))}},4443:(t,e,r)=>{"use strict";var n=r(3045),i=r(376).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},7170:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},5972:(t,e,r)=>{"use strict";var n=r(9724),i=r(9869),s=r(9298),o=r(2522),a=r(7382),c=o("IE_PROTO"),h=Object,l=h.prototype;t.exports=a?h.getPrototypeOf:function(t){var e=s(t);if(n(e,c))return e[c];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof h?l:null}},8280:(t,e,r)=>{"use strict";var n=r(1907);t.exports=n({}.isPrototypeOf)},3045:(t,e,r)=>{"use strict";var n=r(1907),i=r(9724),s=r(7374),o=r(4436).indexOf,a=r(8530),c=n([].push);t.exports=function(t,e){var r,n=s(t),h=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;e.length>h;)i(n,r=e[h++])&&(~o(l,r)||c(l,r));return l}},2875:(t,e,r)=>{"use strict";var n=r(3045),i=r(376);t.exports=Object.keys||function(t){return n(t,i)}},2574:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},9192:(t,e,r)=>{"use strict";var n=r(1871),i=r(6285),s=r(4239),o=r(43);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return s(r),o(n),i(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},4878:(t,e,r)=>{"use strict";var n=r(2623),i=r(3948);t.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},581:(t,e,r)=>{"use strict";var n=r(3930),i=r(9869),s=r(6285),o=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&i(r=t.toString)&&!s(a=n(r,t)))return a;if(i(r=t.valueOf)&&!s(a=n(r,t)))return a;if("string"!==e&&i(r=t.toString)&&!s(a=n(r,t)))return a;throw new o("Can't convert object to primitive value")}},2046:t=>{"use strict";t.exports={}},4239:(t,e,r)=>{"use strict";var n=r(7136),i=TypeError;t.exports=function(t){if(n(t))throw new i("Can't call method on "+t);return t}},485:(t,e,r)=>{"use strict";var n,i=r(5951),s=r(6024),o=r(9869),a=r(2832),c=r(6794),h=r(3427),l=r(4787),u=i.Function,f=/MSIE .\./.test(c)||"BUN"===a&&((n=i.Bun.version.split(".")).length<3||"0"===n[0]&&(n[1]<3||"3"===n[1]&&"0"===n[2]));t.exports=function(t,e){var r=e?2:1;return f?function(n,i){var a=l(arguments.length,1)>r,c=o(n)?n:u(n),f=a?h(arguments,r):[],d=a?function(){s(c,this,f)}:c;return e?t(d,i):t(d)}:t}},4840:(t,e,r)=>{"use strict";var n=r(2623),i=r(4284).f,s=r(1626),o=r(9724),a=r(4878),c=r(6264)("toStringTag");t.exports=function(t,e,r,h){var l=r?t:t&&t.prototype;l&&(o(l,c)||i(l,c,{configurable:!0,value:e}),h&&!n&&s(l,"toString",a))}},2522:(t,e,r)=>{"use strict";var n=r(5816),i=r(6499),s=n("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},6128:(t,e,r)=>{"use strict";var n=r(7376),i=r(5951),s=r(2532),o="__core-js_shared__",a=t.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.40.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:(t,e,r)=>{"use strict";var n=r(6128);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},1470:(t,e,r)=>{"use strict";var n=r(1907),i=r(5482),s=r(160),o=r(4239),a=n("".charAt),c=n("".charCodeAt),h=n("".slice),l=function(t){return function(e,r){var n,l,u=s(o(e)),f=i(r),d=u.length;return f<0||f>=d?t?"":void 0:(n=c(u,f))<55296||n>56319||f+1===d||(l=c(u,f+1))<56320||l>57343?t?a(u,f):n:t?h(u,f,f+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},9846:(t,e,r)=>{"use strict";var n=r(798),i=r(8828),s=r(5951).String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},3467:(t,e,r)=>{"use strict";var n=r(3930),i=r(5582),s=r(6264),o=r(8055);t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,a=s("toPrimitive");e&&!e[a]&&o(e,a,(function(t){return n(r,this)}),{arity:1})}},2595:(t,e,r)=>{"use strict";var n=r(5582),i=r(1907),s=n("Symbol"),o=s.keyFor,a=i(s.prototype.valueOf);t.exports=s.isRegisteredSymbol||function(t){try{return void 0!==o(a(t))}catch(t){return!1}}},9197:(t,e,r)=>{"use strict";for(var n=r(5816),i=r(5582),s=r(1907),o=r(5594),a=r(6264),c=i("Symbol"),h=c.isWellKnownSymbol,l=i("Object","getOwnPropertyNames"),u=s(c.prototype.valueOf),f=n("wks"),d=0,p=l(c),g=p.length;d<g;d++)try{var A=p[d];o(c[A])&&a(A)}catch(t){}t.exports=function(t){if(h&&h(t))return!0;try{for(var e=u(t),r=0,n=l(f),i=n.length;r<i;r++)if(f[n[r]]==e)return!0}catch(t){}return!1}},4411:(t,e,r)=>{"use strict";var n=r(9846);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},9472:(t,e,r)=>{"use strict";var n,i,s,o,a=r(5951),c=r(6024),h=r(8311),l=r(9869),u=r(9724),f=r(8828),d=r(2416),p=r(3427),g=r(9552),A=r(4787),_=r(1829),E=r(7586),m=a.setImmediate,y=a.clearImmediate,S=a.process,b=a.Dispatch,w=a.Function,v=a.MessageChannel,I=a.String,C=0,k={},R="onreadystatechange";f((function(){n=a.location}));var B=function(t){if(u(k,t)){var e=k[t];delete k[t],e()}},O=function(t){return function(){B(t)}},T=function(t){B(t.data)},N=function(t){a.postMessage(I(t),n.protocol+"//"+n.host)};m&&y||(m=function(t){A(arguments.length,1);var e=l(t)?t:w(t),r=p(arguments,1);return k[++C]=function(){c(e,void 0,r)},i(C),C},y=function(t){delete k[t]},E?i=function(t){S.nextTick(O(t))}:b&&b.now?i=function(t){b.now(O(t))}:v&&!_?(o=(s=new v).port2,s.port1.onmessage=T,i=h(o.postMessage,o)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!f(N)?(i=N,a.addEventListener("message",T,!1)):i=R in g("script")?function(t){d.appendChild(g("script"))[R]=function(){d.removeChild(this),B(t)}}:function(t){setTimeout(O(t),0)}),t.exports={set:m,clear:y}},4849:(t,e,r)=>{"use strict";var n=r(5482),i=Math.max,s=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):s(r,e)}},7374:(t,e,r)=>{"use strict";var n=r(6946),i=r(4239);t.exports=function(t){return n(i(t))}},5482:(t,e,r)=>{"use strict";var n=r(1176);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},3121:(t,e,r)=>{"use strict";var n=r(5482),i=Math.min;t.exports=function(t){var e=n(t);return e>0?i(e,9007199254740991):0}},9298:(t,e,r)=>{"use strict";var n=r(4239),i=Object;t.exports=function(t){return i(n(t))}},6028:(t,e,r)=>{"use strict";var n=r(3930),i=r(6285),s=r(5594),o=r(9367),a=r(581),c=r(6264),h=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var r,c=o(t,l);if(c){if(void 0===e&&(e="default"),r=n(c,t,e),!i(r)||s(r))return r;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},470:(t,e,r)=>{"use strict";var n=r(6028),i=r(5594);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},2623:(t,e,r)=>{"use strict";var n={};n[r(6264)("toStringTag")]="z",t.exports="[object z]"===String(n)},160:(t,e,r)=>{"use strict";var n=r(3948),i=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},4640:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:(t,e,r)=>{"use strict";var n=r(1907),i=0,s=Math.random(),o=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},1175:(t,e,r)=>{"use strict";var n=r(9846);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:(t,e,r)=>{"use strict";var n=r(9447),i=r(8828);t.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4787:t=>{"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},551:(t,e,r)=>{"use strict";var n=r(5951),i=r(9869),s=n.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},366:(t,e,r)=>{"use strict";var n=r(2046),i=r(9724),s=r(560),o=r(4284).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});i(e,t)||o(e,t,{value:s.f(t)})}},560:(t,e,r)=>{"use strict";var n=r(6264);e.f=n},6264:(t,e,r)=>{"use strict";var n=r(5951),i=r(5816),s=r(9724),o=r(6499),a=r(9846),c=r(1175),h=n.Symbol,l=i("wks"),u=c?h.for||h:h&&h.withoutSetter||o;t.exports=function(t){return s(l,t)||(l[t]=a&&s(h,t)?h[t]:u("Symbol."+t)),l[t]}},8545:(t,e,r)=>{"use strict";var n=r(1091),i=r(8828),s=r(1793),o=r(6285),a=r(9298),c=r(575),h=r(8024),l=r(5543),u=r(6968),f=r(7171),d=r(6264),p=r(798),g=d("isConcatSpreadable"),A=p>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),_=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:s(t)};n({target:"Array",proto:!0,arity:1,forced:!A||!f("concat")},{concat:function(t){var e,r,n,i,s,o=a(this),f=u(o,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(_(s=-1===e?o:arguments[e]))for(i=c(s),h(d+i),r=0;r<i;r++,d++)r in s&&l(f,d,s[r]);else h(d+1),l(f,d++,s);return f.length=d,f}})},5650:(t,e,r)=>{"use strict";var n=r(1091),i=r(2914);n({target:"Array",proto:!0,forced:[].forEach!==i},{forEach:i})},6391:(t,e,r)=>{"use strict";var n=r(1091),i=r(2361),s=r(4436).indexOf,o=r(7623),a=i([].indexOf),c=!!a&&1/a([1],1,-0)<0;n({target:"Array",proto:!0,forced:c||!o("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return c?a(this,t,e)||0:s(this,t,e)}})},9363:(t,e,r)=>{"use strict";var n=r(7374),i=r(2156),s=r(3742),o=r(4932),a=r(4284).f,c=r(183),h=r(9550),l=r(7376),u=r(9447),f="Array Iterator",d=o.set,p=o.getterFor(f);t.exports=c(Array,"Array",(function(t,e){d(this,{type:f,target:n(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,h(void 0,!0);switch(t.kind){case"keys":return h(r,!1);case"values":return h(e[r],!1)}return h([r,e[r]],!1)}),"values");var g=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!l&&u&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},6339:(t,e,r)=>{"use strict";var n=r(1091),i=r(5043).left,s=r(7623),o=r(798);n({target:"Array",proto:!0,forced:!r(7586)&&o>79&&o<83||!s("reduce")},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},2099:(t,e,r)=>{"use strict";var n=r(1091),i=r(1793),s=r(5468),o=r(6285),a=r(4849),c=r(575),h=r(7374),l=r(5543),u=r(6264),f=r(7171),d=r(3427),p=f("slice"),g=u("species"),A=Array,_=Math.max;n({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var r,n,u,f=h(this),p=c(f),E=a(t,p),m=a(void 0===e?p:e,p);if(i(f)&&(r=f.constructor,(s(r)&&(r===A||i(r.prototype))||o(r)&&null===(r=r[g]))&&(r=void 0),r===A||void 0===r))return d(f,E,m);for(n=new(void 0===r?A:r)(_(m-E,0)),u=0;E<m;E++,u++)E in f&&l(n,u,f[E]);return n.length=u,n}})},5953:(t,e,r)=>{"use strict";var n=r(1091),i=r(9298),s=r(4849),o=r(5482),a=r(575),c=r(3130),h=r(8024),l=r(6968),u=r(5543),f=r(4535),d=r(7171)("splice"),p=Math.max,g=Math.min;n({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var r,n,d,A,_,E,m=i(this),y=a(m),S=s(t,y),b=arguments.length;for(0===b?r=n=0:1===b?(r=0,n=y-S):(r=b-2,n=g(p(o(e),0),y-S)),h(y+r-n),d=l(m,n),A=0;A<n;A++)(_=S+A)in m&&u(d,A,m[_]);if(d.length=n,r<n){for(A=S;A<y-n;A++)E=A+r,(_=A+n)in m?m[E]=m[_]:f(m,E);for(A=y;A>y-n+r;A--)f(m,A-1)}else if(r>n)for(A=y-n;A>S;A--)E=A+r-1,(_=A+n-1)in m?m[E]=m[_]:f(m,E);for(A=0;A<r;A++)m[A+S]=arguments[A+2];return c(m,y-n+r),d}})},8537:()=>{},9721:(t,e,r)=>{"use strict";var n=r(1091),i=r(5582),s=r(6024),o=r(3930),a=r(1907),c=r(8828),h=r(9869),l=r(5594),u=r(3427),f=r(6656),d=r(9846),p=String,g=i("JSON","stringify"),A=a(/./.exec),_=a("".charAt),E=a("".charCodeAt),m=a("".replace),y=a(1..toString),S=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,v=!d||c((function(){var t=i("Symbol")("stringify detection");return"[null]"!==g([t])||"{}"!==g({a:t})||"{}"!==g(Object(t))})),I=c((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),C=function(t,e){var r=u(arguments),n=f(e);if(h(n)||void 0!==t&&!l(t))return r[1]=function(t,e){if(h(n)&&(e=o(n,this,p(t),e)),!l(e))return e},s(g,null,r)},k=function(t,e,r){var n=_(r,e-1),i=_(r,e+1);return A(b,t)&&!A(w,i)||A(w,t)&&!A(b,n)?"\\u"+y(E(t,0),16):t};g&&n({target:"JSON",stat:!0,arity:3,forced:v||I},{stringify:function(t,e,r){var n=u(arguments),i=s(v?C:g,null,n);return I&&"string"==typeof i?m(i,S,k):i}})},7024:(t,e,r)=>{"use strict";var n=r(5951);r(4840)(n.JSON,"JSON",!0)},8172:()=>{},6750:(t,e,r)=>{"use strict";var n=r(1091),i=r(9447),s=r(4284).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==s,sham:!i},{defineProperty:s})},5264:(t,e,r)=>{"use strict";var n=r(1091),i=r(9846),s=r(8828),o=r(7170),a=r(9298);n({target:"Object",stat:!0,forced:!i||s((function(){o.f(1)}))},{getOwnPropertySymbols:function(t){var e=o.f;return e?e(a(t)):[]}})},3643:()=>{},5205:()=>{},7057:(t,e,r)=>{"use strict";var n=r(1470).charAt,i=r(160),s=r(4932),o=r(183),a=r(9550),c="String Iterator",h=s.set,l=s.getterFor(c);o(String,"String",(function(t){h(this,{type:c,string:i(t),index:0})}),(function(){var t,e=l(this),r=e.string,i=e.index;return i>=r.length?a(void 0,!0):(t=n(r,i),e.index+=t.length,a(t,!1))}))},3997:(t,e,r)=>{"use strict";r(366)("asyncIterator")},3674:(t,e,r)=>{"use strict";var n=r(1091),i=r(5951),s=r(3930),o=r(1907),a=r(7376),c=r(9447),h=r(9846),l=r(8828),u=r(9724),f=r(8280),d=r(6624),p=r(7374),g=r(470),A=r(160),_=r(5817),E=r(8075),m=r(2875),y=r(4443),S=r(5407),b=r(7170),w=r(3846),v=r(4284),I=r(2220),C=r(2574),k=r(8055),R=r(9251),B=r(5816),O=r(2522),T=r(8530),N=r(6499),L=r(6264),P=r(560),x=r(366),U=r(3467),D=r(4840),H=r(4932),F=r(726).forEach,M=O("hidden"),Q="Symbol",$="prototype",W=H.set,j=H.getterFor(Q),K=Object[$],G=i.Symbol,q=G&&G[$],V=i.RangeError,z=i.TypeError,Y=i.QObject,X=w.f,J=v.f,Z=S.f,tt=C.f,et=o([].push),rt=B("symbols"),nt=B("op-symbols"),it=B("wks"),st=!Y||!Y[$]||!Y[$].findChild,ot=function(t,e,r){var n=X(K,e);n&&delete K[e],J(t,e,r),n&&t!==K&&J(K,e,n)},at=c&&l((function(){return 7!==E(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?ot:J,ct=function(t,e){var r=rt[t]=E(q);return W(r,{type:Q,tag:t,description:e}),c||(r.description=e),r},ht=function(t,e,r){t===K&&ht(nt,e,r),d(t);var n=g(e);return d(r),u(rt,n)?(r.enumerable?(u(t,M)&&t[M][n]&&(t[M][n]=!1),r=E(r,{enumerable:_(0,!1)})):(u(t,M)||J(t,M,_(1,E(null))),t[M][n]=!0),at(t,n,r)):J(t,n,r)},lt=function(t,e){d(t);var r=p(e),n=m(r).concat(pt(r));return F(n,(function(e){c&&!s(ut,r,e)||ht(t,e,r[e])})),t},ut=function(t){var e=g(t),r=s(tt,this,e);return!(this===K&&u(rt,e)&&!u(nt,e))&&(!(r||!u(this,e)||!u(rt,e)||u(this,M)&&this[M][e])||r)},ft=function(t,e){var r=p(t),n=g(e);if(r!==K||!u(rt,n)||u(nt,n)){var i=X(r,n);return!i||!u(rt,n)||u(r,M)&&r[M][n]||(i.enumerable=!0),i}},dt=function(t){var e=Z(p(t)),r=[];return F(e,(function(t){u(rt,t)||u(T,t)||et(r,t)})),r},pt=function(t){var e=t===K,r=Z(e?nt:p(t)),n=[];return F(r,(function(t){!u(rt,t)||e&&!u(K,t)||et(n,rt[t])})),n};h||(k(q=(G=function(){if(f(q,this))throw new z("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?A(arguments[0]):void 0,e=N(t),r=function(t){var n=void 0===this?i:this;n===K&&s(r,nt,t),u(n,M)&&u(n[M],e)&&(n[M][e]=!1);var o=_(1,t);try{at(n,e,o)}catch(t){if(!(t instanceof V))throw t;ot(n,e,o)}};return c&&st&&at(K,e,{configurable:!0,set:r}),ct(e,t)})[$],"toString",(function(){return j(this).tag})),k(G,"withoutSetter",(function(t){return ct(N(t),t)})),C.f=ut,v.f=ht,I.f=lt,w.f=ft,y.f=S.f=dt,b.f=pt,P.f=function(t){return ct(L(t),t)},c&&(R(q,"description",{configurable:!0,get:function(){return j(this).description}}),a||k(K,"propertyIsEnumerable",ut,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:G}),F(m(it),(function(t){x(t)})),n({target:Q,stat:!0,forced:!h},{useSetter:function(){st=!0},useSimple:function(){st=!1}}),n({target:"Object",stat:!0,forced:!h,sham:!c},{create:function(t,e){return void 0===e?E(t):lt(E(t),e)},defineProperty:ht,defineProperties:lt,getOwnPropertyDescriptor:ft}),n({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:dt}),U(),D(G,Q),T[M]=!0},5084:()=>{},3313:(t,e,r)=>{"use strict";var n=r(1091),i=r(5582),s=r(9724),o=r(160),a=r(5816),c=r(4411),h=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=o(t);if(s(h,e))return h[e];var r=i("Symbol")(e);return h[e]=r,l[r]=e,r}})},2596:(t,e,r)=>{"use strict";r(366)("hasInstance")},5721:(t,e,r)=>{"use strict";r(366)("isConcatSpreadable")},4954:(t,e,r)=>{"use strict";r(366)("iterator")},4452:(t,e,r)=>{"use strict";r(3674),r(3313),r(751),r(9721),r(5264)},751:(t,e,r)=>{"use strict";var n=r(1091),i=r(9724),s=r(5594),o=r(4640),a=r(5816),c=r(4411),h=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!s(t))throw new TypeError(o(t)+" is not a symbol");if(i(h,t))return h[t]}})},3377:(t,e,r)=>{"use strict";r(366)("matchAll")},4123:(t,e,r)=>{"use strict";r(366)("match")},2230:(t,e,r)=>{"use strict";r(366)("replace")},5344:(t,e,r)=>{"use strict";r(366)("search")},1660:(t,e,r)=>{"use strict";r(366)("species")},4610:(t,e,r)=>{"use strict";r(366)("split")},3669:(t,e,r)=>{"use strict";var n=r(366),i=r(3467);n("toPrimitive"),i()},4810:(t,e,r)=>{"use strict";var n=r(5582),i=r(366),s=r(4840);i("toStringTag"),s(n("Symbol"),"Symbol")},3325:(t,e,r)=>{"use strict";r(366)("unscopables")},768:(t,e,r)=>{"use strict";var n=r(6264),i=r(4284).f,s=n("metadata"),o=Function.prototype;void 0===o[s]&&i(o,s,{value:null})},8549:(t,e,r)=>{"use strict";r(366)("asyncDispose")},1697:(t,e,r)=>{"use strict";r(366)("customMatcher")},7152:(t,e,r)=>{"use strict";r(366)("dispose")},3939:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(2595)})},3422:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(2595)})},1785:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(9197)})},36:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(9197)})},8703:(t,e,r)=>{"use strict";r(366)("matcher")},6878:(t,e,r)=>{"use strict";r(366)("metadataKey")},1372:(t,e,r)=>{"use strict";r(366)("metadata")},4664:(t,e,r)=>{"use strict";r(366)("observable")},9671:(t,e,r)=>{"use strict";r(366)("patternMatch")},359:(t,e,r)=>{"use strict";r(366)("replaceAll")},3871:(t,e,r)=>{"use strict";var n=r(1091),i=r(5951),s=r(9472).clear;n({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==s},{clearImmediate:s})},237:()=>{},2560:(t,e,r)=>{"use strict";r(9363);var n=r(9287),i=r(5951),s=r(4840),o=r(3742);for(var a in n)s(i[a],a),o[a]=o.Array},4351:(t,e,r)=>{"use strict";r(3871),r(2910)},2910:(t,e,r)=>{"use strict";var n=r(1091),i=r(5951),s=r(9472).set,o=r(485),a=i.setImmediate?o(s,!1):s;n({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==a},{setImmediate:a})},1969:(t,e,r)=>{"use strict";var n=r(2092);t.exports=n},4525:(t,e,r)=>{"use strict";var n=r(3948),i=r(9724),s=r(8280),o=r(1969);r(237);var a=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===a||s(a,t)&&e===a.forEach||i(c,n(t))?o:e}},5471:(t,e,r)=>{"use strict";var n=r(4507);t.exports=n},9528:(t,e,r)=>{"use strict";var n=r(8823);t.exports=n},6686:(t,e,r)=>{"use strict";var n=r(303);t.exports=n},26:(t,e,r)=>{"use strict";var n=r(5029);t.exports=n},8251:(t,e,r)=>{"use strict";var n=r(1926);t.exports=n},9270:(t,e,r)=>{"use strict";r(4351);var n=r(2046);t.exports=n.setImmediate},4139:(t,e,r)=>{"use strict";var n=r(3842);r(2560),t.exports=n},7045:(t,e,r)=>{"use strict";var n=r(1730);r(2560),t.exports=n},70:(t,e,r)=>{"use strict";var n=r(1661);t.exports=n},592:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Glob:()=>Ir,default:()=>Hr,escape:()=>y,glob:()=>Or,globIterate:()=>Nr,globIterateSync:()=>Tr,globStream:()=>Rr,globStreamSync:()=>kr,globSync:()=>Br,hasMagic:()=>Cr,iterate:()=>Ur,iterateSync:()=>xr,stream:()=>Pr,streamSync:()=>Lr,sync:()=>Dr,unescape:()=>h});var n=r(8928);const i=t=>{if("string"!=typeof t)throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},s={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},o=t=>t.replace(/[[\]\\-]/g,"\\$&"),a=t=>t.join(""),c=(t,e)=>{const r=e;if("["!==t.charAt(r))throw new Error("not in a brace expression");const n=[],i=[];let c=r+1,h=!1,l=!1,u=!1,f=!1,d=r,p="";t:for(;c<t.length;){const e=t.charAt(c);if("!"!==e&&"^"!==e||c!==r+1){if("]"===e&&h&&!u){d=c+1;break}if(h=!0,"\\"!==e||u){if("["===e&&!u)for(const[e,[o,a,h]]of Object.entries(s))if(t.startsWith(e,c)){if(p)return["$.",!1,t.length-r,!0];c+=e.length,h?i.push(o):n.push(o),l=l||a;continue t}u=!1,p?(e>p?n.push(o(p)+"-"+o(e)):e===p&&n.push(o(e)),p="",c++):t.startsWith("-]",c+1)?(n.push(o(e+"-")),c+=2):t.startsWith("-",c+1)?(p=e,c+=2):(n.push(o(e)),c++)}else u=!0,c++}else f=!0,c++}if(d<c)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(0===i.length&&1===n.length&&/^\\?.$/.test(n[0])&&!f){return[(g=2===n[0].length?n[0].slice(-1):n[0],g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,d-r,!1]}var g;const A="["+(f?"^":"")+a(n)+"]",_="["+(f?"":"^")+a(i)+"]";return[n.length&&i.length?"("+A+"|"+_+")":n.length?A:_,l,d-r,!0]},h=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),l=new Set(["!","?","+","*","@"]),u=t=>l.has(t),f="(?!\\.)",d=new Set(["[","."]),p=new Set(["..","."]),g=new Set("().*{}+?[]^$\\!"),A="[^/]",_=A+"*?",E=A+"+?";class m{type;#t;#e;#r=!1;#n=[];#i;#s;#o;#a=!1;#c;#h;#l=!1;constructor(t,e,r={}){this.type=t,t&&(this.#e=!0),this.#i=e,this.#t=this.#i?this.#i.#t:this,this.#c=this.#t===this?r:this.#t.#c,this.#o=this.#t===this?[]:this.#t.#o,"!"!==t||this.#t.#a||this.#o.push(this),this.#s=this.#i?this.#i.#n.length:0}get hasMagic(){if(void 0!==this.#e)return this.#e;for(const t of this.#n)if("string"!=typeof t&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return void 0!==this.#h?this.#h:this.type?this.#h=this.type+"("+this.#n.map((t=>String(t))).join("|")+")":this.#h=this.#n.map((t=>String(t))).join("")}#u(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;let t;for(this.toString(),this.#a=!0;t=this.#o.pop();){if("!"!==t.type)continue;let e=t,r=e.#i;for(;r;){for(let n=e.#s+1;!r.type&&n<r.#n.length;n++)for(const e of t.#n){if("string"==typeof e)throw new Error("string part in extglob AST??");e.copyIn(r.#n[n])}e=r,r=e.#i}}return this}push(...t){for(const e of t)if(""!==e){if("string"!=typeof e&&!(e instanceof m&&e.#i===this))throw new Error("invalid part: "+e);this.#n.push(e)}}toJSON(){const t=null===this.type?this.#n.slice().map((t=>"string"==typeof t?t:t.toJSON())):[this.type,...this.#n.map((t=>t.toJSON()))];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&"!"===this.#i?.type)&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#i?.isStart())return!1;if(0===this.#s)return!0;const t=this.#i;for(let e=0;e<this.#s;e++){const r=t.#n[e];if(!(r instanceof m&&"!"===r.type))return!1}return!0}isEnd(){if(this.#t===this)return!0;if("!"===this.#i?.type)return!0;if(!this.#i?.isEnd())return!1;if(!this.type)return this.#i?.isEnd();const t=this.#i?this.#i.#n.length:0;return this.#s===t-1}copyIn(t){"string"==typeof t?this.push(t):this.push(t.clone(this))}clone(t){const e=new m(this.type,t);for(const t of this.#n)e.copyIn(t);return e}static#f(t,e,r,n){let i=!1,s=!1,o=-1,a=!1;if(null===e.type){let c=r,h="";for(;c<t.length;){const r=t.charAt(c++);if(i||"\\"===r)i=!i,h+=r;else if(s)c===o+1?"^"!==r&&"!"!==r||(a=!0):"]"!==r||c===o+2&&a||(s=!1),h+=r;else if("["!==r)if(n.noext||!u(r)||"("!==t.charAt(c))h+=r;else{e.push(h),h="";const i=new m(r,e);c=m.#f(t,i,c,n),e.push(i)}else s=!0,o=c,a=!1,h+=r}return e.push(h),c}let c=r+1,h=new m(null,e);const l=[];let f="";for(;c<t.length;){const r=t.charAt(c++);if(i||"\\"===r)i=!i,f+=r;else if(s)c===o+1?"^"!==r&&"!"!==r||(a=!0):"]"!==r||c===o+2&&a||(s=!1),f+=r;else if("["!==r)if(u(r)&&"("===t.charAt(c)){h.push(f),f="";const e=new m(r,h);h.push(e),c=m.#f(t,e,c,n)}else if("|"!==r){if(")"===r)return""===f&&0===e.#n.length&&(e.#l=!0),h.push(f),f="",e.push(...l,h),c;f+=r}else h.push(f),f="",l.push(h),h=new m(null,e);else s=!0,o=c,a=!1,f+=r}return e.type=null,e.#e=void 0,e.#n=[t.substring(r-1)],c}static fromGlob(t,e={}){const r=new m(null,void 0,e);return m.#f(t,r,0,e),r}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString(),[e,r,n,i]=this.toRegExpSource();if(!(n||this.#e||this.#c.nocase&&!this.#c.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return r;const s=(this.#c.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${e}$`,s),{_src:e,_glob:t})}toRegExpSource(){if(this.#t===this&&this.#u(),!this.type){const t=this.isStart()&&this.isEnd(),e=this.#n.map((e=>{const[r,n,i,s]="string"==typeof e?m.#d(e,this.#e,t):e.toRegExpSource();return this.#e=this.#e||i,this.#r=this.#r||s,r})).join("");let r="";if(this.isStart()&&"string"==typeof this.#n[0]&&(1!==this.#n.length||!p.has(this.#n[0]))){const t=d,n=this.#c.dot&&t.has(e.charAt(0))||e.startsWith("\\.")&&t.has(e.charAt(2))||e.startsWith("\\.\\.")&&t.has(e.charAt(4)),i=!this.#c.dot&&t.has(e.charAt(0));r=n?"(?!\\.\\.?(?:$|/))":i?f:""}let n="";return this.isEnd()&&this.#t.#a&&"!"===this.#i?.type&&(n="(?:$|\\/)"),[r+e+n,h(e),this.#e=!!this.#e,this.#r]}const t="!"===this.type?"(?:(?!(?:":"(?:",e=this.#n.map((t=>{if("string"==typeof t)throw new Error("string type in extglob ast??");const[e,r,n,i]=t.toRegExpSource();return this.#r=this.#r||i,e})).filter((t=>!(this.isStart()&&this.isEnd()&&!t))).join("|");if(this.isStart()&&this.isEnd()&&!e&&"!"!==this.type){const t=this.toString();return this.#n=[t],this.type=null,this.#e=void 0,[t,h(this.toString()),!1,!1]}let r="";return r="!"===this.type&&this.#l?(this.isStart()&&!this.#c.dot?f:"")+E:t+e+("!"===this.type?"))"+(this.isStart()&&!this.#c.dot?f:"")+_+")":"@"===this.type?")":`)${this.type}`),[r,h(e),this.#e=!!this.#e,this.#r]}static#d(t,e,r=!1){let n=!1,i="",s=!1;for(let o=0;o<t.length;o++){const a=t.charAt(o);if(n)n=!1,i+=(g.has(a)?"\\":"")+a;else if("\\"!==a){if("["===a){const[r,n,a,h]=c(t,o);if(a){i+=r,s=s||n,o+=a-1,e=e||h;continue}}"*"!==a?"?"!==a?i+=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(i+=A,e=!0):(i+=r&&"*"===t?E:_,e=!0)}else o===t.length-1?i+="\\\\":n=!0}return[i,h(t),!!e,s]}}const y=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),S=(t,e,r={})=>(i(e),!(!r.nocomment&&"#"===e.charAt(0))&&new q(e,r).match(t)),b=/^\*+([^+@!?\*\[\(]*)$/,w=t=>e=>!e.startsWith(".")&&e.endsWith(t),v=t=>e=>e.endsWith(t),I=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),C=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),k=/^\*+\.\*+$/,R=t=>!t.startsWith(".")&&t.includes("."),B=t=>"."!==t&&".."!==t&&t.includes("."),O=/^\.\*+$/,T=t=>"."!==t&&".."!==t&&t.startsWith("."),N=/^\*+$/,L=t=>0!==t.length&&!t.startsWith("."),P=t=>0!==t.length&&"."!==t&&".."!==t,x=/^\?+([^+@!?\*\[\(]*)?$/,U=([t,e=""])=>{const r=M([t]);return e?(e=e.toLowerCase(),t=>r(t)&&t.toLowerCase().endsWith(e)):r},D=([t,e=""])=>{const r=Q([t]);return e?(e=e.toLowerCase(),t=>r(t)&&t.toLowerCase().endsWith(e)):r},H=([t,e=""])=>{const r=Q([t]);return e?t=>r(t)&&t.endsWith(e):r},F=([t,e=""])=>{const r=M([t]);return e?t=>r(t)&&t.endsWith(e):r},M=([t])=>{const e=t.length;return t=>t.length===e&&!t.startsWith(".")},Q=([t])=>{const e=t.length;return t=>t.length===e&&"."!==t&&".."!==t},$="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";S.sep="win32"===$?"\\":"/";const W=Symbol("globstar **");S.GLOBSTAR=W,S.filter=(t,e={})=>r=>S(r,t,e);const j=(t,e={})=>Object.assign({},t,e);S.defaults=t=>{if(!t||"object"!=typeof t||!Object.keys(t).length)return S;const e=S;return Object.assign(((r,n,i={})=>e(r,n,j(t,i))),{Minimatch:class extends e.Minimatch{constructor(e,r={}){super(e,j(t,r))}static defaults(r){return e.defaults(j(t,r)).Minimatch}},AST:class extends e.AST{constructor(e,r,n={}){super(e,r,j(t,n))}static fromGlob(r,n={}){return e.AST.fromGlob(r,j(t,n))}},unescape:(r,n={})=>e.unescape(r,j(t,n)),escape:(r,n={})=>e.escape(r,j(t,n)),filter:(r,n={})=>e.filter(r,j(t,n)),defaults:r=>e.defaults(j(t,r)),makeRe:(r,n={})=>e.makeRe(r,j(t,n)),braceExpand:(r,n={})=>e.braceExpand(r,j(t,n)),match:(r,n,i={})=>e.match(r,n,j(t,i)),sep:e.sep,GLOBSTAR:W})};const K=(t,e={})=>(i(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:n(t));S.braceExpand=K,S.makeRe=(t,e={})=>new q(t,e).makeRe(),S.match=(t,e,r={})=>{const n=new q(e,r);return t=t.filter((t=>n.match(t))),n.options.nonull&&!t.length&&t.push(e),t};const G=/[?*]|[+@!]\(.*?\)|\[|\]/;class q{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){i(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||$,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==e.windowsNoMagicRoot?e.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if("string"!=typeof e)return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...t)=>console.error(...t)),this.debug(this.pattern,this.globSet);const r=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let n=this.globParts.map(((t,e,r)=>{if(this.isWindows&&this.windowsNoMagicRoot){const e=!(""!==t[0]||""!==t[1]||"?"!==t[2]&&G.test(t[2])||G.test(t[3])),r=/^[a-z]:/i.test(t[0]);if(e)return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))];if(r)return[t[0],...t.slice(1).map((t=>this.parse(t)))]}return t.map((t=>this.parse(t)))}));if(this.debug(this.pattern,n),this.set=n.filter((t=>-1===t.indexOf(!1))),this.isWindows)for(let t=0;t<this.set.length;t++){const e=this.set[t];""===e[0]&&""===e[1]&&"?"===this.globParts[t][2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3])&&(e[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++)"**"===t[e][r]&&(t[e][r]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map((t=>{let e=-1;for(;-1!==(e=t.indexOf("**",e+1));){let r=e;for(;"**"===t[r+1];)r++;r!==e&&t.splice(e,r-e)}return t}))}levelOneOptimize(t){return t.map((t=>0===(t=t.reduce(((t,e)=>{const r=t[t.length-1];return"**"===e&&"**"===r?t:".."===e&&r&&".."!==r&&"."!==r&&"**"!==r?(t.pop(),t):(t.push(e),t)}),[])).length?[""]:t))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let r=1;r<t.length-1;r++){const n=t[r];1===r&&""===n&&""===t[0]||"."!==n&&""!==n||(e=!0,t.splice(r,1),r--)}"."!==t[0]||2!==t.length||"."!==t[1]&&""!==t[1]||(e=!0,t.pop())}let r=0;for(;-1!==(r=t.indexOf("..",r+1));){const n=t[r-1];n&&"."!==n&&".."!==n&&"**"!==n&&(e=!0,t.splice(r-1,2),r-=2)}}while(e);return 0===t.length?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let r of t){let n=-1;for(;-1!==(n=r.indexOf("**",n+1));){let i=n;for(;"**"===r[i+1];)i++;i>n&&r.splice(n+1,i-n);let s=r[n+1];const o=r[n+2],a=r[n+3];if(".."!==s)continue;if(!o||"."===o||".."===o||!a||"."===a||".."===a)continue;e=!0,r.splice(n,1);const c=r.slice(0);c[n]="**",t.push(c),n--}if(!this.preserveMultipleSlashes){for(let t=1;t<r.length-1;t++){const n=r[t];1===t&&""===n&&""===r[0]||"."!==n&&""!==n||(e=!0,r.splice(t,1),t--)}"."!==r[0]||2!==r.length||"."!==r[1]&&""!==r[1]||(e=!0,r.pop())}let i=0;for(;-1!==(i=r.indexOf("..",i+1));){const t=r[i-1];if(t&&"."!==t&&".."!==t&&"**"!==t){e=!0;const t=1===i&&"**"===r[i+1]?["."]:[];r.splice(i-1,2,...t),0===r.length&&r.push(""),i-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let r=e+1;r<t.length;r++){const n=this.partsMatch(t[e],t[r],!this.preserveMultipleSlashes);n&&(t[e]=n,t[r]=[])}return t.filter((t=>t.length))}partsMatch(t,e,r=!1){let n=0,i=0,s=[],o="";for(;n<t.length&&i<e.length;)if(t[n]===e[i])s.push("b"===o?e[i]:t[n]),n++,i++;else if(r&&"**"===t[n]&&e[i]===t[n+1])s.push(t[n]),n++;else if(r&&"**"===e[i]&&t[n]===e[i+1])s.push(e[i]),i++;else if("*"!==t[n]||!e[i]||!this.options.dot&&e[i].startsWith(".")||"**"===e[i]){if("*"!==e[i]||!t[n]||!this.options.dot&&t[n].startsWith(".")||"**"===t[n])return!1;if("a"===o)return!1;o="b",s.push(e[i]),n++,i++}else{if("b"===o)return!1;o="a",s.push(t[n]),n++,i++}return t.length===e.length&&s}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,r=0;for(let n=0;n<t.length&&"!"===t.charAt(n);n++)e=!e,r++;r&&(this.pattern=t.slice(r)),this.negate=e}matchOne(t,e,r=!1){const n=this.options;if(this.isWindows){const r=""===t[0]&&""===t[1]&&"?"===t[2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3]),n=""===e[0]&&""===e[1]&&"?"===e[2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3]);if(r&&n){const r=t[3],n=e[3];r.toLowerCase()===n.toLowerCase()&&(t[3]=n)}else if(n&&"string"==typeof t[0]){const r=e[3],n=t[0];r.toLowerCase()===n.toLowerCase()&&(e[3]=n,e=e.slice(3))}else if(r&&"string"==typeof e[0]){const r=t[3];r.toLowerCase()===e[0].toLowerCase()&&(e[0]=r,t=t.slice(3))}}const{optimizationLevel:i=1}=this.options;i>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var s=0,o=0,a=t.length,c=e.length;s<a&&o<c;s++,o++){this.debug("matchOne loop");var h=e[o],l=t[s];if(this.debug(e,h,l),!1===h)return!1;if(h===W){this.debug("GLOBSTAR",[e,h,l]);var u=s,f=o+1;if(f===c){for(this.debug("** at the end");s<a;s++)if("."===t[s]||".."===t[s]||!n.dot&&"."===t[s].charAt(0))return!1;return!0}for(;u<a;){var d=t[u];if(this.debug("\nglobstar while",t,u,e,f,d),this.matchOne(t.slice(u),e.slice(f),r))return this.debug("globstar found match!",u,a,d),!0;if("."===d||".."===d||!n.dot&&"."===d.charAt(0)){this.debug("dot detected!",t,u,e,f);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!r||(this.debug("\n>>> no match, partial?",t,u,e,f),u!==a))}let i;if("string"==typeof h?(i=l===h,this.debug("string match",h,l,i)):(i=h.test(l),this.debug("pattern match",h,l,i)),!i)return!1}if(s===a&&o===c)return!0;if(s===a)return r;if(o===c)return s===a-1&&""===t[s];throw new Error("wtf?")}braceExpand(){return K(this.pattern,this.options)}parse(t){i(t);const e=this.options;if("**"===t)return W;if(""===t)return"";let r,n=null;(r=t.match(N))?n=e.dot?P:L:(r=t.match(b))?n=(e.nocase?e.dot?C:I:e.dot?v:w)(r[1]):(r=t.match(x))?n=(e.nocase?e.dot?D:U:e.dot?H:F)(r):(r=t.match(k))?n=e.dot?B:R:(r=t.match(O))&&(n=T);const s=m.fromGlob(t,this.options).toMMPattern();return n?Object.assign(s,{test:n}):s}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,r=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=new Set(e.nocase?["i"]:[]);let i=t.map((t=>{const e=t.map((t=>{if(t instanceof RegExp)for(const e of t.flags.split(""))n.add(e);return"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t===W?W:t._src}));return e.forEach(((t,n)=>{const i=e[n+1],s=e[n-1];t===W&&s!==W&&(void 0===s?void 0!==i&&i!==W?e[n+1]="(?:\\/|"+r+"\\/)?"+i:e[n]=r:void 0===i?e[n-1]=s+"(?:\\/|"+r+")?":i!==W&&(e[n-1]=s+"(?:\\/|\\/"+r+"\\/)"+i,e[n+1]=W))})),e.filter((t=>t!==W)).join("/")})).join("|");const[s,o]=t.length>1?["(?:",")"]:["",""];i="^"+s+i+o+"$",this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...n].join(""))}catch(t){this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;const r=this.options;this.isWindows&&(t=t.split("\\").join("/"));const n=this.slashSplit(t);this.debug(this.pattern,"split",n);const i=this.set;this.debug(this.pattern,"set",i);let s=n[n.length-1];if(!s)for(let t=n.length-2;!s&&t>=0;t--)s=n[t];for(let t=0;t<i.length;t++){const o=i[t];let a=n;if(r.matchBase&&1===o.length&&(a=[s]),this.matchOne(a,o,e))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(t){return S.defaults(t).Minimatch}}S.AST=m,S.Minimatch=q,S.escape=y,S.unescape=h;const V="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,z=new Set,Y="object"==typeof process&&process?process:{},X=(t,e,r,n)=>{"function"==typeof Y.emitWarning?Y.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)};let J=globalThis.AbortController,Z=globalThis.AbortSignal;if(void 0===J){Z=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},J=class{constructor(){e()}signal=new Z;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==Y.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,X("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}Symbol("type");const tt=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),et=t=>tt(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?rt:null:null;class rt extends Array{constructor(t){super(t),this.fill(0)}}class nt{heap;length;static#p=!1;static create(t){const e=et(t);if(!e)return[];nt.#p=!0;const r=new nt(t,e);return nt.#p=!1,r}constructor(t,e){if(!nt.#p)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class it{#g;#A;#_;#E;#m;#y;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#S;#b;#w;#v;#I;#C;#k;#R;#B;#O;#T;#N;#L;#P;#x;#U;#D;static unsafeExposeInternals(t){return{starts:t.#L,ttls:t.#P,sizes:t.#N,keyMap:t.#w,keyList:t.#v,valList:t.#I,next:t.#C,prev:t.#k,get head(){return t.#R},get tail(){return t.#B},free:t.#O,isBackgroundFetch:e=>t.#H(e),backgroundFetch:(e,r,n,i)=>t.#F(e,r,n,i),moveToTail:e=>t.#M(e),indexes:e=>t.#Q(e),rindexes:e=>t.#$(e),isStale:e=>t.#W(e)}}get max(){return this.#g}get maxSize(){return this.#A}get calculatedSize(){return this.#b}get size(){return this.#S}get fetchMethod(){return this.#m}get memoMethod(){return this.#y}get dispose(){return this.#_}get disposeAfter(){return this.#E}constructor(t){const{max:e=0,ttl:r,ttlResolution:n=1,ttlAutopurge:i,updateAgeOnGet:s,updateAgeOnHas:o,allowStale:a,dispose:c,disposeAfter:h,noDisposeOnSet:l,noUpdateTTL:u,maxSize:f=0,maxEntrySize:d=0,sizeCalculation:p,fetchMethod:g,memoMethod:A,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:y,ignoreFetchAbort:S}=t;if(0!==e&&!tt(e))throw new TypeError("max option must be a nonnegative integer");const b=e?et(e):Array;if(!b)throw new Error("invalid max value: "+e);if(this.#g=e,this.#A=f,this.maxEntrySize=d||this.#A,this.sizeCalculation=p,this.sizeCalculation){if(!this.#A&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==A&&"function"!=typeof A)throw new TypeError("memoMethod must be a function if defined");if(this.#y=A,void 0!==g&&"function"!=typeof g)throw new TypeError("fetchMethod must be a function if specified");if(this.#m=g,this.#U=!!g,this.#w=new Map,this.#v=new Array(e).fill(void 0),this.#I=new Array(e).fill(void 0),this.#C=new b(e),this.#k=new b(e),this.#R=0,this.#B=0,this.#O=nt.create(e),this.#S=0,this.#b=0,"function"==typeof c&&(this.#_=c),"function"==typeof h?(this.#E=h,this.#T=[]):(this.#E=void 0,this.#T=void 0),this.#x=!!this.#_,this.#D=!!this.#E,this.noDisposeOnSet=!!l,this.noUpdateTTL=!!u,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!m,this.allowStaleOnFetchAbort=!!y,this.ignoreFetchAbort=!!S,0!==this.maxEntrySize){if(0!==this.#A&&!tt(this.#A))throw new TypeError("maxSize must be a positive integer if specified");if(!tt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!o,this.ttlResolution=tt(n)||0===n?n:1,this.ttlAutopurge=!!i,this.ttl=r||0,this.ttl){if(!tt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#K()}if(0===this.#g&&0===this.ttl&&0===this.#A)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#g&&!this.#A){const t="LRU_CACHE_UNBOUNDED";(t=>!z.has(t))(t)&&(z.add(t),X("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,it))}}getRemainingTTL(t){return this.#w.has(t)?1/0:0}#K(){const t=new rt(this.#g),e=new rt(this.#g);this.#P=t,this.#L=e,this.#G=(r,n,i=V.now())=>{if(e[r]=0!==n?i:0,t[r]=n,0!==n&&this.ttlAutopurge){const t=setTimeout((()=>{this.#W(r)&&this.#q(this.#v[r],"expire")}),n+1);t.unref&&t.unref()}},this.#V=r=>{e[r]=0!==t[r]?V.now():0},this.#z=(i,s)=>{if(t[s]){const o=t[s],a=e[s];if(!o||!a)return;i.ttl=o,i.start=a,i.now=r||n();const c=i.now-a;i.remainingTTL=o-c}};let r=0;const n=()=>{const t=V.now();if(this.ttlResolution>0){r=t;const e=setTimeout((()=>r=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=i=>{const s=this.#w.get(i);if(void 0===s)return 0;const o=t[s],a=e[s];return o&&a?o-((r||n())-a):1/0},this.#W=i=>{const s=e[i],o=t[i];return!!o&&!!s&&(r||n())-s>o}}#V=()=>{};#z=()=>{};#G=()=>{};#W=()=>!1;#j(){const t=new rt(this.#g);this.#b=0,this.#N=t,this.#Y=e=>{this.#b-=t[e],t[e]=0},this.#X=(t,e,r,n)=>{if(this.#H(e))return 0;if(!tt(r)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(e,t),!tt(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#J=(e,r,n)=>{if(t[e]=r,this.#A){const r=this.#A-t[e];for(;this.#b>r;)this.#Z(!0)}this.#b+=t[e],n&&(n.entrySize=r,n.totalCalculatedSize=this.#b)}}#Y=t=>{};#J=(t,e,r)=>{};#X=(t,e,r,n)=>{if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#Q({allowStale:t=this.allowStale}={}){if(this.#S)for(let e=this.#B;this.#tt(e)&&(!t&&this.#W(e)||(yield e),e!==this.#R);)e=this.#k[e]}*#$({allowStale:t=this.allowStale}={}){if(this.#S)for(let e=this.#R;this.#tt(e)&&(!t&&this.#W(e)||(yield e),e!==this.#B);)e=this.#C[e]}#tt(t){return void 0!==t&&this.#w.get(this.#v[t])===t}*entries(){for(const t of this.#Q())void 0===this.#I[t]||void 0===this.#v[t]||this.#H(this.#I[t])||(yield[this.#v[t],this.#I[t]])}*rentries(){for(const t of this.#$())void 0===this.#I[t]||void 0===this.#v[t]||this.#H(this.#I[t])||(yield[this.#v[t],this.#I[t]])}*keys(){for(const t of this.#Q()){const e=this.#v[t];void 0===e||this.#H(this.#I[t])||(yield e)}}*rkeys(){for(const t of this.#$()){const e=this.#v[t];void 0===e||this.#H(this.#I[t])||(yield e)}}*values(){for(const t of this.#Q())void 0===this.#I[t]||this.#H(this.#I[t])||(yield this.#I[t])}*rvalues(){for(const t of this.#$())void 0===this.#I[t]||this.#H(this.#I[t])||(yield this.#I[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const r of this.#Q()){const n=this.#I[r],i=this.#H(n)?n.__staleWhileFetching:n;if(void 0!==i&&t(i,this.#v[r],this))return this.get(this.#v[r],e)}}forEach(t,e=this){for(const r of this.#Q()){const n=this.#I[r],i=this.#H(n)?n.__staleWhileFetching:n;void 0!==i&&t.call(e,i,this.#v[r],this)}}rforEach(t,e=this){for(const r of this.#$()){const n=this.#I[r],i=this.#H(n)?n.__staleWhileFetching:n;void 0!==i&&t.call(e,i,this.#v[r],this)}}purgeStale(){let t=!1;for(const e of this.#$({allowStale:!0}))this.#W(e)&&(this.#q(this.#v[e],"expire"),t=!0);return t}info(t){const e=this.#w.get(t);if(void 0===e)return;const r=this.#I[e],n=this.#H(r)?r.__staleWhileFetching:r;if(void 0===n)return;const i={value:n};if(this.#P&&this.#L){const t=this.#P[e],r=this.#L[e];if(t&&r){const e=t-(V.now()-r);i.ttl=e,i.start=Date.now()}}return this.#N&&(i.size=this.#N[e]),i}dump(){const t=[];for(const e of this.#Q({allowStale:!0})){const r=this.#v[e],n=this.#I[e],i=this.#H(n)?n.__staleWhileFetching:n;if(void 0===i||void 0===r)continue;const s={value:i};if(this.#P&&this.#L){s.ttl=this.#P[e];const t=V.now()-this.#L[e];s.start=Math.floor(Date.now()-t)}this.#N&&(s.size=this.#N[e]),t.unshift([r,s])}return t}load(t){this.clear();for(const[e,r]of t){if(r.start){const t=Date.now()-r.start;r.start=V.now()-t}this.set(e,r.value,r)}}set(t,e,r={}){if(void 0===e)return this.delete(t),this;const{ttl:n=this.ttl,start:i,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const h=this.#X(t,e,r.size||0,o);if(this.maxEntrySize&&h>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#q(t,"set"),this;let l=0===this.#S?void 0:this.#w.get(t);if(void 0===l)l=0===this.#S?this.#B:0!==this.#O.length?this.#O.pop():this.#S===this.#g?this.#Z(!1):this.#S,this.#v[l]=t,this.#I[l]=e,this.#w.set(t,l),this.#C[this.#B]=l,this.#k[l]=this.#B,this.#B=l,this.#S++,this.#J(l,h,a),a&&(a.set="add"),c=!1;else{this.#M(l);const r=this.#I[l];if(e!==r){if(this.#U&&this.#H(r)){r.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:e}=r;void 0===e||s||(this.#x&&this.#_?.(e,t,"set"),this.#D&&this.#T?.push([e,t,"set"]))}else s||(this.#x&&this.#_?.(r,t,"set"),this.#D&&this.#T?.push([r,t,"set"]));if(this.#Y(l),this.#J(l,h,a),this.#I[l]=e,a){a.set="replace";const t=r&&this.#H(r)?r.__staleWhileFetching:r;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===n||this.#P||this.#K(),this.#P&&(c||this.#G(l,n,i),a&&this.#z(a,l)),!s&&this.#D&&this.#T){const t=this.#T;let e;for(;e=t?.shift();)this.#E?.(...e)}return this}pop(){try{for(;this.#S;){const t=this.#I[this.#R];if(this.#Z(!0),this.#H(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#D&&this.#T){const t=this.#T;let e;for(;e=t?.shift();)this.#E?.(...e)}}}#Z(t){const e=this.#R,r=this.#v[e],n=this.#I[e];return this.#U&&this.#H(n)?n.__abortController.abort(new Error("evicted")):(this.#x||this.#D)&&(this.#x&&this.#_?.(n,r,"evict"),this.#D&&this.#T?.push([n,r,"evict"])),this.#Y(e),t&&(this.#v[e]=void 0,this.#I[e]=void 0,this.#O.push(e)),1===this.#S?(this.#R=this.#B=0,this.#O.length=0):this.#R=this.#C[e],this.#w.delete(r),this.#S--,e}has(t,e={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=e,i=this.#w.get(t);if(void 0!==i){const t=this.#I[i];if(this.#H(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#W(i))return r&&this.#V(i),n&&(n.has="hit",this.#z(n,i)),!0;n&&(n.has="stale",this.#z(n,i))}else n&&(n.has="miss");return!1}peek(t,e={}){const{allowStale:r=this.allowStale}=e,n=this.#w.get(t);if(void 0===n||!r&&this.#W(n))return;const i=this.#I[n];return this.#H(i)?i.__staleWhileFetching:i}#F(t,e,r,n){const i=void 0===e?void 0:this.#I[e];if(this.#H(i))return i;const s=new J,{signal:o}=r;o?.addEventListener("abort",(()=>s.abort(o.reason)),{signal:s.signal});const a={signal:s.signal,options:r,context:n},c=(n,i=!1)=>{const{aborted:o}=s.signal,c=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(o&&!i?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,c&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),o&&!c&&!i)return h(s.signal.reason);const u=l;return this.#I[e]===l&&(void 0===n?u.__staleWhileFetching?this.#I[e]=u.__staleWhileFetching:this.#q(t,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(t,n,a.options))),n},h=n=>{const{aborted:i}=s.signal,o=i&&r.allowStaleOnFetchAbort,a=o||r.allowStaleOnFetchRejection,c=a||r.noDeleteOnFetchRejection,h=l;if(this.#I[e]===l&&(c&&void 0!==h.__staleWhileFetching?o||(this.#I[e]=h.__staleWhileFetching):this.#q(t,"fetch")),a)return r.status&&void 0!==h.__staleWhileFetching&&(r.status.returnedStale=!0),h.__staleWhileFetching;if(h.__returned===h)throw n};r.status&&(r.status.fetchDispatched=!0);const l=new Promise(((e,n)=>{const o=this.#m?.(t,i,a);o&&o instanceof Promise&&o.then((t=>e(void 0===t?void 0:t)),n),s.signal.addEventListener("abort",(()=>{r.ignoreFetchAbort&&!r.allowStaleOnFetchAbort||(e(void 0),r.allowStaleOnFetchAbort&&(e=t=>c(t,!0)))}))})).then(c,(t=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=t),h(t)))),u=Object.assign(l,{__abortController:s,__staleWhileFetching:i,__returned:void 0});return void 0===e?(this.set(t,u,{...a.options,status:void 0}),e=this.#w.get(t)):this.#I[e]=u,u}#H(t){if(!this.#U)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof J}async fetch(t,e={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:A,signal:_}=e;if(!this.#U)return A&&(A.fetch="get"),this.get(t,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:A});const E={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:s,noDisposeOnSet:o,size:a,sizeCalculation:c,noUpdateTTL:h,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:d,ignoreFetchAbort:f,status:A,signal:_};let m=this.#w.get(t);if(void 0===m){A&&(A.fetch="miss");const e=this.#F(t,m,E,p);return e.__returned=e}{const e=this.#I[m];if(this.#H(e)){const t=r&&void 0!==e.__staleWhileFetching;return A&&(A.fetch="inflight",t&&(A.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const i=this.#W(m);if(!g&&!i)return A&&(A.fetch="hit"),this.#M(m),n&&this.#V(m),A&&this.#z(A,m),e;const s=this.#F(t,m,E,p),o=void 0!==s.__staleWhileFetching&&r;return A&&(A.fetch=i?"stale":"refresh",o&&i&&(A.returnedStale=!0)),o?s.__staleWhileFetching:s.__returned=s}}async forceFetch(t,e={}){const r=await this.fetch(t,e);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(t,e={}){const r=this.#y;if(!r)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:i,...s}=e,o=this.get(t,s);if(!i&&void 0!==o)return o;const a=r(t,o,{options:s,context:n});return this.set(t,a,s),a}get(t,e={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:s}=e,o=this.#w.get(t);if(void 0!==o){const e=this.#I[o],a=this.#H(e);return s&&this.#z(s,o),this.#W(o)?(s&&(s.get="stale"),a?(s&&r&&void 0!==e.__staleWhileFetching&&(s.returnedStale=!0),r?e.__staleWhileFetching:void 0):(i||this.#q(t,"expire"),s&&r&&(s.returnedStale=!0),r?e:void 0)):(s&&(s.get="hit"),a?e.__staleWhileFetching:(this.#M(o),n&&this.#V(o),e))}s&&(s.get="miss")}#et(t,e){this.#k[e]=t,this.#C[t]=e}#M(t){t!==this.#B&&(t===this.#R?this.#R=this.#C[t]:this.#et(this.#k[t],this.#C[t]),this.#et(this.#B,t),this.#B=t)}delete(t){return this.#q(t,"delete")}#q(t,e){let r=!1;if(0!==this.#S){const n=this.#w.get(t);if(void 0!==n)if(r=!0,1===this.#S)this.#rt(e);else{this.#Y(n);const r=this.#I[n];if(this.#H(r)?r.__abortController.abort(new Error("deleted")):(this.#x||this.#D)&&(this.#x&&this.#_?.(r,t,e),this.#D&&this.#T?.push([r,t,e])),this.#w.delete(t),this.#v[n]=void 0,this.#I[n]=void 0,n===this.#B)this.#B=this.#k[n];else if(n===this.#R)this.#R=this.#C[n];else{const t=this.#k[n];this.#C[t]=this.#C[n];const e=this.#C[n];this.#k[e]=this.#k[n]}this.#S--,this.#O.push(n)}}if(this.#D&&this.#T?.length){const t=this.#T;let e;for(;e=t?.shift();)this.#E?.(...e)}return r}clear(){return this.#rt("delete")}#rt(t){for(const e of this.#$({allowStale:!0})){const r=this.#I[e];if(this.#H(r))r.__abortController.abort(new Error("deleted"));else{const n=this.#v[e];this.#x&&this.#_?.(r,n,t),this.#D&&this.#T?.push([r,n,t])}}if(this.#w.clear(),this.#I.fill(void 0),this.#v.fill(void 0),this.#P&&this.#L&&(this.#P.fill(0),this.#L.fill(0)),this.#N&&this.#N.fill(0),this.#R=0,this.#B=0,this.#O.length=0,this.#b=0,this.#S=0,this.#D&&this.#T){const t=this.#T;let e;for(;e=t?.shift();)this.#E?.(...e)}}}const st=require("node:path"),ot=require("node:url");var at=r(9896);const ct=require("node:fs");var ht=r.t(ct,2);const lt=require("node:fs/promises"),ut=require("node:events"),ft=require("node:stream"),dt=require("node:string_decoder"),pt="object"==typeof process&&process?process:{stdout:null,stderr:null},gt=t=>!!t&&"object"==typeof t&&(t instanceof Zt||t instanceof ft||At(t)||_t(t)),At=t=>!!t&&"object"==typeof t&&t instanceof ut.EventEmitter&&"function"==typeof t.pipe&&t.pipe!==ft.Writable.prototype.pipe,_t=t=>!!t&&"object"==typeof t&&t instanceof ut.EventEmitter&&"function"==typeof t.write&&"function"==typeof t.end,Et=Symbol("EOF"),mt=Symbol("maybeEmitEnd"),yt=Symbol("emittedEnd"),St=Symbol("emittingEnd"),bt=Symbol("emittedError"),wt=Symbol("closed"),vt=Symbol("read"),It=Symbol("flush"),Ct=Symbol("flushChunk"),kt=Symbol("encoding"),Rt=Symbol("decoder"),Bt=Symbol("flowing"),Ot=Symbol("paused"),Tt=Symbol("resume"),Nt=Symbol("buffer"),Lt=Symbol("pipes"),Pt=Symbol("bufferLength"),xt=Symbol("bufferPush"),Ut=Symbol("bufferShift"),Dt=Symbol("objectMode"),Ht=Symbol("destroyed"),Ft=Symbol("error"),Mt=Symbol("emitData"),Qt=Symbol("emitEnd"),$t=Symbol("emitEnd2"),Wt=Symbol("async"),jt=Symbol("abort"),Kt=Symbol("aborted"),Gt=Symbol("signal"),qt=Symbol("dataListeners"),Vt=Symbol("discarded"),zt=t=>Promise.resolve().then(t),Yt=t=>t();class Xt{src;dest;opts;ondrain;constructor(t,e,r){this.src=t,this.dest=e,this.opts=r,this.ondrain=()=>t[Tt](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class Jt extends Xt{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,r){super(t,e,r),this.proxyErrors=t=>e.emit("error",t),t.on("error",this.proxyErrors)}}class Zt extends ut.EventEmitter{[Bt]=!1;[Ot]=!1;[Lt]=[];[Nt]=[];[Dt];[kt];[Wt];[Rt];[Et]=!1;[yt]=!1;[St]=!1;[wt]=!1;[bt]=null;[Pt]=0;[Ht]=!1;[Gt];[Kt]=!1;[qt]=0;[Vt]=!1;writable=!0;readable=!0;constructor(...t){const e=t[0]||{};if(super(),e.objectMode&&"string"==typeof e.encoding)throw new TypeError("Encoding and objectMode may not be used together");var r;e.objectMode?(this[Dt]=!0,this[kt]=null):!(r=e).objectMode&&r.encoding&&"buffer"!==r.encoding?(this[kt]=e.encoding,this[Dt]=!1):(this[Dt]=!1,this[kt]=null),this[Wt]=!!e.async,this[Rt]=this[kt]?new dt.StringDecoder(this[kt]):null,e&&!0===e.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[Nt]}),e&&!0===e.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[Lt]});const{signal:n}=e;n&&(this[Gt]=n,n.aborted?this[jt]():n.addEventListener("abort",(()=>this[jt]())))}get bufferLength(){return this[Pt]}get encoding(){return this[kt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Dt]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Wt]}set async(t){this[Wt]=this[Wt]||!!t}[jt](){this[Kt]=!0,this.emit("abort",this[Gt]?.reason),this.destroy(this[Gt]?.reason)}get aborted(){return this[Kt]}set aborted(t){}write(t,e,r){if(this[Kt])return!1;if(this[Et])throw new Error("write after end");if(this[Ht])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof e&&(r=e,e="utf8"),e||(e="utf8");const n=this[Wt]?zt:Yt;if(!this[Dt]&&!Buffer.isBuffer(t))if(i=t,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if((t=>t instanceof ArrayBuffer||!!t&&"object"==typeof t&&t.constructor&&"ArrayBuffer"===t.constructor.name&&t.byteLength>=0)(t))t=Buffer.from(t);else if("string"!=typeof t)throw new Error("Non-contiguous data written to non-objectMode stream");var i;return this[Dt]?(this[Bt]&&0!==this[Pt]&&this[It](!0),this[Bt]?this.emit("data",t):this[xt](t),0!==this[Pt]&&this.emit("readable"),r&&n(r),this[Bt]):t.length?("string"!=typeof t||e===this[kt]&&!this[Rt]?.lastNeed||(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[kt]&&(t=this[Rt].write(t)),this[Bt]&&0!==this[Pt]&&this[It](!0),this[Bt]?this.emit("data",t):this[xt](t),0!==this[Pt]&&this.emit("readable"),r&&n(r),this[Bt]):(0!==this[Pt]&&this.emit("readable"),r&&n(r),this[Bt])}read(t){if(this[Ht])return null;if(this[Vt]=!1,0===this[Pt]||0===t||t&&t>this[Pt])return this[mt](),null;this[Dt]&&(t=null),this[Nt].length>1&&!this[Dt]&&(this[Nt]=[this[kt]?this[Nt].join(""):Buffer.concat(this[Nt],this[Pt])]);const e=this[vt](t||null,this[Nt][0]);return this[mt](),e}[vt](t,e){if(this[Dt])this[Ut]();else{const r=e;t===r.length||null===t?this[Ut]():"string"==typeof r?(this[Nt][0]=r.slice(t),e=r.slice(0,t),this[Pt]-=t):(this[Nt][0]=r.subarray(t),e=r.subarray(0,t),this[Pt]-=t)}return this.emit("data",e),this[Nt].length||this[Et]||this.emit("drain"),e}end(t,e,r){return"function"==typeof t&&(r=t,t=void 0),"function"==typeof e&&(r=e,e="utf8"),void 0!==t&&this.write(t,e),r&&this.once("end",r),this[Et]=!0,this.writable=!1,!this[Bt]&&this[Ot]||this[mt](),this}[Tt](){this[Ht]||(this[qt]||this[Lt].length||(this[Vt]=!0),this[Ot]=!1,this[Bt]=!0,this.emit("resume"),this[Nt].length?this[It]():this[Et]?this[mt]():this.emit("drain"))}resume(){return this[Tt]()}pause(){this[Bt]=!1,this[Ot]=!0,this[Vt]=!1}get destroyed(){return this[Ht]}get flowing(){return this[Bt]}get paused(){return this[Ot]}[xt](t){this[Dt]?this[Pt]+=1:this[Pt]+=t.length,this[Nt].push(t)}[Ut](){return this[Dt]?this[Pt]-=1:this[Pt]-=this[Nt][0].length,this[Nt].shift()}[It](t=!1){do{}while(this[Ct](this[Ut]())&&this[Nt].length);t||this[Nt].length||this[Et]||this.emit("drain")}[Ct](t){return this.emit("data",t),this[Bt]}pipe(t,e){if(this[Ht])return t;this[Vt]=!1;const r=this[yt];return e=e||{},t===pt.stdout||t===pt.stderr?e.end=!1:e.end=!1!==e.end,e.proxyErrors=!!e.proxyErrors,r?e.end&&t.end():(this[Lt].push(e.proxyErrors?new Jt(this,t,e):new Xt(this,t,e)),this[Wt]?zt((()=>this[Tt]())):this[Tt]()),t}unpipe(t){const e=this[Lt].find((e=>e.dest===t));e&&(1===this[Lt].length?(this[Bt]&&0===this[qt]&&(this[Bt]=!1),this[Lt]=[]):this[Lt].splice(this[Lt].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){const r=super.on(t,e);if("data"===t)this[Vt]=!1,this[qt]++,this[Lt].length||this[Bt]||this[Tt]();else if("readable"===t&&0!==this[Pt])super.emit("readable");else if((t=>"end"===t||"finish"===t||"prefinish"===t)(t)&&this[yt])super.emit(t),this.removeAllListeners(t);else if("error"===t&&this[bt]){const t=e;this[Wt]?zt((()=>t.call(this,this[bt]))):t.call(this,this[bt])}return r}removeListener(t,e){return this.off(t,e)}off(t,e){const r=super.off(t,e);return"data"===t&&(this[qt]=this.listeners("data").length,0!==this[qt]||this[Vt]||this[Lt].length||(this[Bt]=!1)),r}removeAllListeners(t){const e=super.removeAllListeners(t);return"data"!==t&&void 0!==t||(this[qt]=0,this[Vt]||this[Lt].length||(this[Bt]=!1)),e}get emittedEnd(){return this[yt]}[mt](){this[St]||this[yt]||this[Ht]||0!==this[Nt].length||!this[Et]||(this[St]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[wt]&&this.emit("close"),this[St]=!1)}emit(t,...e){const r=e[0];if("error"!==t&&"close"!==t&&t!==Ht&&this[Ht])return!1;if("data"===t)return!(!this[Dt]&&!r)&&(this[Wt]?(zt((()=>this[Mt](r))),!0):this[Mt](r));if("end"===t)return this[Qt]();if("close"===t){if(this[wt]=!0,!this[yt]&&!this[Ht])return!1;const t=super.emit("close");return this.removeAllListeners("close"),t}if("error"===t){this[bt]=r,super.emit(Ft,r);const t=!(this[Gt]&&!this.listeners("error").length)&&super.emit("error",r);return this[mt](),t}if("resume"===t){const t=super.emit("resume");return this[mt](),t}if("finish"===t||"prefinish"===t){const e=super.emit(t);return this.removeAllListeners(t),e}const n=super.emit(t,...e);return this[mt](),n}[Mt](t){for(const e of this[Lt])!1===e.dest.write(t)&&this.pause();const e=!this[Vt]&&super.emit("data",t);return this[mt](),e}[Qt](){return!this[yt]&&(this[yt]=!0,this.readable=!1,this[Wt]?(zt((()=>this[$t]())),!0):this[$t]())}[$t](){if(this[Rt]){const t=this[Rt].end();if(t){for(const e of this[Lt])e.dest.write(t);this[Vt]||super.emit("data",t)}}for(const t of this[Lt])t.end();const t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){const t=Object.assign([],{dataLength:0});this[Dt]||(t.dataLength=0);const e=this.promise();return this.on("data",(e=>{t.push(e),this[Dt]||(t.dataLength+=e.length)})),await e,t}async concat(){if(this[Dt])throw new Error("cannot concat in objectMode");const t=await this.collect();return this[kt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise(((t,e)=>{this.on(Ht,(()=>e(new Error("stream destroyed")))),this.on("error",(t=>e(t))),this.on("end",(()=>t()))}))}[Symbol.asyncIterator](){this[Vt]=!1;let t=!1;const e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();const r=this.read();if(null!==r)return Promise.resolve({done:!1,value:r});if(this[Et])return e();let n,i;const s=t=>{this.off("data",o),this.off("end",a),this.off(Ht,c),e(),i(t)},o=t=>{this.off("error",s),this.off("end",a),this.off(Ht,c),this.pause(),n({value:t,done:!!this[Et]})},a=()=>{this.off("error",s),this.off("data",o),this.off(Ht,c),e(),n({done:!0,value:void 0})},c=()=>s(new Error("stream destroyed"));return new Promise(((t,e)=>{i=e,n=t,this.once(Ht,c),this.once("error",s),this.once("end",a),this.once("data",o)}))},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Vt]=!1;let t=!1;const e=()=>(this.pause(),this.off(Ft,e),this.off(Ht,e),this.off("end",e),t=!0,{done:!0,value:void 0});return this.once("end",e),this.once(Ft,e),this.once(Ht,e),{next:()=>{if(t)return e();const r=this.read();return null===r?e():{done:!1,value:r}},throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){return this[Ht]?(t?this.emit("error",t):this.emit(Ht),this):(this[Ht]=!0,this[Vt]=!0,this[Nt].length=0,this[Pt]=0,"function"!=typeof this.close||this[wt]||this.close(),t?this.emit("error",t):this.emit(Ht),this)}static get isStream(){return gt}}const te=at.realpathSync.native,ee={lstatSync:at.lstatSync,readdir:at.readdir,readdirSync:at.readdirSync,readlinkSync:at.readlinkSync,realpathSync:te,promises:{lstat:lt.lstat,readdir:lt.readdir,readlink:lt.readlink,realpath:lt.realpath}},re=t=>t&&t!==ee&&t!==ht?{...ee,...t,promises:{...ee.promises,...t.promises||{}}}:ee,ne=/^\\\\\?\\([a-z]:)\\?$/i,ie=/[\\\/]/,se=10,oe=15,ae=-16,ce=128,he=t=>t.isFile()?8:t.isDirectory()?4:t.isSymbolicLink()?se:t.isCharacterDevice()?2:t.isBlockDevice()?6:t.isSocket()?12:t.isFIFO()?1:0,le=new Map,ue=t=>{const e=le.get(t);if(e)return e;const r=t.normalize("NFKD");return le.set(t,r),r},fe=new Map,de=t=>{const e=fe.get(t);if(e)return e;const r=ue(t.toLowerCase());return fe.set(t,r),r};class pe extends it{constructor(){super({max:256})}}class ge extends it{constructor(t=16384){super({maxSize:t,sizeCalculation:t=>t.length+1})}}const Ae=Symbol("PathScurry setAsCwd");class _e{name;root;roots;parent;nocase;isCWD=!1;#nt;#it;get dev(){return this.#it}#st;get mode(){return this.#st}#ot;get nlink(){return this.#ot}#at;get uid(){return this.#at}#ct;get gid(){return this.#ct}#ht;get rdev(){return this.#ht}#lt;get blksize(){return this.#lt}#ut;get ino(){return this.#ut}#S;get size(){return this.#S}#ft;get blocks(){return this.#ft}#dt;get atimeMs(){return this.#dt}#pt;get mtimeMs(){return this.#pt}#gt;get ctimeMs(){return this.#gt}#At;get birthtimeMs(){return this.#At}#_t;get atime(){return this.#_t}#Et;get mtime(){return this.#Et}#mt;get ctime(){return this.#mt}#yt;get birthtime(){return this.#yt}#St;#bt;#wt;#vt;#It;#Ct;#kt;#Rt;#Bt;#Ot;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=0,r,n,i,s,o){this.name=t,this.#St=i?de(t):ue(t),this.#kt=1023&e,this.nocase=i,this.roots=n,this.root=r||this,this.#Rt=s,this.#wt=o.fullpath,this.#It=o.relative,this.#Ct=o.relativePosix,this.parent=o.parent,this.parent?this.#nt=this.parent.#nt:this.#nt=re(o.fs)}depth(){return void 0!==this.#bt?this.#bt:this.parent?this.#bt=this.parent.depth()+1:this.#bt=0}childrenCache(){return this.#Rt}resolve(t){if(!t)return this;const e=this.getRootString(t),r=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#Tt(r):this.#Tt(r)}#Tt(t){let e=this;for(const r of t)e=e.child(r);return e}children(){const t=this.#Rt.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#Rt.set(this,e),this.#kt&=-17,e}child(t,e){if(""===t||"."===t)return this;if(".."===t)return this.parent||this;const r=this.children(),n=this.nocase?de(t):ue(t);for(const t of r)if(t.#St===n)return t;const i=this.parent?this.sep:"",s=this.#wt?this.#wt+i+t:void 0,o=this.newChild(t,0,{...e,parent:this,fullpath:s});return this.canReaddir()||(o.#kt|=ce),r.push(o),o}relative(){if(this.isCWD)return"";if(void 0!==this.#It)return this.#It;const t=this.name,e=this.parent;if(!e)return this.#It=this.name;const r=e.relative();return r+(r&&e.parent?this.sep:"")+t}relativePosix(){if("/"===this.sep)return this.relative();if(this.isCWD)return"";if(void 0!==this.#Ct)return this.#Ct;const t=this.name,e=this.parent;if(!e)return this.#Ct=this.fullpathPosix();const r=e.relativePosix();return r+(r&&e.parent?"/":"")+t}fullpath(){if(void 0!==this.#wt)return this.#wt;const t=this.name,e=this.parent;if(!e)return this.#wt=this.name;const r=e.fullpath()+(e.parent?this.sep:"")+t;return this.#wt=r}fullpathPosix(){if(void 0!==this.#vt)return this.#vt;if("/"===this.sep)return this.#vt=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(t)?this.#vt=`//?/${t}`:this.#vt=t}const t=this.parent,e=t.fullpathPosix(),r=e+(e&&t.parent?"/":"")+this.name;return this.#vt=r}isUnknown(){return!(this.#kt&oe)}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return 8==(this.#kt&oe)}isDirectory(){return 4==(this.#kt&oe)}isCharacterDevice(){return 2==(this.#kt&oe)}isBlockDevice(){return 6==(this.#kt&oe)}isFIFO(){return 1==(this.#kt&oe)}isSocket(){return 12==(this.#kt&oe)}isSymbolicLink(){return(this.#kt&se)===se}lstatCached(){return 32&this.#kt?this:void 0}readlinkCached(){return this.#Bt}realpathCached(){return this.#Ot}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#Bt)return!0;if(!this.parent)return!1;const t=this.#kt&oe;return!(0!==t&&t!==se||256&this.#kt||this.#kt&ce)}calledReaddir(){return!!(16&this.#kt)}isENOENT(){return!!(this.#kt&ce)}isNamed(t){return this.nocase?this.#St===de(t):this.#St===ue(t)}async readlink(){const t=this.#Bt;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=await this.#nt.promises.readlink(this.fullpath()),e=(await this.parent.realpath())?.resolve(t);if(e)return this.#Bt=e}catch(t){return void this.#Nt(t.code)}}readlinkSync(){const t=this.#Bt;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=this.#nt.readlinkSync(this.fullpath()),e=this.parent.realpathSync()?.resolve(t);if(e)return this.#Bt=e}catch(t){return void this.#Nt(t.code)}}#Lt(t){this.#kt|=16;for(let e=t.provisional;e<t.length;e++){const r=t[e];r&&r.#Pt()}}#Pt(){this.#kt&ce||(this.#kt=(this.#kt|ce)&ae,this.#xt())}#xt(){const t=this.children();t.provisional=0;for(const e of t)e.#Pt()}#Ut(){this.#kt|=512,this.#Dt()}#Dt(){if(64&this.#kt)return;let t=this.#kt;4==(t&oe)&&(t&=ae),this.#kt=64|t,this.#xt()}#Ht(t=""){"ENOTDIR"===t||"EPERM"===t?this.#Dt():"ENOENT"===t?this.#Pt():this.children().provisional=0}#Ft(t=""){"ENOTDIR"===t?this.parent.#Dt():"ENOENT"===t&&this.#Pt()}#Nt(t=""){let e=this.#kt;e|=256,"ENOENT"===t&&(e|=ce),"EINVAL"!==t&&"UNKNOWN"!==t||(e&=ae),this.#kt=e,"ENOTDIR"===t&&this.parent&&this.parent.#Dt()}#Mt(t,e){return this.#Qt(t,e)||this.#$t(t,e)}#$t(t,e){const r=he(t),n=this.newChild(t.name,r,{parent:this}),i=n.#kt&oe;return 4!==i&&i!==se&&0!==i&&(n.#kt|=64),e.unshift(n),e.provisional++,n}#Qt(t,e){for(let r=e.provisional;r<e.length;r++){const n=e[r];if((this.nocase?de(t.name):ue(t.name))===n.#St)return this.#Wt(t,n,r,e)}}#Wt(t,e,r,n){const i=e.name;return e.#kt=e.#kt&ae|he(t),i!==t.name&&(e.name=t.name),r!==n.provisional&&(r===n.length-1?n.pop():n.splice(r,1),n.unshift(e)),n.provisional++,e}async lstat(){if(!(this.#kt&ce))try{return this.#jt(await this.#nt.promises.lstat(this.fullpath())),this}catch(t){this.#Ft(t.code)}}lstatSync(){if(!(this.#kt&ce))try{return this.#jt(this.#nt.lstatSync(this.fullpath())),this}catch(t){this.#Ft(t.code)}}#jt(t){const{atime:e,atimeMs:r,birthtime:n,birthtimeMs:i,blksize:s,blocks:o,ctime:a,ctimeMs:c,dev:h,gid:l,ino:u,mode:f,mtime:d,mtimeMs:p,nlink:g,rdev:A,size:_,uid:E}=t;this.#_t=e,this.#dt=r,this.#yt=n,this.#At=i,this.#lt=s,this.#ft=o,this.#mt=a,this.#gt=c,this.#it=h,this.#ct=l,this.#ut=u,this.#st=f,this.#Et=d,this.#pt=p,this.#ot=g,this.#ht=A,this.#S=_,this.#at=E;const m=he(t);this.#kt=this.#kt&ae|m|32,0!==m&&4!==m&&m!==se&&(this.#kt|=64)}#Kt=[];#Gt=!1;#qt(t){this.#Gt=!1;const e=this.#Kt.slice();this.#Kt.length=0,e.forEach((e=>e(null,t)))}readdirCB(t,e=!1){if(!this.canReaddir())return void(e?t(null,[]):queueMicrotask((()=>t(null,[]))));const r=this.children();if(this.calledReaddir()){const n=r.slice(0,r.provisional);return void(e?t(null,n):queueMicrotask((()=>t(null,n))))}if(this.#Kt.push(t),this.#Gt)return;this.#Gt=!0;const n=this.fullpath();this.#nt.readdir(n,{withFileTypes:!0},((t,e)=>{if(t)this.#Ht(t.code),r.provisional=0;else{for(const t of e)this.#Mt(t,r);this.#Lt(r)}this.#qt(r.slice(0,r.provisional))}))}#Vt;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#Vt)await this.#Vt;else{let r=()=>{};this.#Vt=new Promise((t=>r=t));try{for(const r of await this.#nt.promises.readdir(e,{withFileTypes:!0}))this.#Mt(r,t);this.#Lt(t)}catch(e){this.#Ht(e.code),t.provisional=0}this.#Vt=void 0,r()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const r of this.#nt.readdirSync(e,{withFileTypes:!0}))this.#Mt(r,t);this.#Lt(t)}catch(e){this.#Ht(e.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(704&this.#kt)return!1;const t=oe&this.#kt;return 0===t||4===t||t===se}shouldWalk(t,e){return!(4&~this.#kt)&&!(704&this.#kt)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#Ot)return this.#Ot;if(!(896&this.#kt))try{const t=await this.#nt.promises.realpath(this.fullpath());return this.#Ot=this.resolve(t)}catch(t){this.#Ut()}}realpathSync(){if(this.#Ot)return this.#Ot;if(!(896&this.#kt))try{const t=this.#nt.realpathSync(this.fullpath());return this.#Ot=this.resolve(t)}catch(t){this.#Ut()}}[Ae](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;const e=new Set([]);let r=[],n=this;for(;n&&n.parent;)e.add(n),n.#It=r.join(this.sep),n.#Ct=r.join("/"),n=n.parent,r.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#It=void 0,n.#Ct=void 0,n=n.parent}}class Ee extends _e{sep="\\";splitSep=ie;constructor(t,e=0,r,n,i,s,o){super(t,e,r,n,i,s,o)}newChild(t,e=0,r={}){return new Ee(t,e,this.root,this.roots,this.nocase,this.childrenCache(),r)}getRootString(t){return st.win32.parse(t).root}getRoot(t){if((t=(t=>t.replace(/\//g,"\\").replace(ne,"$1\\"))(t.toUpperCase()))===this.root.name)return this.root;for(const[e,r]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=r;return this.roots[t]=new Se(t,this).root}sameRoot(t,e=this.root.name){return(t=t.toUpperCase().replace(/\//g,"\\").replace(ne,"$1\\"))===e}}class me extends _e{splitSep="/";sep="/";constructor(t,e=0,r,n,i,s,o){super(t,e,r,n,i,s,o)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=0,r={}){return new me(t,e,this.root,this.roots,this.nocase,this.childrenCache(),r)}}class ye{root;rootPath;roots;cwd;#zt;#Yt;#Rt;nocase;#nt;constructor(t=process.cwd(),e,r,{nocase:n,childrenCacheSize:i=16384,fs:s=ee}={}){this.#nt=re(s),(t instanceof URL||t.startsWith("file://"))&&(t=(0,ot.fileURLToPath)(t));const o=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(o),this.#zt=new pe,this.#Yt=new pe,this.#Rt=new ge(i);const a=o.substring(this.rootPath.length).split(r);if(1!==a.length||a[0]||a.pop(),void 0===n)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#nt),this.roots[this.rootPath]=this.root;let c=this.root,h=a.length-1;const l=e.sep;let u=this.rootPath,f=!1;for(const t of a){const e=h--;c=c.child(t,{relative:new Array(e).fill("..").join(l),relativePosix:new Array(e).fill("..").join("/"),fullpath:u+=(f?"":l)+t}),f=!0}this.cwd=c}depth(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#Rt}resolve(...t){let e="";for(let r=t.length-1;r>=0;r--){const n=t[r];if(n&&"."!==n&&(e=e?`${n}/${e}`:n,this.isAbsolute(n)))break}const r=this.#zt.get(e);if(void 0!==r)return r;const n=this.cwd.resolve(e).fullpath();return this.#zt.set(e,n),n}resolvePosix(...t){let e="";for(let r=t.length-1;r>=0;r--){const n=t[r];if(n&&"."!==n&&(e=e?`${n}/${e}`:n,this.isAbsolute(n)))break}const r=this.#Yt.get(e);if(void 0!==r)return r;const n=this.cwd.resolve(e).fullpathPosix();return this.#Yt.set(e,n),n}relative(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r}=e;if(t.canReaddir()){const e=await t.readdir();return r?e:e.map((t=>t.name))}return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r=!0}=e;return t.canReaddir()?r?t.readdirSync():t.readdirSync().map((t=>t.name)):[]}async lstat(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t.withFileTypes,t=this.cwd);const r=await t.readlink();return e?r:r?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t.withFileTypes,t=this.cwd);const r=t.readlinkSync();return e?r:r?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t.withFileTypes,t=this.cwd);const r=await t.realpath();return e?r:r?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t.withFileTypes,t=this.cwd);const r=t.realpathSync();return e?r:r?.fullpath()}async walk(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:i,walkFilter:s}=e,o=[];i&&!i(t)||o.push(r?t:t.fullpath());const a=new Set,c=(t,e)=>{a.add(t),t.readdirCB(((t,h)=>{if(t)return e(t);let l=h.length;if(!l)return e();const u=()=>{0==--l&&e()};for(const t of h)i&&!i(t)||o.push(r?t:t.fullpath()),n&&t.isSymbolicLink()?t.realpath().then((t=>t?.isUnknown()?t.lstat():t)).then((t=>t?.shouldWalk(a,s)?c(t,u):u())):t.shouldWalk(a,s)?c(t,u):u()}),!0)},h=t;return new Promise(((t,e)=>{c(h,(r=>{if(r)return e(r);t(o)}))}))}walkSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:i,walkFilter:s}=e,o=[];i&&!i(t)||o.push(r?t:t.fullpath());const a=new Set([t]);for(const t of a){const e=t.readdirSync();for(const t of e){i&&!i(t)||o.push(r?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!n||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,s)&&a.add(e)}}return o}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:i,walkFilter:s}=e;i&&!i(t)||(yield r?t:t.fullpath());const o=new Set([t]);for(const t of o){const e=t.readdirSync();for(const t of e){i&&!i(t)||(yield r?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!n||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(o,s)&&o.add(e)}}}stream(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:i,walkFilter:s}=e,o=new Zt({objectMode:!0});i&&!i(t)||o.write(r?t:t.fullpath());const a=new Set,c=[t];let h=0;const l=()=>{let t=!1;for(;!t;){const e=c.shift();if(!e)return void(0===h&&o.end());h++,a.add(e);const u=(e,d,p=!1)=>{if(e)return o.emit("error",e);if(n&&!p){const t=[];for(const e of d)e.isSymbolicLink()&&t.push(e.realpath().then((t=>t?.isUnknown()?t.lstat():t)));if(t.length)return void Promise.all(t).then((()=>u(null,d,!0)))}for(const e of d)!e||i&&!i(e)||o.write(r?e:e.fullpath())||(t=!0);h--;for(const t of d){const e=t.realpathCached()||t;e.shouldWalk(a,s)&&c.push(e)}t&&!o.flowing?o.once("drain",l):f||l()};let f=!0;e.readdirCB(u,!0),f=!1}};return l(),o}streamSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof _e||(e=t,t=this.cwd);const{withFileTypes:r=!0,follow:n=!1,filter:i,walkFilter:s}=e,o=new Zt({objectMode:!0}),a=new Set;i&&!i(t)||o.write(r?t:t.fullpath());const c=[t];let h=0;const l=()=>{let t=!1;for(;!t;){const e=c.shift();if(!e)return void(0===h&&o.end());h++,a.add(e);const l=e.readdirSync();for(const e of l)i&&!i(e)||o.write(r?e:e.fullpath())||(t=!0);h--;for(const t of l){let e=t;if(t.isSymbolicLink()){if(!n||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,s)&&c.push(e)}}t&&!o.flowing&&o.once("drain",l)};return l(),o}chdir(t=this.cwd){const e=this.cwd;this.cwd="string"==typeof t?this.cwd.resolve(t):t,this.cwd[Ae](e)}}class Se extends ye{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:r=!0}=e;super(t,st.win32,"\\",{...e,nocase:r}),this.nocase=r;for(let t=this.cwd;t;t=t.parent)t.nocase=this.nocase}parseRootPath(t){return st.win32.parse(t).root.toUpperCase()}newRoot(t){return new Ee(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}class be extends ye{sep="/";constructor(t=process.cwd(),e={}){const{nocase:r=!1}=e;super(t,st.posix,"/",{...e,nocase:r}),this.nocase=r}parseRootPath(t){return"/"}newRoot(t){return new me(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}class we extends be{constructor(t=process.cwd(),e={}){const{nocase:r=!0}=e;super(t,{...e,nocase:r})}}process.platform;const ve="win32"===process.platform?Se:"darwin"===process.platform?we:be,Ie=require("url");class Ce{#Xt;#Jt;#Zt;length;#te;#ee;#re;#ne;#ie;#se;#oe=!0;constructor(t,e,r,n){if(!(t.length>=1))throw new TypeError("empty pattern list");if(!(e.length>=1))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,r<0||r>=this.length)throw new TypeError("index out of range");if(this.#Xt=t,this.#Jt=e,this.#Zt=r,this.#te=n,0===this.#Zt)if(this.isUNC()){const[t,e,r,n,...i]=this.#Xt,[s,o,a,c,...h]=this.#Jt;""===i[0]&&(i.shift(),h.shift());const l=[t,e,r,n,""].join("/"),u=[s,o,a,c,""].join("/");this.#Xt=[l,...i],this.#Jt=[u,...h],this.length=this.#Xt.length}else if(this.isDrive()||this.isAbsolute()){const[t,...e]=this.#Xt,[r,...n]=this.#Jt;""===e[0]&&(e.shift(),n.shift());const i=t+"/",s=r+"/";this.#Xt=[i,...e],this.#Jt=[s,...n],this.length=this.#Xt.length}}pattern(){return this.#Xt[this.#Zt]}isString(){return"string"==typeof this.#Xt[this.#Zt]}isGlobstar(){return this.#Xt[this.#Zt]===W}isRegExp(){return this.#Xt[this.#Zt]instanceof RegExp}globString(){return this.#re=this.#re||(0===this.#Zt?this.isAbsolute()?this.#Jt[0]+this.#Jt.slice(1).join("/"):this.#Jt.join("/"):this.#Jt.slice(this.#Zt).join("/"))}hasMore(){return this.length>this.#Zt+1}rest(){return void 0!==this.#ee?this.#ee:this.hasMore()?(this.#ee=new Ce(this.#Xt,this.#Jt,this.#Zt+1,this.#te),this.#ee.#se=this.#se,this.#ee.#ie=this.#ie,this.#ee.#ne=this.#ne,this.#ee):this.#ee=null}isUNC(){const t=this.#Xt;return void 0!==this.#ie?this.#ie:this.#ie="win32"===this.#te&&0===this.#Zt&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#Xt;return void 0!==this.#ne?this.#ne:this.#ne="win32"===this.#te&&0===this.#Zt&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#Xt;return void 0!==this.#se?this.#se:this.#se=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#Xt[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#Zt?t:""}checkFollowGlobstar(){return!(0===this.#Zt||!this.isGlobstar()||!this.#oe)}markFollowGlobstar(){return!(0===this.#Zt||!this.isGlobstar()||!this.#oe||(this.#oe=!1,0))}}var ke=r(4434),Re=r(2203);const Be=require("string_decoder"),Oe="object"==typeof process&&process?process:{stdout:null,stderr:null},Te=Be.StringDecoder,Ne=Symbol("EOF"),Le=Symbol("maybeEmitEnd"),Pe=Symbol("emittedEnd"),xe=Symbol("emittingEnd"),Ue=Symbol("emittedError"),De=Symbol("closed"),He=Symbol("read"),Fe=Symbol("flush"),Me=Symbol("flushChunk"),Qe=Symbol("encoding"),$e=Symbol("decoder"),We=Symbol("flowing"),je=Symbol("paused"),Ke=Symbol("resume"),Ge=Symbol("buffer"),qe=Symbol("pipes"),Ve=Symbol("bufferLength"),ze=Symbol("bufferPush"),Ye=Symbol("bufferShift"),Xe=Symbol("objectMode"),Je=Symbol("destroyed"),Ze=Symbol("error"),tr=Symbol("emitData"),er=Symbol("emitEnd"),rr=Symbol("emitEnd2"),nr=Symbol("async"),ir=Symbol("abort"),sr=Symbol("aborted"),or=Symbol("signal"),ar=t=>Promise.resolve().then(t),cr="1"!==global._MP_NO_ITERATOR_SYMBOLS_,hr=cr&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),lr=cr&&Symbol.iterator||Symbol("iterator not implemented");class ur{constructor(t,e,r){this.src=t,this.dest=e,this.opts=r,this.ondrain=()=>t[Ke](),e.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class fr extends ur{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,r){super(t,e,r),this.proxyErrors=t=>e.emit("error",t),t.on("error",this.proxyErrors)}}class dr extends Re{constructor(t){super(),this[We]=!1,this[je]=!1,this[qe]=[],this[Ge]=[],this[Xe]=t&&t.objectMode||!1,this[Xe]?this[Qe]=null:this[Qe]=t&&t.encoding||null,"buffer"===this[Qe]&&(this[Qe]=null),this[nr]=t&&!!t.async||!1,this[$e]=this[Qe]?new Te(this[Qe]):null,this[Ne]=!1,this[Pe]=!1,this[xe]=!1,this[De]=!1,this[Ue]=null,this.writable=!0,this.readable=!0,this[Ve]=0,this[Je]=!1,t&&!0===t.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[Ge]}),t&&!0===t.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[qe]}),this[or]=t&&t.signal,this[sr]=!1,this[or]&&(this[or].addEventListener("abort",(()=>this[ir]())),this[or].aborted&&this[ir]())}get bufferLength(){return this[Ve]}get encoding(){return this[Qe]}set encoding(t){if(this[Xe])throw new Error("cannot set encoding in objectMode");if(this[Qe]&&t!==this[Qe]&&(this[$e]&&this[$e].lastNeed||this[Ve]))throw new Error("cannot change encoding");this[Qe]!==t&&(this[$e]=t?new Te(t):null,this[Ge].length&&(this[Ge]=this[Ge].map((t=>this[$e].write(t))))),this[Qe]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Xe]}set objectMode(t){this[Xe]=this[Xe]||!!t}get async(){return this[nr]}set async(t){this[nr]=this[nr]||!!t}[ir](){this[sr]=!0,this.emit("abort",this[or].reason),this.destroy(this[or].reason)}get aborted(){return this[sr]}set aborted(t){}write(t,e,r){if(this[sr])return!1;if(this[Ne])throw new Error("write after end");if(this[Je])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof e&&(r=e,e="utf8"),e||(e="utf8");const n=this[nr]?ar:t=>t();var i;return this[Xe]||Buffer.isBuffer(t)||(i=t,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(t=>t instanceof ArrayBuffer||"object"==typeof t&&t.constructor&&"ArrayBuffer"===t.constructor.name&&t.byteLength>=0)(t)?t=Buffer.from(t):"string"!=typeof t&&(this.objectMode=!0)),this[Xe]?(this.flowing&&0!==this[Ve]&&this[Fe](!0),this.flowing?this.emit("data",t):this[ze](t),0!==this[Ve]&&this.emit("readable"),r&&n(r),this.flowing):t.length?("string"!=typeof t||e===this[Qe]&&!this[$e].lastNeed||(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[Qe]&&(t=this[$e].write(t)),this.flowing&&0!==this[Ve]&&this[Fe](!0),this.flowing?this.emit("data",t):this[ze](t),0!==this[Ve]&&this.emit("readable"),r&&n(r),this.flowing):(0!==this[Ve]&&this.emit("readable"),r&&n(r),this.flowing)}read(t){if(this[Je])return null;if(0===this[Ve]||0===t||t>this[Ve])return this[Le](),null;this[Xe]&&(t=null),this[Ge].length>1&&!this[Xe]&&(this.encoding?this[Ge]=[this[Ge].join("")]:this[Ge]=[Buffer.concat(this[Ge],this[Ve])]);const e=this[He](t||null,this[Ge][0]);return this[Le](),e}[He](t,e){return t===e.length||null===t?this[Ye]():(this[Ge][0]=e.slice(t),e=e.slice(0,t),this[Ve]-=t),this.emit("data",e),this[Ge].length||this[Ne]||this.emit("drain"),e}end(t,e,r){return"function"==typeof t&&(r=t,t=null),"function"==typeof e&&(r=e,e="utf8"),t&&this.write(t,e),r&&this.once("end",r),this[Ne]=!0,this.writable=!1,!this.flowing&&this[je]||this[Le](),this}[Ke](){this[Je]||(this[je]=!1,this[We]=!0,this.emit("resume"),this[Ge].length?this[Fe]():this[Ne]?this[Le]():this.emit("drain"))}resume(){return this[Ke]()}pause(){this[We]=!1,this[je]=!0}get destroyed(){return this[Je]}get flowing(){return this[We]}get paused(){return this[je]}[ze](t){this[Xe]?this[Ve]+=1:this[Ve]+=t.length,this[Ge].push(t)}[Ye](){return this[Xe]?this[Ve]-=1:this[Ve]-=this[Ge][0].length,this[Ge].shift()}[Fe](t){do{}while(this[Me](this[Ye]())&&this[Ge].length);t||this[Ge].length||this[Ne]||this.emit("drain")}[Me](t){return this.emit("data",t),this.flowing}pipe(t,e){if(this[Je])return;const r=this[Pe];return e=e||{},t===Oe.stdout||t===Oe.stderr?e.end=!1:e.end=!1!==e.end,e.proxyErrors=!!e.proxyErrors,r?e.end&&t.end():(this[qe].push(e.proxyErrors?new fr(this,t,e):new ur(this,t,e)),this[nr]?ar((()=>this[Ke]())):this[Ke]()),t}unpipe(t){const e=this[qe].find((e=>e.dest===t));e&&(this[qe].splice(this[qe].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){const r=super.on(t,e);return"data"!==t||this[qe].length||this.flowing?"readable"===t&&0!==this[Ve]?super.emit("readable"):(t=>"end"===t||"finish"===t||"prefinish"===t)(t)&&this[Pe]?(super.emit(t),this.removeAllListeners(t)):"error"===t&&this[Ue]&&(this[nr]?ar((()=>e.call(this,this[Ue]))):e.call(this,this[Ue])):this[Ke](),r}get emittedEnd(){return this[Pe]}[Le](){this[xe]||this[Pe]||this[Je]||0!==this[Ge].length||!this[Ne]||(this[xe]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[De]&&this.emit("close"),this[xe]=!1)}emit(t,e,...r){if("error"!==t&&"close"!==t&&t!==Je&&this[Je])return;if("data"===t)return!(!this[Xe]&&!e)&&(this[nr]?ar((()=>this[tr](e))):this[tr](e));if("end"===t)return this[er]();if("close"===t){if(this[De]=!0,!this[Pe]&&!this[Je])return;const t=super.emit("close");return this.removeAllListeners("close"),t}if("error"===t){this[Ue]=e,super.emit(Ze,e);const t=!(this[or]&&!this.listeners("error").length)&&super.emit("error",e);return this[Le](),t}if("resume"===t){const t=super.emit("resume");return this[Le](),t}if("finish"===t||"prefinish"===t){const e=super.emit(t);return this.removeAllListeners(t),e}const n=super.emit(t,e,...r);return this[Le](),n}[tr](t){for(const e of this[qe])!1===e.dest.write(t)&&this.pause();const e=super.emit("data",t);return this[Le](),e}[er](){this[Pe]||(this[Pe]=!0,this.readable=!1,this[nr]?ar((()=>this[rr]())):this[rr]())}[rr](){if(this[$e]){const t=this[$e].end();if(t){for(const e of this[qe])e.dest.write(t);super.emit("data",t)}}for(const t of this[qe])t.end();const t=super.emit("end");return this.removeAllListeners("end"),t}collect(){const t=[];this[Xe]||(t.dataLength=0);const e=this.promise();return this.on("data",(e=>{t.push(e),this[Xe]||(t.dataLength+=e.length)})),e.then((()=>t))}concat(){return this[Xe]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((t=>this[Xe]?Promise.reject(new Error("cannot concat in objectMode")):this[Qe]?t.join(""):Buffer.concat(t,t.dataLength)))}promise(){return new Promise(((t,e)=>{this.on(Je,(()=>e(new Error("stream destroyed")))),this.on("error",(t=>e(t))),this.on("end",(()=>t()))}))}[hr](){let t=!1;const e=()=>(this.pause(),t=!0,Promise.resolve({done:!0}));return{next:()=>{if(t)return e();const r=this.read();if(null!==r)return Promise.resolve({done:!1,value:r});if(this[Ne])return e();let n=null,i=null;const s=t=>{this.removeListener("data",o),this.removeListener("end",a),this.removeListener(Je,c),e(),i(t)},o=t=>{this.removeListener("error",s),this.removeListener("end",a),this.removeListener(Je,c),this.pause(),n({value:t,done:!!this[Ne]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),this.removeListener(Je,c),e(),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise(((t,e)=>{i=e,n=t,this.once(Je,c),this.once("error",s),this.once("end",a),this.once("data",o)}))},throw:e,return:e,[hr](){return this}}}[lr](){let t=!1;const e=()=>(this.pause(),this.removeListener(Ze,e),this.removeListener(Je,e),this.removeListener("end",e),t=!0,{done:!0});return this.once("end",e),this.once(Ze,e),this.once(Je,e),{next:()=>{if(t)return e();const r=this.read();return null===r?e():{value:r}},throw:e,return:e,[lr](){return this}}}destroy(t){return this[Je]?(t?this.emit("error",t):this.emit(Je),this):(this[Je]=!0,this[Ge].length=0,this[Ve]=0,"function"!=typeof this.close||this[De]||this.close(),t?this.emit("error",t):this.emit(Je),this)}static isStream(t){return!!t&&(t instanceof dr||t instanceof Re||t instanceof ke&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}}const pr=dr,gr="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class Ar{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:r,noext:n,noglobstar:i,platform:s=gr}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];const o={dot:!0,nobrace:e,nocase:r,noext:n,noglobstar:i,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(const e of t){const t=new q(e,o);for(let e=0;e<t.set.length;e++){const r=t.set[e],n=t.globParts[e],i=new Ce(r,n,0,s),a=new q(i.globString(),o),c="**"===n[n.length-1],h=i.isAbsolute();h?this.absolute.push(a):this.relative.push(a),c&&(h?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}}ignored(t){const e=t.fullpath(),r=`${e}/`,n=t.relative()||".",i=`${n}/`;for(const t of this.relative)if(t.match(n)||t.match(i))return!0;for(const t of this.absolute)if(t.match(e)||t.match(r))return!0;return!1}childrenIgnored(t){const e=t.fullpath()+"/",r=(t.relative()||".")+"/";for(const t of this.relativeChildren)if(t.match(r))return!0;for(const t of this.absoluteChildren)t.match(e);return!1}}class _r{store;constructor(t=new Map){this.store=t}copy(){return new _r(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){const r=t.fullpath(),n=this.store.get(r);n?n.add(e.globString()):this.store.set(r,new Set([e.globString()]))}}class Er{store=new Map;add(t,e,r){const n=(e?2:0)|(r?1:0),i=this.store.get(t);this.store.set(t,void 0===i?n:n&i)}entries(){return[...this.store.entries()].map((([t,e])=>[t,!!(2&e),!!(1&e)]))}}class mr{store=new Map;add(t,e){if(!t.canReaddir())return;const r=this.store.get(t);r?r.find((t=>t.globString()===e.globString()))||r.push(e):this.store.set(t,[e])}get(t){const e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map((t=>[t,this.store.get(t)]))}keys(){return[...this.store.keys()].filter((t=>t.canReaddir()))}}class yr{hasWalkedCache;matches=new Er;subwalks=new mr;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new _r}processPatterns(t,e){this.patterns=e;const r=e.map((e=>[t,e]));for(let[t,e]of r){this.hasWalkedCache.storeWalked(t,e);const r=e.root(),n=e.isAbsolute()&&!1!==this.opts.absolute;if(r){t=t.resolve("/"===r&&void 0!==this.opts.root?this.opts.root:r);const n=e.rest();if(!n){this.matches.add(t,!0,!1);continue}e=n}if(t.isENOENT())continue;let i,s,o=!1;for(;"string"==typeof(i=e.pattern())&&(s=e.rest());){const r=t.resolve(i);if(r.isUnknown()&&".."!==i)break;t=r,e=s,o=!0}if(i=e.pattern(),s=e.rest(),o){if(this.hasWalkedCache.hasWalked(t,e))continue;this.hasWalkedCache.storeWalked(t,e)}if("string"!=typeof i)if(i===W){(!t.isSymbolicLink()||this.follow||e.checkFollowGlobstar())&&this.subwalks.add(t,e);const r=s?.pattern(),i=s?.rest();if(s&&(""!==r&&"."!==r||i)){if(".."===r){const e=t.parent||t;i?this.hasWalkedCache.hasWalked(e,i)||this.subwalks.add(e,i):this.matches.add(e,n,!0)}}else this.matches.add(t,n,""===r||"."===r)}else i instanceof RegExp&&this.subwalks.add(t,e);else if(s)this.subwalks.add(t,e);else{const e=".."===i||""===i||"."===i;this.matches.add(t.resolve(i),n,e)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new yr(this.opts,this.hasWalkedCache)}filterEntries(t,e){const r=this.subwalks.get(t),n=this.child();for(const t of e)for(const e of r){const r=e.isAbsolute(),i=e.pattern(),s=e.rest();i===W?n.testGlobstar(t,e,s,r):i instanceof RegExp?n.testRegExp(t,i,s,r):n.testString(t,i,s,r)}return n}testGlobstar(t,e,r,n){if(!this.dot&&t.name.startsWith(".")||(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(r&&e.checkFollowGlobstar()?this.subwalks.add(t,r):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),r){const e=r.pattern();if("string"==typeof e&&".."!==e&&""!==e&&"."!==e)this.testString(t,e,r.rest(),n);else if(".."===e){const e=t.parent||t;this.subwalks.add(e,r)}else e instanceof RegExp&&this.testRegExp(t,e,r.rest(),n)}}testRegExp(t,e,r,n){e.test(t.name)&&(r?this.subwalks.add(t,r):this.matches.add(t,n,!1))}testString(t,e,r,n){t.isNamed(e)&&(r?this.subwalks.add(t,r):this.matches.add(t,n,!1))}}class Sr{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#ae=[];#ce;#he;signal;maxDepth;constructor(t,e,r){this.patterns=t,this.path=e,this.opts=r,this.#he="win32"===r.platform?"\\":"/",r.ignore&&(this.#ce=((t,e)=>"string"==typeof t?new Ar([t],e):Array.isArray(t)?new Ar(t,e):t)(r.ignore,r)),this.maxDepth=r.maxDepth||1/0,r.signal&&(this.signal=r.signal,this.signal.addEventListener("abort",(()=>{this.#ae.length=0})))}#le(t){return this.seen.has(t)||!!this.#ce?.ignored?.(t)}#ue(t){return!!this.#ce?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;let t;for(this.paused=!1;!this.paused&&(t=this.#ae.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#ae.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=t.realpathCached()||await t.realpath(),!r)return;t=r}const n=t.isUnknown()||this.opts.stat;return this.matchCheckTest(n?await t.lstat():t,e)}matchCheckTest(t,e){return!t||!(this.maxDepth===1/0||t.depth()<=this.maxDepth)||e&&!t.canReaddir()||this.opts.nodir&&t.isDirectory()||this.#le(t)?void 0:t}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=t.realpathCached()||t.realpathSync(),!r)return;t=r}const n=t.isUnknown()||this.opts.stat;return this.matchCheckTest(n?t.lstatSync():t,e)}matchFinish(t,e){if(this.#le(t))return;const r=void 0===this.opts.absolute?e:this.opts.absolute;this.seen.add(t);const n=this.opts.mark&&t.isDirectory()?this.#he:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(r)this.matchEmit(t.fullpath()+n);else{const e=t.relative(),r=this.opts.dotRelative&&!e.startsWith(".."+this.#he)?"."+this.#he:"";this.matchEmit(!e&&n?"."+n:r+e+n)}}async match(t,e,r){const n=await this.matchCheck(t,r);n&&this.matchFinish(n,e)}matchSync(t,e,r){const n=this.matchCheckSync(t,r);n&&this.matchFinish(n,e)}walkCB(t,e,r){this.signal?.aborted&&r(),this.walkCB2(t,e,new yr(this.opts),r)}walkCB2(t,e,r,n){if(this.#ue(t))return n();if(this.signal?.aborted&&n(),this.paused)return void this.onResume((()=>this.walkCB2(t,e,r,n)));r.processPatterns(t,e);let i=1;const s=()=>{0==--i&&n()};for(const[t,e,n]of r.matches.entries())this.#le(t)||(i++,this.match(t,e,n).then((()=>s())));for(const t of r.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;i++;const e=t.readdirCached();t.calledReaddir()?this.walkCB3(t,e,r,s):t.readdirCB(((e,n)=>this.walkCB3(t,n,r,s)),!0)}s()}walkCB3(t,e,r,n){r=r.filterEntries(t,e);let i=1;const s=()=>{0==--i&&n()};for(const[t,e,n]of r.matches.entries())this.#le(t)||(i++,this.match(t,e,n).then((()=>s())));for(const[t,e]of r.subwalks.entries())i++,this.walkCB2(t,e,r.child(),s);s()}walkCBSync(t,e,r){this.signal?.aborted&&r(),this.walkCB2Sync(t,e,new yr(this.opts),r)}walkCB2Sync(t,e,r,n){if(this.#ue(t))return n();if(this.signal?.aborted&&n(),this.paused)return void this.onResume((()=>this.walkCB2Sync(t,e,r,n)));r.processPatterns(t,e);let i=1;const s=()=>{0==--i&&n()};for(const[t,e,n]of r.matches.entries())this.#le(t)||this.matchSync(t,e,n);for(const t of r.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;i++;const e=t.readdirSync();this.walkCB3Sync(t,e,r,s)}s()}walkCB3Sync(t,e,r,n){r=r.filterEntries(t,e);let i=1;const s=()=>{0==--i&&n()};for(const[t,e,n]of r.matches.entries())this.#le(t)||this.matchSync(t,e,n);for(const[t,e]of r.subwalks.entries())i++,this.walkCB2Sync(t,e,r.child(),s);s()}}class br extends Sr{matches;constructor(t,e,r){super(t,e,r),this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise(((t,e)=>{this.walkCB(this.path,this.patterns,(()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)}))})),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason})),this.matches}}class wr extends Sr{results;constructor(t,e,r){super(t,e,r),this.results=new pr({signal:this.signal,objectMode:!0}),this.results.on("drain",(()=>this.resume())),this.results.on("resume",(()=>this.resume()))}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){const t=this.path;return t.isUnknown()?t.lstat().then((()=>{this.walkCB(t,this.patterns,(()=>this.results.end()))})):this.walkCB(t,this.patterns,(()=>this.results.end())),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>this.results.end())),this.results}}const vr="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class Ir{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,Ie.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth="number"==typeof e.maxDepth?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&void 0!==this.absolute)throw new Error("cannot set absolute and withFileTypes:true");if("string"==typeof t&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(t=t.map((t=>t.replace(/\\/g,"/")))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map((t=>t.includes("/")?t:`./**/${t}`))}if(this.pattern=t,this.platform=e.platform||vr,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,void 0!==e.nocase&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const t="win32"===e.platform?Se:"darwin"===e.platform?we:e.platform?be:ve;this.scurry=new t(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;const r={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:!0,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},n=this.pattern.map((t=>new q(t,r))),[i,s]=n.reduce(((t,e)=>(t[0].push(...e.set),t[1].push(...e.globParts),t)),[[],[]]);this.patterns=i.map(((t,e)=>new Ce(t,s[e],0,this.platform)))}async walk(){return[...await new br(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new br(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new wr(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new wr(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}const Cr=(t,e={})=>{Array.isArray(t)||(t=[t]);for(const r of t)if(new q(r,e).hasMagic())return!0;return!1};function kr(t,e={}){return new Ir(t,e).streamSync()}function Rr(t,e={}){return new Ir(t,e).stream()}function Br(t,e={}){return new Ir(t,e).walkSync()}async function Or(t,e={}){return new Ir(t,e).walk()}function Tr(t,e={}){return new Ir(t,e).iterateSync()}function Nr(t,e={}){return new Ir(t,e).iterate()}const Lr=kr,Pr=Object.assign(Rr,{sync:kr}),xr=Tr,Ur=Object.assign(Nr,{sync:Tr}),Dr=Object.assign(Br,{stream:kr,iterate:Tr}),Hr=Object.assign(Or,{glob:Or,globSync:Br,sync:Dr,globStream:Rr,stream:Pr,globStreamSync:kr,streamSync:Lr,globIterate:Nr,iterate:Ur,globIterateSync:Tr,iterateSync:xr,Glob:Ir,hasMagic:Cr,escape:y,unescape:h})},8342:t=>{"use strict";t.exports={rE:"1.14.0"}}},n={};function i(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return r[t].call(s.exports,s,s.exports,i),s.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var s=Object.create(null);i.r(s);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&n&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>r[t]));return o.default=()=>r,i.d(s,o),s},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s=i(5256),o=exports;for(var a in s)o[a]=s[a];s.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/219cb2ce564529f971e892df51d6dc436d6692a0/extensions/open-remote-ssh/dist/extension.js.map